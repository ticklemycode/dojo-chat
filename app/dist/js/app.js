(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
'use strict';

var _hw = require('./modules/hw');

var _chat = require('./modules/chat');

console.log('Just want to say, ' + _hw.HELLO_WORLD);

window.$ = document.querySelector.bind(document);

var options = {
  joinForm: $('#join'),
  chatForm: $('#chat-form'),
  input: $('#chat-input'),
  usersOutlet: $('#users-outlet'),
  chatOutlet: $('#chat-outlet'),
  randomUserImg: $('#random-user-img'),
  username: $('#username'),
  error: $('#error')
};

var DojoChat = new _chat.ChatService(options);

},{"./modules/chat":2,"./modules/hw":3}],2:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ChatService = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _socket = require('../../../node_modules/socket.io-client/dist/socket.io');

var _socket2 = _interopRequireDefault(_socket);

var _events = require('../../../server/events');

var _events2 = _interopRequireDefault(_events);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var API_URL = 'https://randomuser.me/api/';

var ChatService = exports.ChatService = function () {
  function ChatService(options) {
    _classCallCheck(this, ChatService);

    this.input = options.input;
    this.chatOutlet = options.chatOutlet;
    this.usersOutlet = options.usersOutlet;
    this.chatForm = options.chatForm;
    this.joinForm = options.joinForm;
    this.randomUserImg = options.randomUserImg;
    this.username = options.username;
    this.error = options.error;

    this.randomUserImgUrl;

    /** Un-comment if running as a standalone service */
    this.socket = _socket2.default.connect('http://localhost:9000');

    /** START for Express Server */
    // this.socket = io();
    /** END for Express Server */

    this.onInit();
  }

  /**
   * addMessage
   * Adds chat message to chat outlet
   * @param {{msg:string,img:string,time:string,username:string}} data: 
   */


  _createClass(ChatService, [{
    key: 'addMessage',
    value: function addMessage(data) {
      var _this = this;

      var xhr = new XMLHttpRequest();
      xhr.open('GET', data.img, true);
      xhr.responseType = 'blob';
      xhr.onload = function (e) {
        var img = window.URL.createObjectURL(xhr.response);
        var chatWindow = document.querySelector('#chat-outlet');
        chatWindow.insertAdjacentHTML('beforeend', _this.msgTemplate(data, img));

        // scroll to bottom of chat window
        chatWindow.scrollTop = _this.chatOutlet.scrollHeight;
      };

      xhr.send();
    }

    /**
     * addUsers
     * Adds users to active users outlet
     * @param {[]} users 
     */

  }, {
    key: 'addUsers',
    value: function addUsers(users) {
      var _this2 = this;

      users.forEach(function (user) {
        _this2.usersOutlet.insertAdjacentHTML('beforeend', _this2.userTemplate(user));
      });
    }

    /**
     * showChat
     * show chat area and high join form
     */

  }, {
    key: 'showChat',
    value: function showChat() {
      $('#join-chat').style.display = 'none';
      $('#chat').style.display = 'flex';
    }

    /**
     * setRandomImage
     * Fetches random image for user
     */

  }, {
    key: 'setRandomImage',
    value: function setRandomImage() {
      var _this3 = this;

      // TODO: choose gender `&gender=<male|female>`
      return fetch(API_URL + '?inc=picture').then(function (resp) {
        return resp.json();
      }).then(function (data) {
        _this3.randomUserImgUrl = data.results[0].picture.large;
        var xhr = new XMLHttpRequest();
        xhr.open('GET', data.results[0].picture.large, true);
        xhr.responseType = 'blob';
        xhr.onload = function (e) {
          document.querySelector('#random-user-img').src = window.URL.createObjectURL(this.response);
        };

        xhr.send();
      });
    }

    /**
     * msgTemplate
     * @param {{img:string,username:string,time:string,msg:string}} data 
     */

  }, {
    key: 'msgTemplate',
    value: function msgTemplate(data, img) {
      return '\n    <li class="media">\n      <img class="mr-3 rounded-circle" src="' + img + '" alt="Person">\n      <div class="media-body">\n        <h6>' + data.username + ' <small class="time">' + data.time + '</small></h6>\n        ' + data.msg + '\n      </div>\n    </li>\n    ';
    }

    /**
     * userTemplate
     * @param {string} user 
     */

  }, {
    key: 'userTemplate',
    value: function userTemplate(user) {
      return '\n      <li class="media">\n        <div class="media-body">\n          <h6>' + user + '</h6>\n        </div>\n      </li>\n    ';
    }

    /**
     * socketEventListeners
     * Listens for emitted events from server (socket)
     */

  }, {
    key: 'socketEventListeners',
    value: function socketEventListeners() {
      var _this4 = this;

      this.socket.on(_events2.default.NEW_MESSAGE, function (data) {
        _this4.addMessage(data);
      });

      this.socket.on(_events2.default.SEND_USERNAMES, function (usernames) {
        _this4.addUsers(usernames);
      });
    }

    /**
     * socketEventEmitters
     * Emits events to server (socket)
     */

  }, {
    key: 'socketEventEmitters',
    value: function socketEventEmitters() {
      var _this5 = this;

      // submitting join form
      this.joinForm.addEventListener('submit', function (e) {
        e.preventDefault();

        // with acknowledgement callback
        _this5.socket.emit(_events2.default.NEW_USER, _this5.username.value, function (cbData) {
          _this5.error.style.display = 'none';
          if (cbData) {
            _this5.showChat();
          } else {
            _this5.error.innerHTML = 'Username already take... sowwy';
            _this5.error.style.display = 'block';
          }
        });
      });

      // submitting chat form
      this.chatForm.addEventListener('submit', function (e) {
        e.preventDefault();

        _this5.socket.emit(_events2.default.SEND_MESSAGE, {
          msg: _this5.input.value,
          img: _this5.randomUserImgUrl
        });

        _this5.input.value = '';
      });
    }

    /**
     * onInit
     * Initialize chat service
     */

  }, {
    key: 'onInit',
    value: function onInit() {
      // events from server
      this.socketEventListeners();

      // events to server
      this.socketEventEmitters();

      // set random image
      this.setRandomImage();
    }
  }]);

  return ChatService;
}();

},{"../../../node_modules/socket.io-client/dist/socket.io":4,"../../../server/events":5}],3:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
var HELLO_WORLD = exports.HELLO_WORLD = 'Hello World!';

},{}],4:[function(require,module,exports){
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.io=e():t.io=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t,e){"object"===("undefined"==typeof t?"undefined":o(t))&&(e=t,t=void 0),e=e||{};var n,r=i(t),s=r.source,u=r.id,h=r.path,f=p[u]&&h in p[u].nsps,l=e.forceNew||e["force new connection"]||!1===e.multiplex||f;return l?(c("ignoring socket cache for %s",s),n=a(s,e)):(p[u]||(c("new io instance for %s",s),p[u]=a(s,e)),n=p[u]),r.query&&!e.query&&(e.query=r.query),n.socket(r.path,e)}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=n(1),s=n(7),a=n(13),c=n(3)("socket.io-client");t.exports=e=r;var p=e.managers={};e.protocol=s.protocol,e.connect=r,e.Manager=n(13),e.Socket=n(37)},function(t,e,n){(function(e){"use strict";function r(t,n){var r=t;n=n||e.location,null==t&&(t=n.protocol+"//"+n.host),"string"==typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?n.protocol+t:n.host+t),/^(https?|wss?):\/\//.test(t)||(i("protocol-less url %s",t),t="undefined"!=typeof n?n.protocol+"//"+t:"https://"+t),i("parse %s",t),r=o(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";var s=r.host.indexOf(":")!==-1,a=s?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+a+":"+r.port,r.href=r.protocol+"://"+a+(n&&n.port===r.port?"":":"+r.port),r}var o=n(2),i=n(3)("socket.io-client:url");t.exports=r}).call(e,function(){return this}())},function(t,e){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,r=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(t){var e=t,o=t.indexOf("["),i=t.indexOf("]");o!=-1&&i!=-1&&(t=t.substring(0,o)+t.substring(o,i).replace(/:/g,";")+t.substring(i,t.length));for(var s=n.exec(t||""),a={},c=14;c--;)a[r[c]]=s[c]||"";return o!=-1&&i!=-1&&(a.source=e,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a}},function(t,e,n){(function(r){function o(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function i(t){var n=this.useColors;if(t[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+t[0]+(n?"%c ":" ")+"+"+e.humanize(this.diff),n){var r="color: "+this.color;t.splice(1,0,r,"color: inherit");var o=0,i=0;t[0].replace(/%[a-zA-Z%]/g,function(t){"%%"!==t&&(o++,"%c"===t&&(i=o))}),t.splice(i,0,r)}}function s(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function a(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(n){}}function c(){var t;try{t=e.storage.debug}catch(n){}return!t&&"undefined"!=typeof r&&"env"in r&&(t=r.env.DEBUG),t}function p(){try{return window.localStorage}catch(t){}}e=t.exports=n(5),e.log=s,e.formatArgs=i,e.save=a,e.load=c,e.useColors=o,e.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:p(),e.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],e.formatters.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},e.enable(c())}).call(e,n(4))},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(t){if(u===setTimeout)return setTimeout(t,0);if((u===n||!u)&&setTimeout)return u=setTimeout,setTimeout(t,0);try{return u(t,0)}catch(e){try{return u.call(null,t,0)}catch(e){return u.call(this,t,0)}}}function i(t){if(h===clearTimeout)return clearTimeout(t);if((h===r||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(t);try{return h(t)}catch(e){try{return h.call(null,t)}catch(e){return h.call(this,t)}}}function s(){y&&l&&(y=!1,l.length?d=l.concat(d):m=-1,d.length&&a())}function a(){if(!y){var t=o(s);y=!0;for(var e=d.length;e;){for(l=d,d=[];++m<e;)l&&l[m].run();m=-1,e=d.length}l=null,y=!1,i(t)}}function c(t,e){this.fun=t,this.array=e}function p(){}var u,h,f=t.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:n}catch(t){u=n}try{h="function"==typeof clearTimeout?clearTimeout:r}catch(t){h=r}}();var l,d=[],y=!1,m=-1;f.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];d.push(new c(t,e)),1!==d.length||y||o(a)},c.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=p,f.addListener=p,f.once=p,f.off=p,f.removeListener=p,f.removeAllListeners=p,f.emit=p,f.prependListener=p,f.prependOnceListener=p,f.listeners=function(t){return[]},f.binding=function(t){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(t){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(t,e,n){function r(t){var n,r=0;for(n in t)r=(r<<5)-r+t.charCodeAt(n),r|=0;return e.colors[Math.abs(r)%e.colors.length]}function o(t){function n(){if(n.enabled){var t=n,r=+new Date,o=r-(p||r);t.diff=o,t.prev=p,t.curr=r,p=r;for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];i[0]=e.coerce(i[0]),"string"!=typeof i[0]&&i.unshift("%O");var a=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,function(n,r){if("%%"===n)return n;a++;var o=e.formatters[r];if("function"==typeof o){var s=i[a];n=o.call(t,s),i.splice(a,1),a--}return n}),e.formatArgs.call(t,i);var c=n.log||e.log||console.log.bind(console);c.apply(t,i)}}return n.namespace=t,n.enabled=e.enabled(t),n.useColors=e.useColors(),n.color=r(t),"function"==typeof e.init&&e.init(n),n}function i(t){e.save(t),e.names=[],e.skips=[];for(var n=("string"==typeof t?t:"").split(/[\s,]+/),r=n.length,o=0;o<r;o++)n[o]&&(t=n[o].replace(/\*/g,".*?"),"-"===t[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")))}function s(){e.enable("")}function a(t){var n,r;for(n=0,r=e.skips.length;n<r;n++)if(e.skips[n].test(t))return!1;for(n=0,r=e.names.length;n<r;n++)if(e.names[n].test(t))return!0;return!1}function c(t){return t instanceof Error?t.stack||t.message:t}e=t.exports=o.debug=o["default"]=o,e.coerce=c,e.disable=s,e.enable=i,e.enabled=a,e.humanize=n(6),e.names=[],e.skips=[],e.formatters={};var p},function(t,e){function n(t){if(t=String(t),!(t.length>100)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(e){var n=parseFloat(e[1]),r=(e[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*u;case"days":case"day":case"d":return n*p;case"hours":case"hour":case"hrs":case"hr":case"h":return n*c;case"minutes":case"minute":case"mins":case"min":case"m":return n*a;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function r(t){return t>=p?Math.round(t/p)+"d":t>=c?Math.round(t/c)+"h":t>=a?Math.round(t/a)+"m":t>=s?Math.round(t/s)+"s":t+"ms"}function o(t){return i(t,p,"day")||i(t,c,"hour")||i(t,a,"minute")||i(t,s,"second")||t+" ms"}function i(t,e,n){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+n:Math.ceil(t/e)+" "+n+"s"}var s=1e3,a=60*s,c=60*a,p=24*c,u=365.25*p;t.exports=function(t,e){e=e||{};var i=typeof t;if("string"===i&&t.length>0)return n(t);if("number"===i&&isNaN(t)===!1)return e["long"]?o(t):r(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},function(t,e,n){function r(){}function o(t){var n=""+t.type;return e.BINARY_EVENT!==t.type&&e.BINARY_ACK!==t.type||(n+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(n+=t.nsp+","),null!=t.id&&(n+=t.id),null!=t.data&&(n+=JSON.stringify(t.data)),h("encoded %j as %s",t,n),n}function i(t,e){function n(t){var n=d.deconstructPacket(t),r=o(n.packet),i=n.buffers;i.unshift(r),e(i)}d.removeBlobs(t,n)}function s(){this.reconstructor=null}function a(t){var n=0,r={type:Number(t.charAt(0))};if(null==e.types[r.type])return u();if(e.BINARY_EVENT===r.type||e.BINARY_ACK===r.type){for(var o="";"-"!==t.charAt(++n)&&(o+=t.charAt(n),n!=t.length););if(o!=Number(o)||"-"!==t.charAt(n))throw new Error("Illegal attachments");r.attachments=Number(o)}if("/"===t.charAt(n+1))for(r.nsp="";++n;){var i=t.charAt(n);if(","===i)break;if(r.nsp+=i,n===t.length)break}else r.nsp="/";var s=t.charAt(n+1);if(""!==s&&Number(s)==s){for(r.id="";++n;){var i=t.charAt(n);if(null==i||Number(i)!=i){--n;break}if(r.id+=t.charAt(n),n===t.length)break}r.id=Number(r.id)}return t.charAt(++n)&&(r=c(r,t.substr(n))),h("decoded %s as %j",t,r),r}function c(t,e){try{t.data=JSON.parse(e)}catch(n){return u()}return t}function p(t){this.reconPack=t,this.buffers=[]}function u(){return{type:e.ERROR,data:"parser error"}}var h=n(3)("socket.io-parser"),f=n(8),l=n(9),d=n(11),y=n(12);e.protocol=4,e.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],e.CONNECT=0,e.DISCONNECT=1,e.EVENT=2,e.ACK=3,e.ERROR=4,e.BINARY_EVENT=5,e.BINARY_ACK=6,e.Encoder=r,e.Decoder=s,r.prototype.encode=function(t,n){if(t.type!==e.EVENT&&t.type!==e.ACK||!l(t.data)||(t.type=t.type===e.EVENT?e.BINARY_EVENT:e.BINARY_ACK),h("encoding packet %j",t),e.BINARY_EVENT===t.type||e.BINARY_ACK===t.type)i(t,n);else{var r=o(t);n([r])}},f(s.prototype),s.prototype.add=function(t){var n;if("string"==typeof t)n=a(t),e.BINARY_EVENT===n.type||e.BINARY_ACK===n.type?(this.reconstructor=new p(n),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",n)):this.emit("decoded",n);else{if(!y(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");n=this.reconstructor.takeBinaryData(t),n&&(this.reconstructor=null,this.emit("decoded",n))}},s.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},p.prototype.takeBinaryData=function(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){var e=d.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null},p.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(t,e,n){function r(t){if(t)return o(t)}function o(t){for(var e in r.prototype)t[e]=r.prototype[e];return t}t.exports=r,r.prototype.on=r.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},r.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var r,o=0;o<n.length;o++)if(r=n[o],r===e||r.fn===e){n.splice(o,1);break}return this},r.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),n=this._callbacks["$"+t];if(n){n=n.slice(0);for(var r=0,o=n.length;r<o;++r)n[r].apply(this,e)}return this},r.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},r.prototype.hasListeners=function(t){return!!this.listeners(t).length}},function(t,e,n){(function(e){function r(t){if(!t||"object"!=typeof t)return!1;if(o(t)){for(var n=0,i=t.length;n<i;n++)if(r(t[n]))return!0;return!1}if("function"==typeof e.Buffer&&e.Buffer.isBuffer&&e.Buffer.isBuffer(t)||"function"==typeof e.ArrayBuffer&&t instanceof ArrayBuffer||s&&t instanceof Blob||a&&t instanceof File)return!0;if(t.toJSON&&"function"==typeof t.toJSON&&1===arguments.length)return r(t.toJSON(),!0);for(var c in t)if(Object.prototype.hasOwnProperty.call(t,c)&&r(t[c]))return!0;return!1}var o=n(10),i=Object.prototype.toString,s="function"==typeof e.Blob||"[object BlobConstructor]"===i.call(e.Blob),a="function"==typeof e.File||"[object FileConstructor]"===i.call(e.File);t.exports=r}).call(e,function(){return this}())},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){(function(t){function r(t,e){if(!t)return t;if(s(t)){var n={_placeholder:!0,num:e.length};return e.push(t),n}if(i(t)){for(var o=new Array(t.length),a=0;a<t.length;a++)o[a]=r(t[a],e);return o}if("object"==typeof t&&!(t instanceof Date)){var o={};for(var c in t)o[c]=r(t[c],e);return o}return t}function o(t,e){if(!t)return t;if(t&&t._placeholder)return e[t.num];if(i(t))for(var n=0;n<t.length;n++)t[n]=o(t[n],e);else if("object"==typeof t)for(var r in t)t[r]=o(t[r],e);return t}var i=n(10),s=n(12),a=Object.prototype.toString,c="function"==typeof t.Blob||"[object BlobConstructor]"===a.call(t.Blob),p="function"==typeof t.File||"[object FileConstructor]"===a.call(t.File);e.deconstructPacket=function(t){var e=[],n=t.data,o=t;return o.data=r(n,e),o.attachments=e.length,{packet:o,buffers:e}},e.reconstructPacket=function(t,e){return t.data=o(t.data,e),t.attachments=void 0,t},e.removeBlobs=function(t,e){function n(t,a,u){if(!t)return t;if(c&&t instanceof Blob||p&&t instanceof File){r++;var h=new FileReader;h.onload=function(){u?u[a]=this.result:o=this.result,--r||e(o)},h.readAsArrayBuffer(t)}else if(i(t))for(var f=0;f<t.length;f++)n(t[f],f,t);else if("object"==typeof t&&!s(t))for(var l in t)n(t[l],l,t)}var r=0,o=t;n(o),r||e(o)}}).call(e,function(){return this}())},function(t,e){(function(e){function n(t){return e.Buffer&&e.Buffer.isBuffer(t)||e.ArrayBuffer&&t instanceof ArrayBuffer}t.exports=n}).call(e,function(){return this}())},function(t,e,n){"use strict";function r(t,e){if(!(this instanceof r))return new r(t,e);t&&"object"===("undefined"==typeof t?"undefined":o(t))&&(e=t,t=void 0),e=e||{},e.path=e.path||"/socket.io",this.nsps={},this.subs=[],this.opts=e,this.reconnection(e.reconnection!==!1),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(e.randomizationFactor||.5),this.backoff=new l({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this.readyState="closed",this.uri=t,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var n=e.parser||c;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this.autoConnect=e.autoConnect!==!1,this.autoConnect&&this.open()}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=n(14),s=n(37),a=n(8),c=n(7),p=n(39),u=n(40),h=n(3)("socket.io-client:manager"),f=n(36),l=n(41),d=Object.prototype.hasOwnProperty;t.exports=r,r.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var t in this.nsps)d.call(this.nsps,t)&&this.nsps[t].emit.apply(this.nsps[t],arguments)},r.prototype.updateSocketIds=function(){for(var t in this.nsps)d.call(this.nsps,t)&&(this.nsps[t].id=this.generateId(t))},r.prototype.generateId=function(t){return("/"===t?"":t+"#")+this.engine.id},a(r.prototype),r.prototype.reconnection=function(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection},r.prototype.reconnectionAttempts=function(t){return arguments.length?(this._reconnectionAttempts=t,this):this._reconnectionAttempts},r.prototype.reconnectionDelay=function(t){return arguments.length?(this._reconnectionDelay=t,this.backoff&&this.backoff.setMin(t),this):this._reconnectionDelay},r.prototype.randomizationFactor=function(t){return arguments.length?(this._randomizationFactor=t,this.backoff&&this.backoff.setJitter(t),this):this._randomizationFactor},r.prototype.reconnectionDelayMax=function(t){return arguments.length?(this._reconnectionDelayMax=t,this.backoff&&this.backoff.setMax(t),this):this._reconnectionDelayMax},r.prototype.timeout=function(t){return arguments.length?(this._timeout=t,this):this._timeout},r.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},r.prototype.open=r.prototype.connect=function(t,e){if(h("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;h("opening %s",this.uri),this.engine=i(this.uri,this.opts);var n=this.engine,r=this;this.readyState="opening",this.skipReconnect=!1;var o=p(n,"open",function(){r.onopen(),t&&t()}),s=p(n,"error",function(e){if(h("connect_error"),r.cleanup(),r.readyState="closed",r.emitAll("connect_error",e),t){var n=new Error("Connection error");n.data=e,t(n)}else r.maybeReconnectOnOpen()});if(!1!==this._timeout){var a=this._timeout;h("connect attempt will timeout after %d",a);var c=setTimeout(function(){h("connect attempt timed out after %d",a),o.destroy(),n.close(),n.emit("error","timeout"),r.emitAll("connect_timeout",a)},a);this.subs.push({destroy:function(){clearTimeout(c)}})}return this.subs.push(o),this.subs.push(s),this},r.prototype.onopen=function(){h("open"),this.cleanup(),this.readyState="open",this.emit("open");var t=this.engine;this.subs.push(p(t,"data",u(this,"ondata"))),this.subs.push(p(t,"ping",u(this,"onping"))),this.subs.push(p(t,"pong",u(this,"onpong"))),this.subs.push(p(t,"error",u(this,"onerror"))),this.subs.push(p(t,"close",u(this,"onclose"))),this.subs.push(p(this.decoder,"decoded",u(this,"ondecoded")))},r.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},r.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},r.prototype.ondata=function(t){this.decoder.add(t)},r.prototype.ondecoded=function(t){this.emit("packet",t)},r.prototype.onerror=function(t){h("error",t),this.emitAll("error",t)},r.prototype.socket=function(t,e){function n(){~f(o.connecting,r)||o.connecting.push(r)}var r=this.nsps[t];if(!r){r=new s(this,t,e),this.nsps[t]=r;var o=this;r.on("connecting",n),r.on("connect",function(){r.id=o.generateId(t)}),this.autoConnect&&n()}return r},r.prototype.destroy=function(t){var e=f(this.connecting,t);~e&&this.connecting.splice(e,1),this.connecting.length||this.close()},r.prototype.packet=function(t){h("writing packet %j",t);var e=this;t.query&&0===t.type&&(t.nsp+="?"+t.query),e.encoding?e.packetBuffer.push(t):(e.encoding=!0,this.encoder.encode(t,function(n){for(var r=0;r<n.length;r++)e.engine.write(n[r],t.options);e.encoding=!1,e.processPacketQueue()}))},r.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var t=this.packetBuffer.shift();this.packet(t)}},r.prototype.cleanup=function(){h("cleanup");for(var t=this.subs.length,e=0;e<t;e++){var n=this.subs.shift();n.destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},r.prototype.close=r.prototype.disconnect=function(){h("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},r.prototype.onclose=function(t){h("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()},r.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)h("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var e=this.backoff.duration();h("will wait %dms before reconnect attempt",e),this.reconnecting=!0;var n=setTimeout(function(){t.skipReconnect||(h("attempting reconnect"),t.emitAll("reconnect_attempt",t.backoff.attempts),t.emitAll("reconnecting",t.backoff.attempts),t.skipReconnect||t.open(function(e){e?(h("reconnect attempt error"),t.reconnecting=!1,t.reconnect(),t.emitAll("reconnect_error",e.data)):(h("reconnect success"),t.onreconnect())}))},e);this.subs.push({destroy:function(){clearTimeout(n)}})}},r.prototype.onreconnect=function(){var t=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",t)}},function(t,e,n){t.exports=n(15),t.exports.parser=n(22)},function(t,e,n){(function(e){function r(t,n){if(!(this instanceof r))return new r(t,n);n=n||{},t&&"object"==typeof t&&(n=t,t=null),t?(t=u(t),n.hostname=t.host,n.secure="https"===t.protocol||"wss"===t.protocol,n.port=t.port,t.query&&(n.query=t.query)):n.host&&(n.hostname=u(n.host).host),this.secure=null!=n.secure?n.secure:e.location&&"https:"===location.protocol,n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.agent=n.agent||!1,this.hostname=n.hostname||(e.location?location.hostname:"localhost"),this.port=n.port||(e.location&&location.port?location.port:this.secure?443:80),this.query=n.query||{},"string"==typeof this.query&&(this.query=h.decode(this.query)),this.upgrade=!1!==n.upgrade,this.path=(n.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!n.forceJSONP,this.jsonp=!1!==n.jsonp,this.forceBase64=!!n.forceBase64,this.enablesXDR=!!n.enablesXDR,this.timestampParam=n.timestampParam||"t",this.timestampRequests=n.timestampRequests,this.transports=n.transports||["polling","websocket"],this.transportOptions=n.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=n.policyPort||843,this.rememberUpgrade=n.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=n.onlyBinaryUpgrades,this.perMessageDeflate=!1!==n.perMessageDeflate&&(n.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=n.pfx||null,this.key=n.key||null,this.passphrase=n.passphrase||null,this.cert=n.cert||null,this.ca=n.ca||null,this.ciphers=n.ciphers||null,this.rejectUnauthorized=void 0===n.rejectUnauthorized||n.rejectUnauthorized,this.forceNode=!!n.forceNode;var o="object"==typeof e&&e;o.global===o&&(n.extraHeaders&&Object.keys(n.extraHeaders).length>0&&(this.extraHeaders=n.extraHeaders),n.localAddress&&(this.localAddress=n.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}function o(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}var i=n(16),s=n(8),a=n(3)("engine.io-client:socket"),c=n(36),p=n(22),u=n(2),h=n(30);t.exports=r,r.priorWebsocketSuccess=!1,s(r.prototype),r.protocol=p.protocol,r.Socket=r,r.Transport=n(21),r.transports=n(16),r.parser=n(22),r.prototype.createTransport=function(t){a('creating transport "%s"',t);var e=o(this.query);e.EIO=p.protocol,e.transport=t;var n=this.transportOptions[t]||{};this.id&&(e.sid=this.id);var r=new i[t]({query:e,socket:this,agent:n.agent||this.agent,hostname:n.hostname||this.hostname,port:n.port||this.port,secure:n.secure||this.secure,path:n.path||this.path,forceJSONP:n.forceJSONP||this.forceJSONP,jsonp:n.jsonp||this.jsonp,forceBase64:n.forceBase64||this.forceBase64,enablesXDR:n.enablesXDR||this.enablesXDR,timestampRequests:n.timestampRequests||this.timestampRequests,timestampParam:n.timestampParam||this.timestampParam,policyPort:n.policyPort||this.policyPort,pfx:n.pfx||this.pfx,key:n.key||this.key,passphrase:n.passphrase||this.passphrase,cert:n.cert||this.cert,ca:n.ca||this.ca,ciphers:n.ciphers||this.ciphers,rejectUnauthorized:n.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:n.perMessageDeflate||this.perMessageDeflate,extraHeaders:n.extraHeaders||this.extraHeaders,forceNode:n.forceNode||this.forceNode,localAddress:n.localAddress||this.localAddress,requestTimeout:n.requestTimeout||this.requestTimeout,protocols:n.protocols||void 0});return r},r.prototype.open=function(){var t;if(this.rememberUpgrade&&r.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)t="websocket";else{if(0===this.transports.length){var e=this;return void setTimeout(function(){e.emit("error","No transports available")},0)}t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(n){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)},r.prototype.setTransport=function(t){a("setting transport %s",t.name);var e=this;this.transport&&(a("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=t,t.on("drain",function(){e.onDrain()}).on("packet",function(t){e.onPacket(t)}).on("error",function(t){e.onError(t)}).on("close",function(){e.onClose("transport close")})},r.prototype.probe=function(t){function e(){if(f.onlyBinaryUpgrades){var e=!this.supportsBinary&&f.transport.supportsBinary;h=h||e}h||(a('probe transport "%s" opened',t),u.send([{type:"ping",data:"probe"}]),u.once("packet",function(e){if(!h)if("pong"===e.type&&"probe"===e.data){if(a('probe transport "%s" pong',t),f.upgrading=!0,f.emit("upgrading",u),!u)return;r.priorWebsocketSuccess="websocket"===u.name,a('pausing current transport "%s"',f.transport.name),f.transport.pause(function(){h||"closed"!==f.readyState&&(a("changing transport and sending upgrade packet"),p(),f.setTransport(u),u.send([{type:"upgrade"}]),f.emit("upgrade",u),u=null,f.upgrading=!1,f.flush())})}else{a('probe transport "%s" failed',t);var n=new Error("probe error");n.transport=u.name,f.emit("upgradeError",n)}}))}function n(){h||(h=!0,p(),u.close(),u=null)}function o(e){var r=new Error("probe error: "+e);r.transport=u.name,n(),a('probe transport "%s" failed because of error: %s',t,e),f.emit("upgradeError",r)}function i(){o("transport closed")}function s(){o("socket closed")}function c(t){u&&t.name!==u.name&&(a('"%s" works - aborting "%s"',t.name,u.name),n())}function p(){u.removeListener("open",e),u.removeListener("error",o),u.removeListener("close",i),f.removeListener("close",s),f.removeListener("upgrading",c)}a('probing transport "%s"',t);var u=this.createTransport(t,{probe:1}),h=!1,f=this;r.priorWebsocketSuccess=!1,u.once("open",e),u.once("error",o),u.once("close",i),this.once("close",s),this.once("upgrading",c),u.open()},r.prototype.onOpen=function(){if(a("socket open"),this.readyState="open",r.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){a("starting upgrade probes");for(var t=0,e=this.upgrades.length;t<e;t++)this.probe(this.upgrades[t])}},r.prototype.onPacket=function(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(a('socket receive: type "%s", data "%s"',t.type,t.data),this.emit("packet",t),this.emit("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emit("data",t.data),this.emit("message",t.data)}else a('packet received with socket readyState "%s"',this.readyState)},r.prototype.onHandshake=function(t){this.emit("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},r.prototype.onHeartbeat=function(t){clearTimeout(this.pingTimeoutTimer);var e=this;e.pingTimeoutTimer=setTimeout(function(){"closed"!==e.readyState&&e.onClose("ping timeout")},t||e.pingInterval+e.pingTimeout)},r.prototype.setPing=function(){var t=this;clearTimeout(t.pingIntervalTimer),t.pingIntervalTimer=setTimeout(function(){a("writing ping packet - expecting pong within %sms",t.pingTimeout),t.ping(),t.onHeartbeat(t.pingTimeout)},t.pingInterval)},r.prototype.ping=function(){var t=this;this.sendPacket("ping",function(){t.emit("ping")})},r.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},r.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(a("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},r.prototype.write=r.prototype.send=function(t,e,n){return this.sendPacket("message",t,e,n),this},r.prototype.sendPacket=function(t,e,n,r){if("function"==typeof e&&(r=e,e=void 0),"function"==typeof n&&(r=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){n=n||{},n.compress=!1!==n.compress;var o={type:t,data:e,options:n};this.emit("packetCreate",o),this.writeBuffer.push(o),r&&this.once("flush",r),this.flush()}},r.prototype.close=function(){function t(){r.onClose("forced close"),a("socket closing - telling transport to close"),r.transport.close()}function e(){r.removeListener("upgrade",e),r.removeListener("upgradeError",e),t()}function n(){r.once("upgrade",e),r.once("upgradeError",e)}if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var r=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?n():t()}):this.upgrading?n():t()}return this},r.prototype.onError=function(t){a("socket error %j",t),r.priorWebsocketSuccess=!1,this.emit("error",t),this.onClose("transport error",t)},r.prototype.onClose=function(t,e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){a('socket close with reason: "%s"',t);var n=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",t,e),n.writeBuffer=[],n.prevBufferLen=0}},r.prototype.filterUpgrades=function(t){for(var e=[],n=0,r=t.length;n<r;n++)~c(this.transports,t[n])&&e.push(t[n]);return e}}).call(e,function(){return this}())},function(t,e,n){(function(t){function r(e){var n,r=!1,a=!1,c=!1!==e.jsonp;if(t.location){var p="https:"===location.protocol,u=location.port;u||(u=p?443:80),r=e.hostname!==location.hostname||u!==e.port,a=e.secure!==p}if(e.xdomain=r,e.xscheme=a,n=new o(e),"open"in n&&!e.forceJSONP)return new i(e);if(!c)throw new Error("JSONP disabled");return new s(e)}var o=n(17),i=n(19),s=n(33),a=n(34);e.polling=r,e.websocket=a}).call(e,function(){return this}())},function(t,e,n){(function(e){var r=n(18);t.exports=function(t){var n=t.xdomain,o=t.xscheme,i=t.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!n||r))return new XMLHttpRequest}catch(s){}try{if("undefined"!=typeof XDomainRequest&&!o&&i)return new XDomainRequest}catch(s){}if(!n)try{return new(e[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP");
}catch(s){}}}).call(e,function(){return this}())},function(t,e){try{t.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(n){t.exports=!1}},function(t,e,n){(function(e){function r(){}function o(t){if(c.call(this,t),this.requestTimeout=t.requestTimeout,this.extraHeaders=t.extraHeaders,e.location){var n="https:"===location.protocol,r=location.port;r||(r=n?443:80),this.xd=t.hostname!==e.location.hostname||r!==t.port,this.xs=t.secure!==n}}function i(t){this.method=t.method||"GET",this.uri=t.uri,this.xd=!!t.xd,this.xs=!!t.xs,this.async=!1!==t.async,this.data=void 0!==t.data?t.data:null,this.agent=t.agent,this.isBinary=t.isBinary,this.supportsBinary=t.supportsBinary,this.enablesXDR=t.enablesXDR,this.requestTimeout=t.requestTimeout,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.extraHeaders=t.extraHeaders,this.create()}function s(){for(var t in i.requests)i.requests.hasOwnProperty(t)&&i.requests[t].abort()}var a=n(17),c=n(20),p=n(8),u=n(31),h=n(3)("engine.io-client:polling-xhr");t.exports=o,t.exports.Request=i,u(o,c),o.prototype.supportsBinary=!0,o.prototype.request=function(t){return t=t||{},t.uri=this.uri(),t.xd=this.xd,t.xs=this.xs,t.agent=this.agent||!1,t.supportsBinary=this.supportsBinary,t.enablesXDR=this.enablesXDR,t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,t.requestTimeout=this.requestTimeout,t.extraHeaders=this.extraHeaders,new i(t)},o.prototype.doWrite=function(t,e){var n="string"!=typeof t&&void 0!==t,r=this.request({method:"POST",data:t,isBinary:n}),o=this;r.on("success",e),r.on("error",function(t){o.onError("xhr post error",t)}),this.sendXhr=r},o.prototype.doPoll=function(){h("xhr poll");var t=this.request(),e=this;t.on("data",function(t){e.onData(t)}),t.on("error",function(t){e.onError("xhr poll error",t)}),this.pollXhr=t},p(i.prototype),i.prototype.create=function(){var t={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized;var n=this.xhr=new a(t),r=this;try{h("xhr open %s: %s",this.method,this.uri),n.open(this.method,this.uri,this.async);try{if(this.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(var o in this.extraHeaders)this.extraHeaders.hasOwnProperty(o)&&n.setRequestHeader(o,this.extraHeaders[o])}}catch(s){}if("POST"===this.method)try{this.isBinary?n.setRequestHeader("Content-type","application/octet-stream"):n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(s){}try{n.setRequestHeader("Accept","*/*")}catch(s){}"withCredentials"in n&&(n.withCredentials=!0),this.requestTimeout&&(n.timeout=this.requestTimeout),this.hasXDR()?(n.onload=function(){r.onLoad()},n.onerror=function(){r.onError(n.responseText)}):n.onreadystatechange=function(){if(2===n.readyState){var t;try{t=n.getResponseHeader("Content-Type")}catch(e){}"application/octet-stream"===t&&(n.responseType="arraybuffer")}4===n.readyState&&(200===n.status||1223===n.status?r.onLoad():setTimeout(function(){r.onError(n.status)},0))},h("xhr data %s",this.data),n.send(this.data)}catch(s){return void setTimeout(function(){r.onError(s)},0)}e.document&&(this.index=i.requestsCount++,i.requests[this.index]=this)},i.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},i.prototype.onData=function(t){this.emit("data",t),this.onSuccess()},i.prototype.onError=function(t){this.emit("error",t),this.cleanup(!0)},i.prototype.cleanup=function(t){if("undefined"!=typeof this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=r:this.xhr.onreadystatechange=r,t)try{this.xhr.abort()}catch(n){}e.document&&delete i.requests[this.index],this.xhr=null}},i.prototype.onLoad=function(){var t;try{var e;try{e=this.xhr.getResponseHeader("Content-Type")}catch(n){}t="application/octet-stream"===e?this.xhr.response||this.xhr.responseText:this.xhr.responseText}catch(n){this.onError(n)}null!=t&&this.onData(t)},i.prototype.hasXDR=function(){return"undefined"!=typeof e.XDomainRequest&&!this.xs&&this.enablesXDR},i.prototype.abort=function(){this.cleanup()},i.requestsCount=0,i.requests={},e.document&&(e.attachEvent?e.attachEvent("onunload",s):e.addEventListener&&e.addEventListener("beforeunload",s,!1))}).call(e,function(){return this}())},function(t,e,n){function r(t){var e=t&&t.forceBase64;u&&!e||(this.supportsBinary=!1),o.call(this,t)}var o=n(21),i=n(30),s=n(22),a=n(31),c=n(32),p=n(3)("engine.io-client:polling");t.exports=r;var u=function(){var t=n(17),e=new t({xdomain:!1});return null!=e.responseType}();a(r,o),r.prototype.name="polling",r.prototype.doOpen=function(){this.poll()},r.prototype.pause=function(t){function e(){p("paused"),n.readyState="paused",t()}var n=this;if(this.readyState="pausing",this.polling||!this.writable){var r=0;this.polling&&(p("we are currently polling - waiting to pause"),r++,this.once("pollComplete",function(){p("pre-pause polling complete"),--r||e()})),this.writable||(p("we are currently writing - waiting to pause"),r++,this.once("drain",function(){p("pre-pause writing complete"),--r||e()}))}else e()},r.prototype.poll=function(){p("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},r.prototype.onData=function(t){var e=this;p("polling got data %s",t);var n=function(t,n,r){return"opening"===e.readyState&&e.onOpen(),"close"===t.type?(e.onClose(),!1):void e.onPacket(t)};s.decodePayload(t,this.socket.binaryType,n),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():p('ignoring poll - transport state "%s"',this.readyState))},r.prototype.doClose=function(){function t(){p("writing close packet"),e.write([{type:"close"}])}var e=this;"open"===this.readyState?(p("transport open - closing"),t()):(p("transport not open - deferring close"),this.once("open",t))},r.prototype.write=function(t){var e=this;this.writable=!1;var n=function(){e.writable=!0,e.emit("drain")};s.encodePayload(t,this.supportsBinary,function(t){e.doWrite(t,n)})},r.prototype.uri=function(){var t=this.query||{},e=this.secure?"https":"http",n="";!1!==this.timestampRequests&&(t[this.timestampParam]=c()),this.supportsBinary||t.sid||(t.b64=1),t=i.encode(t),this.port&&("https"===e&&443!==Number(this.port)||"http"===e&&80!==Number(this.port))&&(n=":"+this.port),t.length&&(t="?"+t);var r=this.hostname.indexOf(":")!==-1;return e+"://"+(r?"["+this.hostname+"]":this.hostname)+n+this.path+t}},function(t,e,n){function r(t){this.path=t.path,this.hostname=t.hostname,this.port=t.port,this.secure=t.secure,this.query=t.query,this.timestampParam=t.timestampParam,this.timestampRequests=t.timestampRequests,this.readyState="",this.agent=t.agent||!1,this.socket=t.socket,this.enablesXDR=t.enablesXDR,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.forceNode=t.forceNode,this.extraHeaders=t.extraHeaders,this.localAddress=t.localAddress}var o=n(22),i=n(8);t.exports=r,i(r.prototype),r.prototype.onError=function(t,e){var n=new Error(t);return n.type="TransportError",n.description=e,this.emit("error",n),this},r.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},r.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},r.prototype.send=function(t){if("open"!==this.readyState)throw new Error("Transport not open");this.write(t)},r.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},r.prototype.onData=function(t){var e=o.decodePacket(t,this.socket.binaryType);this.onPacket(e)},r.prototype.onPacket=function(t){this.emit("packet",t)},r.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},function(t,e,n){(function(t){function r(t,n){var r="b"+e.packets[t.type]+t.data.data;return n(r)}function o(t,n,r){if(!n)return e.encodeBase64Packet(t,r);var o=t.data,i=new Uint8Array(o),s=new Uint8Array(1+o.byteLength);s[0]=v[t.type];for(var a=0;a<i.length;a++)s[a+1]=i[a];return r(s.buffer)}function i(t,n,r){if(!n)return e.encodeBase64Packet(t,r);var o=new FileReader;return o.onload=function(){t.data=o.result,e.encodePacket(t,n,!0,r)},o.readAsArrayBuffer(t.data)}function s(t,n,r){if(!n)return e.encodeBase64Packet(t,r);if(g)return i(t,n,r);var o=new Uint8Array(1);o[0]=v[t.type];var s=new k([o.buffer,t.data]);return r(s)}function a(t){try{t=d.decode(t,{strict:!1})}catch(e){return!1}return t}function c(t,e,n){for(var r=new Array(t.length),o=l(t.length,n),i=function(t,n,o){e(n,function(e,n){r[t]=n,o(e,r)})},s=0;s<t.length;s++)i(s,t[s],o)}var p,u=n(23),h=n(9),f=n(24),l=n(25),d=n(26);t&&t.ArrayBuffer&&(p=n(28));var y="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),m="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),g=y||m;e.protocol=3;var v=e.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},b=u(v),w={type:"error",data:"parser error"},k=n(29);e.encodePacket=function(e,n,i,a){"function"==typeof n&&(a=n,n=!1),"function"==typeof i&&(a=i,i=null);var c=void 0===e.data?void 0:e.data.buffer||e.data;if(t.ArrayBuffer&&c instanceof ArrayBuffer)return o(e,n,a);if(k&&c instanceof t.Blob)return s(e,n,a);if(c&&c.base64)return r(e,a);var p=v[e.type];return void 0!==e.data&&(p+=i?d.encode(String(e.data),{strict:!1}):String(e.data)),a(""+p)},e.encodeBase64Packet=function(n,r){var o="b"+e.packets[n.type];if(k&&n.data instanceof t.Blob){var i=new FileReader;return i.onload=function(){var t=i.result.split(",")[1];r(o+t)},i.readAsDataURL(n.data)}var s;try{s=String.fromCharCode.apply(null,new Uint8Array(n.data))}catch(a){for(var c=new Uint8Array(n.data),p=new Array(c.length),u=0;u<c.length;u++)p[u]=c[u];s=String.fromCharCode.apply(null,p)}return o+=t.btoa(s),r(o)},e.decodePacket=function(t,n,r){if(void 0===t)return w;if("string"==typeof t){if("b"===t.charAt(0))return e.decodeBase64Packet(t.substr(1),n);if(r&&(t=a(t),t===!1))return w;var o=t.charAt(0);return Number(o)==o&&b[o]?t.length>1?{type:b[o],data:t.substring(1)}:{type:b[o]}:w}var i=new Uint8Array(t),o=i[0],s=f(t,1);return k&&"blob"===n&&(s=new k([s])),{type:b[o],data:s}},e.decodeBase64Packet=function(t,e){var n=b[t.charAt(0)];if(!p)return{type:n,data:{base64:!0,data:t.substr(1)}};var r=p.decode(t.substr(1));return"blob"===e&&k&&(r=new k([r])),{type:n,data:r}},e.encodePayload=function(t,n,r){function o(t){return t.length+":"+t}function i(t,r){e.encodePacket(t,!!s&&n,!1,function(t){r(null,o(t))})}"function"==typeof n&&(r=n,n=null);var s=h(t);return n&&s?k&&!g?e.encodePayloadAsBlob(t,r):e.encodePayloadAsArrayBuffer(t,r):t.length?void c(t,i,function(t,e){return r(e.join(""))}):r("0:")},e.decodePayload=function(t,n,r){if("string"!=typeof t)return e.decodePayloadAsBinary(t,n,r);"function"==typeof n&&(r=n,n=null);var o;if(""===t)return r(w,0,1);for(var i,s,a="",c=0,p=t.length;c<p;c++){var u=t.charAt(c);if(":"===u){if(""===a||a!=(i=Number(a)))return r(w,0,1);if(s=t.substr(c+1,i),a!=s.length)return r(w,0,1);if(s.length){if(o=e.decodePacket(s,n,!1),w.type===o.type&&w.data===o.data)return r(w,0,1);var h=r(o,c+i,p);if(!1===h)return}c+=i,a=""}else a+=u}return""!==a?r(w,0,1):void 0},e.encodePayloadAsArrayBuffer=function(t,n){function r(t,n){e.encodePacket(t,!0,!0,function(t){return n(null,t)})}return t.length?void c(t,r,function(t,e){var r=e.reduce(function(t,e){var n;return n="string"==typeof e?e.length:e.byteLength,t+n.toString().length+n+2},0),o=new Uint8Array(r),i=0;return e.forEach(function(t){var e="string"==typeof t,n=t;if(e){for(var r=new Uint8Array(t.length),s=0;s<t.length;s++)r[s]=t.charCodeAt(s);n=r.buffer}e?o[i++]=0:o[i++]=1;for(var a=n.byteLength.toString(),s=0;s<a.length;s++)o[i++]=parseInt(a[s]);o[i++]=255;for(var r=new Uint8Array(n),s=0;s<r.length;s++)o[i++]=r[s]}),n(o.buffer)}):n(new ArrayBuffer(0))},e.encodePayloadAsBlob=function(t,n){function r(t,n){e.encodePacket(t,!0,!0,function(t){var e=new Uint8Array(1);if(e[0]=1,"string"==typeof t){for(var r=new Uint8Array(t.length),o=0;o<t.length;o++)r[o]=t.charCodeAt(o);t=r.buffer,e[0]=0}for(var i=t instanceof ArrayBuffer?t.byteLength:t.size,s=i.toString(),a=new Uint8Array(s.length+1),o=0;o<s.length;o++)a[o]=parseInt(s[o]);if(a[s.length]=255,k){var c=new k([e.buffer,a.buffer,t]);n(null,c)}})}c(t,r,function(t,e){return n(new k(e))})},e.decodePayloadAsBinary=function(t,n,r){"function"==typeof n&&(r=n,n=null);for(var o=t,i=[];o.byteLength>0;){for(var s=new Uint8Array(o),a=0===s[0],c="",p=1;255!==s[p];p++){if(c.length>310)return r(w,0,1);c+=s[p]}o=f(o,2+c.length),c=parseInt(c);var u=f(o,0,c);if(a)try{u=String.fromCharCode.apply(null,new Uint8Array(u))}catch(h){var l=new Uint8Array(u);u="";for(var p=0;p<l.length;p++)u+=String.fromCharCode(l[p])}i.push(u),o=f(o,c)}var d=i.length;i.forEach(function(t,o){r(e.decodePacket(t,n,!0),o,d)})}}).call(e,function(){return this}())},function(t,e){t.exports=Object.keys||function(t){var e=[],n=Object.prototype.hasOwnProperty;for(var r in t)n.call(t,r)&&e.push(r);return e}},function(t,e){t.exports=function(t,e,n){var r=t.byteLength;if(e=e||0,n=n||r,t.slice)return t.slice(e,n);if(e<0&&(e+=r),n<0&&(n+=r),n>r&&(n=r),e>=r||e>=n||0===r)return new ArrayBuffer(0);for(var o=new Uint8Array(t),i=new Uint8Array(n-e),s=e,a=0;s<n;s++,a++)i[a]=o[s];return i.buffer}},function(t,e){function n(t,e,n){function o(t,r){if(o.count<=0)throw new Error("after called too many times");--o.count,t?(i=!0,e(t),e=n):0!==o.count||i||e(null,r)}var i=!1;return n=n||r,o.count=t,0===t?e():o}function r(){}t.exports=n},function(t,e,n){var r;(function(t,o){!function(i){function s(t){for(var e,n,r=[],o=0,i=t.length;o<i;)e=t.charCodeAt(o++),e>=55296&&e<=56319&&o<i?(n=t.charCodeAt(o++),56320==(64512&n)?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),o--)):r.push(e);return r}function a(t){for(var e,n=t.length,r=-1,o="";++r<n;)e=t[r],e>65535&&(e-=65536,o+=w(e>>>10&1023|55296),e=56320|1023&e),o+=w(e);return o}function c(t,e){if(t>=55296&&t<=57343){if(e)throw Error("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function p(t,e){return w(t>>e&63|128)}function u(t,e){if(0==(4294967168&t))return w(t);var n="";return 0==(4294965248&t)?n=w(t>>6&31|192):0==(4294901760&t)?(c(t,e)||(t=65533),n=w(t>>12&15|224),n+=p(t,6)):0==(4292870144&t)&&(n=w(t>>18&7|240),n+=p(t,12),n+=p(t,6)),n+=w(63&t|128)}function h(t,e){e=e||{};for(var n,r=!1!==e.strict,o=s(t),i=o.length,a=-1,c="";++a<i;)n=o[a],c+=u(n,r);return c}function f(){if(b>=v)throw Error("Invalid byte index");var t=255&g[b];if(b++,128==(192&t))return 63&t;throw Error("Invalid continuation byte")}function l(t){var e,n,r,o,i;if(b>v)throw Error("Invalid byte index");if(b==v)return!1;if(e=255&g[b],b++,0==(128&e))return e;if(192==(224&e)){if(n=f(),i=(31&e)<<6|n,i>=128)return i;throw Error("Invalid continuation byte")}if(224==(240&e)){if(n=f(),r=f(),i=(15&e)<<12|n<<6|r,i>=2048)return c(i,t)?i:65533;throw Error("Invalid continuation byte")}if(240==(248&e)&&(n=f(),r=f(),o=f(),i=(7&e)<<18|n<<12|r<<6|o,i>=65536&&i<=1114111))return i;throw Error("Invalid UTF-8 detected")}function d(t,e){e=e||{};var n=!1!==e.strict;g=s(t),v=g.length,b=0;for(var r,o=[];(r=l(n))!==!1;)o.push(r);return a(o)}var y="object"==typeof e&&e,m=("object"==typeof t&&t&&t.exports==y&&t,"object"==typeof o&&o);m.global!==m&&m.window!==m||(i=m);var g,v,b,w=String.fromCharCode,k={version:"2.1.2",encode:h,decode:d};r=function(){return k}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))}(this)}).call(e,n(27)(t),function(){return this}())},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e){!function(){"use strict";for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=new Uint8Array(256),r=0;r<t.length;r++)n[t.charCodeAt(r)]=r;e.encode=function(e){var n,r=new Uint8Array(e),o=r.length,i="";for(n=0;n<o;n+=3)i+=t[r[n]>>2],i+=t[(3&r[n])<<4|r[n+1]>>4],i+=t[(15&r[n+1])<<2|r[n+2]>>6],i+=t[63&r[n+2]];return o%3===2?i=i.substring(0,i.length-1)+"=":o%3===1&&(i=i.substring(0,i.length-2)+"=="),i},e.decode=function(t){var e,r,o,i,s,a=.75*t.length,c=t.length,p=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var u=new ArrayBuffer(a),h=new Uint8Array(u);for(e=0;e<c;e+=4)r=n[t.charCodeAt(e)],o=n[t.charCodeAt(e+1)],i=n[t.charCodeAt(e+2)],s=n[t.charCodeAt(e+3)],h[p++]=r<<2|o>>4,h[p++]=(15&o)<<4|i>>2,h[p++]=(3&i)<<6|63&s;return u}}()},function(t,e){(function(e){function n(t){for(var e=0;e<t.length;e++){var n=t[e];if(n.buffer instanceof ArrayBuffer){var r=n.buffer;if(n.byteLength!==r.byteLength){var o=new Uint8Array(n.byteLength);o.set(new Uint8Array(r,n.byteOffset,n.byteLength)),r=o.buffer}t[e]=r}}}function r(t,e){e=e||{};var r=new i;n(t);for(var o=0;o<t.length;o++)r.append(t[o]);return e.type?r.getBlob(e.type):r.getBlob()}function o(t,e){return n(t),new Blob(t,e||{})}var i=e.BlobBuilder||e.WebKitBlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder,s=function(){try{var t=new Blob(["hi"]);return 2===t.size}catch(e){return!1}}(),a=s&&function(){try{var t=new Blob([new Uint8Array([1,2])]);return 2===t.size}catch(e){return!1}}(),c=i&&i.prototype.append&&i.prototype.getBlob;t.exports=function(){return s?a?e.Blob:o:c?r:void 0}()}).call(e,function(){return this}())},function(t,e){e.encode=function(t){var e="";for(var n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e},e.decode=function(t){for(var e={},n=t.split("&"),r=0,o=n.length;r<o;r++){var i=n[r].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e}},function(t,e){t.exports=function(t,e){var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e){"use strict";function n(t){var e="";do e=s[t%a]+e,t=Math.floor(t/a);while(t>0);return e}function r(t){var e=0;for(u=0;u<t.length;u++)e=e*a+c[t.charAt(u)];return e}function o(){var t=n(+new Date);return t!==i?(p=0,i=t):t+"."+n(p++)}for(var i,s="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),a=64,c={},p=0,u=0;u<a;u++)c[s[u]]=u;o.encode=n,o.decode=r,t.exports=o},function(t,e,n){(function(e){function r(){}function o(t){i.call(this,t),this.query=this.query||{},a||(e.___eio||(e.___eio=[]),a=e.___eio),this.index=a.length;var n=this;a.push(function(t){n.onData(t)}),this.query.j=this.index,e.document&&e.addEventListener&&e.addEventListener("beforeunload",function(){n.script&&(n.script.onerror=r)},!1)}var i=n(20),s=n(31);t.exports=o;var a,c=/\n/g,p=/\\n/g;s(o,i),o.prototype.supportsBinary=!1,o.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),i.prototype.doClose.call(this)},o.prototype.doPoll=function(){var t=this,e=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),e.async=!0,e.src=this.uri(),e.onerror=function(e){t.onError("jsonp poll error",e)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(e,n):(document.head||document.body).appendChild(e),this.script=e;var r="undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent);r&&setTimeout(function(){var t=document.createElement("iframe");document.body.appendChild(t),document.body.removeChild(t)},100)},o.prototype.doWrite=function(t,e){function n(){r(),e()}function r(){if(o.iframe)try{o.form.removeChild(o.iframe)}catch(t){o.onError("jsonp polling iframe removal error",t)}try{var e='<iframe src="javascript:0" name="'+o.iframeId+'">';i=document.createElement(e)}catch(t){i=document.createElement("iframe"),i.name=o.iframeId,i.src="javascript:0"}i.id=o.iframeId,o.form.appendChild(i),o.iframe=i}var o=this;if(!this.form){var i,s=document.createElement("form"),a=document.createElement("textarea"),u=this.iframeId="eio_iframe_"+this.index;s.className="socketio",s.style.position="absolute",s.style.top="-1000px",s.style.left="-1000px",s.target=u,s.method="POST",s.setAttribute("accept-charset","utf-8"),a.name="d",s.appendChild(a),document.body.appendChild(s),this.form=s,this.area=a}this.form.action=this.uri(),r(),t=t.replace(p,"\\\n"),this.area.value=t.replace(c,"\\n");try{this.form.submit()}catch(h){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===o.iframe.readyState&&n()}:this.iframe.onload=n}}).call(e,function(){return this}())},function(t,e,n){(function(e){function r(t){var e=t&&t.forceBase64;e&&(this.supportsBinary=!1),this.perMessageDeflate=t.perMessageDeflate,this.usingBrowserWebSocket=h&&!t.forceNode,this.protocols=t.protocols,this.usingBrowserWebSocket||(l=o),i.call(this,t)}var o,i=n(21),s=n(22),a=n(30),c=n(31),p=n(32),u=n(3)("engine.io-client:websocket"),h=e.WebSocket||e.MozWebSocket;if("undefined"==typeof window)try{o=n(35)}catch(f){}var l=h;l||"undefined"!=typeof window||(l=o),t.exports=r,c(r,i),r.prototype.name="websocket",r.prototype.supportsBinary=!0,r.prototype.doOpen=function(){if(this.check()){var t=this.uri(),e=this.protocols,n={agent:this.agent,perMessageDeflate:this.perMessageDeflate};n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(n.headers=this.extraHeaders),this.localAddress&&(n.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket?e?new l(t,e):new l(t):new l(t,e,n)}catch(r){return this.emit("error",r)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},r.prototype.addEventListeners=function(){var t=this;this.ws.onopen=function(){t.onOpen()},this.ws.onclose=function(){t.onClose()},this.ws.onmessage=function(e){t.onData(e.data)},this.ws.onerror=function(e){t.onError("websocket error",e)}},r.prototype.write=function(t){function n(){r.emit("flush"),setTimeout(function(){r.writable=!0,r.emit("drain")},0)}var r=this;this.writable=!1;for(var o=t.length,i=0,a=o;i<a;i++)!function(t){s.encodePacket(t,r.supportsBinary,function(i){if(!r.usingBrowserWebSocket){var s={};if(t.options&&(s.compress=t.options.compress),r.perMessageDeflate){var a="string"==typeof i?e.Buffer.byteLength(i):i.length;a<r.perMessageDeflate.threshold&&(s.compress=!1)}}try{r.usingBrowserWebSocket?r.ws.send(i):r.ws.send(i,s)}catch(c){u("websocket closed before onclose event")}--o||n()})}(t[i])},r.prototype.onClose=function(){i.prototype.onClose.call(this)},r.prototype.doClose=function(){"undefined"!=typeof this.ws&&this.ws.close()},r.prototype.uri=function(){var t=this.query||{},e=this.secure?"wss":"ws",n="";this.port&&("wss"===e&&443!==Number(this.port)||"ws"===e&&80!==Number(this.port))&&(n=":"+this.port),this.timestampRequests&&(t[this.timestampParam]=p()),this.supportsBinary||(t.b64=1),t=a.encode(t),t.length&&(t="?"+t);var r=this.hostname.indexOf(":")!==-1;return e+"://"+(r?"["+this.hostname+"]":this.hostname)+n+this.path+t},r.prototype.check=function(){return!(!l||"__initialize"in l&&this.name===r.prototype.name)}}).call(e,function(){return this}())},function(t,e){},function(t,e){var n=[].indexOf;t.exports=function(t,e){if(n)return t.indexOf(e);for(var r=0;r<t.length;++r)if(t[r]===e)return r;return-1}},function(t,e,n){"use strict";function r(t,e,n){this.io=t,this.nsp=e,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,n&&n.query&&(this.query=n.query),this.io.autoConnect&&this.open()}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=n(7),s=n(8),a=n(38),c=n(39),p=n(40),u=n(3)("socket.io-client:socket"),h=n(30);t.exports=e=r;var f={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},l=s.prototype.emit;s(r.prototype),r.prototype.subEvents=function(){if(!this.subs){var t=this.io;this.subs=[c(t,"open",p(this,"onopen")),c(t,"packet",p(this,"onpacket")),c(t,"close",p(this,"onclose"))]}},r.prototype.open=r.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting"),this)},r.prototype.send=function(){var t=a(arguments);return t.unshift("message"),this.emit.apply(this,t),this},r.prototype.emit=function(t){if(f.hasOwnProperty(t))return l.apply(this,arguments),this;var e=a(arguments),n={type:i.EVENT,data:e};return n.options={},n.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof e[e.length-1]&&(u("emitting packet with ack id %d",this.ids),this.acks[this.ids]=e.pop(),n.id=this.ids++),this.connected?this.packet(n):this.sendBuffer.push(n),delete this.flags,this},r.prototype.packet=function(t){t.nsp=this.nsp,this.io.packet(t)},r.prototype.onopen=function(){if(u("transport is open - connecting"),"/"!==this.nsp)if(this.query){var t="object"===o(this.query)?h.encode(this.query):this.query;u("sending connect packet with query %s",t),this.packet({type:i.CONNECT,query:t})}else this.packet({type:i.CONNECT})},r.prototype.onclose=function(t){u("close (%s)",t),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",t)},r.prototype.onpacket=function(t){if(t.nsp===this.nsp)switch(t.type){case i.CONNECT:this.onconnect();break;case i.EVENT:this.onevent(t);break;case i.BINARY_EVENT:this.onevent(t);break;case i.ACK:this.onack(t);break;case i.BINARY_ACK:this.onack(t);break;case i.DISCONNECT:this.ondisconnect();break;case i.ERROR:this.emit("error",t.data)}},r.prototype.onevent=function(t){var e=t.data||[];u("emitting event %j",e),null!=t.id&&(u("attaching ack callback to event"),e.push(this.ack(t.id))),this.connected?l.apply(this,e):this.receiveBuffer.push(e)},r.prototype.ack=function(t){var e=this,n=!1;return function(){if(!n){n=!0;var r=a(arguments);u("sending ack %j",r),e.packet({type:i.ACK,id:t,data:r})}}},r.prototype.onack=function(t){var e=this.acks[t.id];"function"==typeof e?(u("calling ack %s with %j",t.id,t.data),e.apply(this,t.data),delete this.acks[t.id]):u("bad ack %s",t.id)},r.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},r.prototype.emitBuffered=function(){var t;for(t=0;t<this.receiveBuffer.length;t++)l.apply(this,this.receiveBuffer[t]);for(this.receiveBuffer=[],t=0;t<this.sendBuffer.length;t++)this.packet(this.sendBuffer[t]);this.sendBuffer=[]},r.prototype.ondisconnect=function(){u("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},r.prototype.destroy=function(){if(this.subs){for(var t=0;t<this.subs.length;t++)this.subs[t].destroy();this.subs=null}this.io.destroy(this)},r.prototype.close=r.prototype.disconnect=function(){return this.connected&&(u("performing disconnect (%s)",this.nsp),this.packet({type:i.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},r.prototype.compress=function(t){return this.flags=this.flags||{},this.flags.compress=t,this}},function(t,e){function n(t,e){var n=[];e=e||0;for(var r=e||0;r<t.length;r++)n[r-e]=t[r];return n}t.exports=n},function(t,e){"use strict";function n(t,e,n){return t.on(e,n),{destroy:function(){t.removeListener(e,n)}}}t.exports=n},function(t,e){var n=[].slice;t.exports=function(t,e){if("string"==typeof e&&(e=t[e]),"function"!=typeof e)throw new Error("bind() requires a function");var r=n.call(arguments,2);return function(){return e.apply(t,r.concat(n.call(arguments)))}}},function(t,e){function n(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}t.exports=n,n.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-n:t+n}return 0|Math.min(t,this.max)},n.prototype.reset=function(){this.attempts=0},n.prototype.setMin=function(t){this.ms=t},n.prototype.setMax=function(t){this.max=t},n.prototype.setJitter=function(t){this.jitter=t}}])});

},{}],5:[function(require,module,exports){
'use strict';

var events = {
  NEW_MESSAGE: '[client emits] new message',
  SEND_MESSAGE: '[server emits] send message',
  SEND_USERNAMES: '[server emit] usernames',
  NEW_USER: '[client emits] new user',
  DISCONNECT: 'disconnect'
};

module.exports = events;

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJhcHAvanMvYXBwLmpzIiwiYXBwL2pzL21vZHVsZXMvY2hhdC5qcyIsImFwcC9qcy9tb2R1bGVzL2h3LmpzIiwibm9kZV9tb2R1bGVzL3NvY2tldC5pby1jbGllbnQvZGlzdC9zb2NrZXQuaW8uanMiLCJzZXJ2ZXIvZXZlbnRzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7QUNBQTs7QUFDQTs7QUFFQSxRQUFRLEdBQVI7O0FBRUEsT0FBTyxDQUFQLEdBQVcsU0FBUyxhQUFULENBQXVCLElBQXZCLENBQTRCLFFBQTVCLENBQVg7O0FBRUEsSUFBTSxVQUFVO0FBQ2QsWUFBVSxFQUFFLE9BQUYsQ0FESTtBQUVkLFlBQVUsRUFBRSxZQUFGLENBRkk7QUFHZCxTQUFPLEVBQUUsYUFBRixDQUhPO0FBSWQsZUFBYSxFQUFFLGVBQUYsQ0FKQztBQUtkLGNBQVksRUFBRSxjQUFGLENBTEU7QUFNZCxpQkFBZSxFQUFFLGtCQUFGLENBTkQ7QUFPZCxZQUFVLEVBQUUsV0FBRixDQVBJO0FBUWQsU0FBTyxFQUFFLFFBQUY7QUFSTyxDQUFoQjs7QUFXQSxJQUFNLFdBQVcsc0JBQWdCLE9BQWhCLENBQWpCOzs7Ozs7Ozs7Ozs7QUNsQkE7Ozs7QUFDQTs7Ozs7Ozs7QUFFQSxJQUFNLFVBQVUsNEJBQWhCOztJQUVhLFcsV0FBQSxXO0FBRVgsdUJBQVksT0FBWixFQUFvQjtBQUFBOztBQUNsQixTQUFLLEtBQUwsR0FBYSxRQUFRLEtBQXJCO0FBQ0EsU0FBSyxVQUFMLEdBQWtCLFFBQVEsVUFBMUI7QUFDQSxTQUFLLFdBQUwsR0FBbUIsUUFBUSxXQUEzQjtBQUNBLFNBQUssUUFBTCxHQUFnQixRQUFRLFFBQXhCO0FBQ0EsU0FBSyxRQUFMLEdBQWdCLFFBQVEsUUFBeEI7QUFDQSxTQUFLLGFBQUwsR0FBcUIsUUFBUSxhQUE3QjtBQUNBLFNBQUssUUFBTCxHQUFnQixRQUFRLFFBQXhCO0FBQ0EsU0FBSyxLQUFMLEdBQWEsUUFBUSxLQUFyQjs7QUFFQSxTQUFLLGdCQUFMOztBQUVBO0FBQ0EsU0FBSyxNQUFMLEdBQWMsaUJBQUcsT0FBSCxDQUFXLHVCQUFYLENBQWQ7O0FBRUE7QUFDQTtBQUNBOztBQUVBLFNBQUssTUFBTDtBQUNEOztBQUdEOzs7Ozs7Ozs7K0JBS1csSSxFQUFNO0FBQUE7O0FBQ2YsVUFBSSxNQUFNLElBQUksY0FBSixFQUFWO0FBQ0EsVUFBSSxJQUFKLENBQVMsS0FBVCxFQUFnQixLQUFLLEdBQXJCLEVBQTBCLElBQTFCO0FBQ0EsVUFBSSxZQUFKLEdBQW1CLE1BQW5CO0FBQ0EsVUFBSSxNQUFKLEdBQWEsVUFBQyxDQUFELEVBQU87QUFDbEIsWUFBSSxNQUFNLE9BQU8sR0FBUCxDQUFXLGVBQVgsQ0FBMkIsSUFBSSxRQUEvQixDQUFWO0FBQ0EsWUFBSSxhQUFhLFNBQVMsYUFBVCxDQUF1QixjQUF2QixDQUFqQjtBQUNBLG1CQUFXLGtCQUFYLENBQThCLFdBQTlCLEVBQTJDLE1BQUssV0FBTCxDQUFpQixJQUFqQixFQUF1QixHQUF2QixDQUEzQzs7QUFFQTtBQUNBLG1CQUFXLFNBQVgsR0FBdUIsTUFBSyxVQUFMLENBQWdCLFlBQXZDO0FBQ0QsT0FQRDs7QUFTQSxVQUFJLElBQUo7QUFDRDs7QUFFRDs7Ozs7Ozs7NkJBS1MsSyxFQUFPO0FBQUE7O0FBQ2QsWUFBTSxPQUFOLENBQWMsVUFBQyxJQUFELEVBQVU7QUFDdEIsZUFBSyxXQUFMLENBQWlCLGtCQUFqQixDQUFvQyxXQUFwQyxFQUFpRCxPQUFLLFlBQUwsQ0FBa0IsSUFBbEIsQ0FBakQ7QUFDRCxPQUZEO0FBR0Q7O0FBR0Q7Ozs7Ozs7K0JBSVc7QUFDVCxRQUFFLFlBQUYsRUFBZ0IsS0FBaEIsQ0FBc0IsT0FBdEIsR0FBZ0MsTUFBaEM7QUFDQSxRQUFFLE9BQUYsRUFBVyxLQUFYLENBQWlCLE9BQWpCLEdBQTJCLE1BQTNCO0FBQ0Q7O0FBR0Q7Ozs7Ozs7cUNBSWlCO0FBQUE7O0FBQ2Y7QUFDQSxhQUFPLE1BQVMsT0FBVCxtQkFDTixJQURNLENBQ0QsVUFBQyxJQUFEO0FBQUEsZUFBVSxLQUFLLElBQUwsRUFBVjtBQUFBLE9BREMsRUFFTixJQUZNLENBRUQsVUFBQyxJQUFELEVBQVU7QUFDZCxlQUFLLGdCQUFMLEdBQXdCLEtBQUssT0FBTCxDQUFhLENBQWIsRUFBZ0IsT0FBaEIsQ0FBd0IsS0FBaEQ7QUFDQSxZQUFJLE1BQU0sSUFBSSxjQUFKLEVBQVY7QUFDQSxZQUFJLElBQUosQ0FBUyxLQUFULEVBQWdCLEtBQUssT0FBTCxDQUFhLENBQWIsRUFBZ0IsT0FBaEIsQ0FBd0IsS0FBeEMsRUFBK0MsSUFBL0M7QUFDQSxZQUFJLFlBQUosR0FBbUIsTUFBbkI7QUFDQSxZQUFJLE1BQUosR0FBYSxVQUFTLENBQVQsRUFBWTtBQUN2QixtQkFBUyxhQUFULENBQXVCLGtCQUF2QixFQUEyQyxHQUEzQyxHQUFpRCxPQUFPLEdBQVAsQ0FBVyxlQUFYLENBQTJCLEtBQUssUUFBaEMsQ0FBakQ7QUFDRCxTQUZEOztBQUlBLFlBQUksSUFBSjtBQUNELE9BWk0sQ0FBUDtBQWFEOztBQUVEOzs7Ozs7O2dDQUlZLEksRUFBTSxHLEVBQUs7QUFDckIsd0ZBRTBDLEdBRjFDLHFFQUlVLEtBQUssUUFKZiw2QkFJK0MsS0FBSyxJQUpwRCwrQkFLTSxLQUFLLEdBTFg7QUFTRDs7QUFHRDs7Ozs7OztpQ0FJYSxJLEVBQU07QUFDakIsOEZBR1ksSUFIWjtBQU9EOztBQUdEOzs7Ozs7OzJDQUl1QjtBQUFBOztBQUNyQixXQUFLLE1BQUwsQ0FBWSxFQUFaLENBQWUsaUJBQU8sV0FBdEIsRUFBbUMsVUFBQyxJQUFELEVBQVU7QUFDM0MsZUFBSyxVQUFMLENBQWdCLElBQWhCO0FBQ0QsT0FGRDs7QUFJQSxXQUFLLE1BQUwsQ0FBWSxFQUFaLENBQWUsaUJBQU8sY0FBdEIsRUFBc0MsVUFBQyxTQUFELEVBQWU7QUFDbkQsZUFBSyxRQUFMLENBQWMsU0FBZDtBQUNELE9BRkQ7QUFHRDs7QUFJRDs7Ozs7OzswQ0FJc0I7QUFBQTs7QUFFcEI7QUFDQSxXQUFLLFFBQUwsQ0FBYyxnQkFBZCxDQUErQixRQUEvQixFQUF5QyxVQUFDLENBQUQsRUFBTTtBQUM3QyxVQUFFLGNBQUY7O0FBRUE7QUFDQSxlQUFLLE1BQUwsQ0FBWSxJQUFaLENBQWlCLGlCQUFPLFFBQXhCLEVBQWtDLE9BQUssUUFBTCxDQUFjLEtBQWhELEVBQXVELFVBQUMsTUFBRCxFQUFZO0FBQ2pFLGlCQUFLLEtBQUwsQ0FBVyxLQUFYLENBQWlCLE9BQWpCLEdBQTJCLE1BQTNCO0FBQ0EsY0FBRyxNQUFILEVBQVU7QUFDUixtQkFBSyxRQUFMO0FBQ0QsV0FGRCxNQUVPO0FBQ0wsbUJBQUssS0FBTCxDQUFXLFNBQVgsR0FBdUIsZ0NBQXZCO0FBQ0EsbUJBQUssS0FBTCxDQUFXLEtBQVgsQ0FBaUIsT0FBakIsR0FBMkIsT0FBM0I7QUFDRDtBQUNGLFNBUkQ7QUFTRCxPQWJEOztBQWdCQTtBQUNBLFdBQUssUUFBTCxDQUFjLGdCQUFkLENBQStCLFFBQS9CLEVBQXlDLFVBQUMsQ0FBRCxFQUFNO0FBQzdDLFVBQUUsY0FBRjs7QUFFQSxlQUFLLE1BQUwsQ0FBWSxJQUFaLENBQWlCLGlCQUFPLFlBQXhCLEVBQXNDO0FBQ3BDLGVBQUssT0FBSyxLQUFMLENBQVcsS0FEb0I7QUFFcEMsZUFBSyxPQUFLO0FBRjBCLFNBQXRDOztBQUtBLGVBQUssS0FBTCxDQUFXLEtBQVgsR0FBbUIsRUFBbkI7QUFDRCxPQVREO0FBVUQ7O0FBR0Q7Ozs7Ozs7NkJBSVM7QUFDUDtBQUNBLFdBQUssb0JBQUw7O0FBRUE7QUFDQSxXQUFLLG1CQUFMOztBQUVBO0FBQ0EsV0FBSyxjQUFMO0FBQ0Q7Ozs7Ozs7Ozs7OztBQ2hNSSxJQUFNLG9DQUFjLGNBQXBCOzs7QUNBUDtBQUNBO0FBQ0E7Ozs7QUNGQSxJQUFNLFNBQVM7QUFDYixlQUFjLDRCQUREO0FBRWIsZ0JBQWUsNkJBRkY7QUFHYixrQkFBZ0IseUJBSEg7QUFJYixZQUFVLHlCQUpHO0FBS2IsY0FBYTtBQUxBLENBQWY7O0FBUUEsT0FBTyxPQUFQLEdBQWlCLE1BQWpCIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsImltcG9ydCB7IEhFTExPX1dPUkxEIH0gZnJvbSAnLi9tb2R1bGVzL2h3JztcbmltcG9ydCB7IENoYXRTZXJ2aWNlIH0gZnJvbSAnLi9tb2R1bGVzL2NoYXQnO1xuXG5jb25zb2xlLmxvZyhgSnVzdCB3YW50IHRvIHNheSwgJHtIRUxMT19XT1JMRH1gKTtcblxud2luZG93LiQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yLmJpbmQoZG9jdW1lbnQpO1xuXG5jb25zdCBvcHRpb25zID0ge1xuICBqb2luRm9ybTogJCgnI2pvaW4nKSxcbiAgY2hhdEZvcm06ICQoJyNjaGF0LWZvcm0nKSxcbiAgaW5wdXQ6ICQoJyNjaGF0LWlucHV0JyksXG4gIHVzZXJzT3V0bGV0OiAkKCcjdXNlcnMtb3V0bGV0JyksXG4gIGNoYXRPdXRsZXQ6ICQoJyNjaGF0LW91dGxldCcpLFxuICByYW5kb21Vc2VySW1nOiAkKCcjcmFuZG9tLXVzZXItaW1nJyksXG4gIHVzZXJuYW1lOiAkKCcjdXNlcm5hbWUnKSxcbiAgZXJyb3I6ICQoJyNlcnJvcicpXG59XG5cbmNvbnN0IERvam9DaGF0ID0gbmV3IENoYXRTZXJ2aWNlKG9wdGlvbnMpO1xuXG4iLCJpbXBvcnQgaW8gZnJvbSAnLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3NvY2tldC5pby1jbGllbnQvZGlzdC9zb2NrZXQuaW8nO1xuaW1wb3J0IEVWRU5UUyBmcm9tICcuLi8uLi8uLi9zZXJ2ZXIvZXZlbnRzJztcblxuY29uc3QgQVBJX1VSTCA9ICdodHRwczovL3JhbmRvbXVzZXIubWUvYXBpLyc7XG5cbmV4cG9ydCBjbGFzcyBDaGF0U2VydmljZSB7XG5cbiAgY29uc3RydWN0b3Iob3B0aW9ucyl7XG4gICAgdGhpcy5pbnB1dCA9IG9wdGlvbnMuaW5wdXQ7XG4gICAgdGhpcy5jaGF0T3V0bGV0ID0gb3B0aW9ucy5jaGF0T3V0bGV0O1xuICAgIHRoaXMudXNlcnNPdXRsZXQgPSBvcHRpb25zLnVzZXJzT3V0bGV0O1xuICAgIHRoaXMuY2hhdEZvcm0gPSBvcHRpb25zLmNoYXRGb3JtO1xuICAgIHRoaXMuam9pbkZvcm0gPSBvcHRpb25zLmpvaW5Gb3JtO1xuICAgIHRoaXMucmFuZG9tVXNlckltZyA9IG9wdGlvbnMucmFuZG9tVXNlckltZztcbiAgICB0aGlzLnVzZXJuYW1lID0gb3B0aW9ucy51c2VybmFtZTtcbiAgICB0aGlzLmVycm9yID0gb3B0aW9ucy5lcnJvcjtcblxuICAgIHRoaXMucmFuZG9tVXNlckltZ1VybDtcblxuICAgIC8qKiBVbi1jb21tZW50IGlmIHJ1bm5pbmcgYXMgYSBzdGFuZGFsb25lIHNlcnZpY2UgKi9cbiAgICB0aGlzLnNvY2tldCA9IGlvLmNvbm5lY3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6OTAwMCcpO1xuICAgIFxuICAgIC8qKiBTVEFSVCBmb3IgRXhwcmVzcyBTZXJ2ZXIgKi9cbiAgICAvLyB0aGlzLnNvY2tldCA9IGlvKCk7XG4gICAgLyoqIEVORCBmb3IgRXhwcmVzcyBTZXJ2ZXIgKi9cblxuICAgIHRoaXMub25Jbml0KCk7XG4gIH1cblxuICBcbiAgLyoqXG4gICAqIGFkZE1lc3NhZ2VcbiAgICogQWRkcyBjaGF0IG1lc3NhZ2UgdG8gY2hhdCBvdXRsZXRcbiAgICogQHBhcmFtIHt7bXNnOnN0cmluZyxpbWc6c3RyaW5nLHRpbWU6c3RyaW5nLHVzZXJuYW1lOnN0cmluZ319IGRhdGE6IFxuICAgKi9cbiAgYWRkTWVzc2FnZShkYXRhKSB7XG4gICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgIHhoci5vcGVuKCdHRVQnLCBkYXRhLmltZywgdHJ1ZSk7XG4gICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdibG9iJztcbiAgICB4aHIub25sb2FkID0gKGUpID0+IHtcbiAgICAgIGxldCBpbWcgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTCh4aHIucmVzcG9uc2UpO1xuICAgICAgbGV0IGNoYXRXaW5kb3cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2hhdC1vdXRsZXQnKTtcbiAgICAgIGNoYXRXaW5kb3cuaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCB0aGlzLm1zZ1RlbXBsYXRlKGRhdGEsIGltZykpO1xuICAgIFxuICAgICAgLy8gc2Nyb2xsIHRvIGJvdHRvbSBvZiBjaGF0IHdpbmRvd1xuICAgICAgY2hhdFdpbmRvdy5zY3JvbGxUb3AgPSB0aGlzLmNoYXRPdXRsZXQuc2Nyb2xsSGVpZ2h0O1xuICAgIH07XG5cbiAgICB4aHIuc2VuZCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIGFkZFVzZXJzXG4gICAqIEFkZHMgdXNlcnMgdG8gYWN0aXZlIHVzZXJzIG91dGxldFxuICAgKiBAcGFyYW0ge1tdfSB1c2VycyBcbiAgICovXG4gIGFkZFVzZXJzKHVzZXJzKSB7XG4gICAgdXNlcnMuZm9yRWFjaCgodXNlcikgPT4ge1xuICAgICAgdGhpcy51c2Vyc091dGxldC5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsIHRoaXMudXNlclRlbXBsYXRlKHVzZXIpKTtcbiAgICB9KTtcbiAgfVxuXG5cbiAgLyoqXG4gICAqIHNob3dDaGF0XG4gICAqIHNob3cgY2hhdCBhcmVhIGFuZCBoaWdoIGpvaW4gZm9ybVxuICAgKi9cbiAgc2hvd0NoYXQoKSB7XG4gICAgJCgnI2pvaW4tY2hhdCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgJCgnI2NoYXQnKS5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuICB9XG5cblxuICAvKipcbiAgICogc2V0UmFuZG9tSW1hZ2VcbiAgICogRmV0Y2hlcyByYW5kb20gaW1hZ2UgZm9yIHVzZXJcbiAgICovXG4gIHNldFJhbmRvbUltYWdlKCkgeyAgICBcbiAgICAvLyBUT0RPOiBjaG9vc2UgZ2VuZGVyIGAmZ2VuZGVyPTxtYWxlfGZlbWFsZT5gXG4gICAgcmV0dXJuIGZldGNoKGAke0FQSV9VUkx9P2luYz1waWN0dXJlYClcbiAgICAudGhlbigocmVzcCkgPT4gcmVzcC5qc29uKCkpXG4gICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgIHRoaXMucmFuZG9tVXNlckltZ1VybCA9IGRhdGEucmVzdWx0c1swXS5waWN0dXJlLmxhcmdlO1xuICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgeGhyLm9wZW4oJ0dFVCcsIGRhdGEucmVzdWx0c1swXS5waWN0dXJlLmxhcmdlLCB0cnVlKTtcbiAgICAgIHhoci5yZXNwb25zZVR5cGUgPSAnYmxvYic7XG4gICAgICB4aHIub25sb2FkID0gZnVuY3Rpb24oZSkge1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcmFuZG9tLXVzZXItaW1nJykuc3JjID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwodGhpcy5yZXNwb25zZSk7XG4gICAgICB9O1xuXG4gICAgICB4aHIuc2VuZCgpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIG1zZ1RlbXBsYXRlXG4gICAqIEBwYXJhbSB7e2ltZzpzdHJpbmcsdXNlcm5hbWU6c3RyaW5nLHRpbWU6c3RyaW5nLG1zZzpzdHJpbmd9fSBkYXRhIFxuICAgKi9cbiAgbXNnVGVtcGxhdGUoZGF0YSwgaW1nKSB7XG4gICAgcmV0dXJuIGBcbiAgICA8bGkgY2xhc3M9XCJtZWRpYVwiPlxuICAgICAgPGltZyBjbGFzcz1cIm1yLTMgcm91bmRlZC1jaXJjbGVcIiBzcmM9XCIke2ltZ31cIiBhbHQ9XCJQZXJzb25cIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJtZWRpYS1ib2R5XCI+XG4gICAgICAgIDxoNj4ke2RhdGEudXNlcm5hbWV9IDxzbWFsbCBjbGFzcz1cInRpbWVcIj4ke2RhdGEudGltZX08L3NtYWxsPjwvaDY+XG4gICAgICAgICR7ZGF0YS5tc2d9XG4gICAgICA8L2Rpdj5cbiAgICA8L2xpPlxuICAgIGA7XG4gIH1cblxuXG4gIC8qKlxuICAgKiB1c2VyVGVtcGxhdGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IHVzZXIgXG4gICAqL1xuICB1c2VyVGVtcGxhdGUodXNlcikge1xuICAgIHJldHVybiBgXG4gICAgICA8bGkgY2xhc3M9XCJtZWRpYVwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwibWVkaWEtYm9keVwiPlxuICAgICAgICAgIDxoNj4ke3VzZXJ9PC9oNj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2xpPlxuICAgIGA7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBzb2NrZXRFdmVudExpc3RlbmVyc1xuICAgKiBMaXN0ZW5zIGZvciBlbWl0dGVkIGV2ZW50cyBmcm9tIHNlcnZlciAoc29ja2V0KVxuICAgKi9cbiAgc29ja2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5zb2NrZXQub24oRVZFTlRTLk5FV19NRVNTQUdFLCAoZGF0YSkgPT4ge1xuICAgICAgdGhpcy5hZGRNZXNzYWdlKGRhdGEpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5zb2NrZXQub24oRVZFTlRTLlNFTkRfVVNFUk5BTUVTLCAodXNlcm5hbWVzKSA9PiB7XG4gICAgICB0aGlzLmFkZFVzZXJzKHVzZXJuYW1lcyk7XG4gICAgfSk7XG4gIH1cblxuXG5cbiAgLyoqXG4gICAqIHNvY2tldEV2ZW50RW1pdHRlcnNcbiAgICogRW1pdHMgZXZlbnRzIHRvIHNlcnZlciAoc29ja2V0KVxuICAgKi9cbiAgc29ja2V0RXZlbnRFbWl0dGVycygpIHtcblxuICAgIC8vIHN1Ym1pdHRpbmcgam9pbiBmb3JtXG4gICAgdGhpcy5qb2luRm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZSk9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgIC8vIHdpdGggYWNrbm93bGVkZ2VtZW50IGNhbGxiYWNrXG4gICAgICB0aGlzLnNvY2tldC5lbWl0KEVWRU5UUy5ORVdfVVNFUiwgdGhpcy51c2VybmFtZS52YWx1ZSwgKGNiRGF0YSkgPT4ge1xuICAgICAgICB0aGlzLmVycm9yLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIGlmKGNiRGF0YSl7XG4gICAgICAgICAgdGhpcy5zaG93Q2hhdCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuZXJyb3IuaW5uZXJIVE1MID0gJ1VzZXJuYW1lIGFscmVhZHkgdGFrZS4uLiBzb3d3eSc7XG4gICAgICAgICAgdGhpcy5lcnJvci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG5cblxuICAgIC8vIHN1Ym1pdHRpbmcgY2hhdCBmb3JtXG4gICAgdGhpcy5jaGF0Rm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZSk9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBcbiAgICAgIHRoaXMuc29ja2V0LmVtaXQoRVZFTlRTLlNFTkRfTUVTU0FHRSwge1xuICAgICAgICBtc2c6IHRoaXMuaW5wdXQudmFsdWUsXG4gICAgICAgIGltZzogdGhpcy5yYW5kb21Vc2VySW1nVXJsXG4gICAgICB9KTtcblxuICAgICAgdGhpcy5pbnB1dC52YWx1ZSA9ICcnO1xuICAgIH0pO1xuICB9XG5cblxuICAvKipcbiAgICogb25Jbml0XG4gICAqIEluaXRpYWxpemUgY2hhdCBzZXJ2aWNlXG4gICAqL1xuICBvbkluaXQoKSB7XG4gICAgLy8gZXZlbnRzIGZyb20gc2VydmVyXG4gICAgdGhpcy5zb2NrZXRFdmVudExpc3RlbmVycygpO1xuXG4gICAgLy8gZXZlbnRzIHRvIHNlcnZlclxuICAgIHRoaXMuc29ja2V0RXZlbnRFbWl0dGVycygpO1xuXG4gICAgLy8gc2V0IHJhbmRvbSBpbWFnZVxuICAgIHRoaXMuc2V0UmFuZG9tSW1hZ2UoKTtcbiAgfVxufSIsImV4cG9ydCBjb25zdCBIRUxMT19XT1JMRCA9ICdIZWxsbyBXb3JsZCEnOyIsIiFmdW5jdGlvbih0LGUpe1wib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzJiZcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlP21vZHVsZS5leHBvcnRzPWUoKTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtdLGUpOlwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP2V4cG9ydHMuaW89ZSgpOnQuaW89ZSgpfSh0aGlzLGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUocil7aWYobltyXSlyZXR1cm4gbltyXS5leHBvcnRzO3ZhciBvPW5bcl09e2V4cG9ydHM6e30saWQ6cixsb2FkZWQ6ITF9O3JldHVybiB0W3JdLmNhbGwoby5leHBvcnRzLG8sby5leHBvcnRzLGUpLG8ubG9hZGVkPSEwLG8uZXhwb3J0c312YXIgbj17fTtyZXR1cm4gZS5tPXQsZS5jPW4sZS5wPVwiXCIsZSgwKX0oW2Z1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiByKHQsZSl7XCJvYmplY3RcIj09PShcInVuZGVmaW5lZFwiPT10eXBlb2YgdD9cInVuZGVmaW5lZFwiOm8odCkpJiYoZT10LHQ9dm9pZCAwKSxlPWV8fHt9O3ZhciBuLHI9aSh0KSxzPXIuc291cmNlLHU9ci5pZCxoPXIucGF0aCxmPXBbdV0mJmggaW4gcFt1XS5uc3BzLGw9ZS5mb3JjZU5ld3x8ZVtcImZvcmNlIG5ldyBjb25uZWN0aW9uXCJdfHwhMT09PWUubXVsdGlwbGV4fHxmO3JldHVybiBsPyhjKFwiaWdub3Jpbmcgc29ja2V0IGNhY2hlIGZvciAlc1wiLHMpLG49YShzLGUpKToocFt1XXx8KGMoXCJuZXcgaW8gaW5zdGFuY2UgZm9yICVzXCIscykscFt1XT1hKHMsZSkpLG49cFt1XSksci5xdWVyeSYmIWUucXVlcnkmJihlLnF1ZXJ5PXIucXVlcnkpLG4uc29ja2V0KHIucGF0aCxlKX12YXIgbz1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJlwic3ltYm9sXCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24odCl7cmV0dXJuIHR5cGVvZiB0fTpmdW5jdGlvbih0KXtyZXR1cm4gdCYmXCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZ0LmNvbnN0cnVjdG9yPT09U3ltYm9sJiZ0IT09U3ltYm9sLnByb3RvdHlwZT9cInN5bWJvbFwiOnR5cGVvZiB0fSxpPW4oMSkscz1uKDcpLGE9bigxMyksYz1uKDMpKFwic29ja2V0LmlvLWNsaWVudFwiKTt0LmV4cG9ydHM9ZT1yO3ZhciBwPWUubWFuYWdlcnM9e307ZS5wcm90b2NvbD1zLnByb3RvY29sLGUuY29ubmVjdD1yLGUuTWFuYWdlcj1uKDEzKSxlLlNvY2tldD1uKDM3KX0sZnVuY3Rpb24odCxlLG4peyhmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiByKHQsbil7dmFyIHI9dDtuPW58fGUubG9jYXRpb24sbnVsbD09dCYmKHQ9bi5wcm90b2NvbCtcIi8vXCIrbi5ob3N0KSxcInN0cmluZ1wiPT10eXBlb2YgdCYmKFwiL1wiPT09dC5jaGFyQXQoMCkmJih0PVwiL1wiPT09dC5jaGFyQXQoMSk/bi5wcm90b2NvbCt0Om4uaG9zdCt0KSwvXihodHRwcz98d3NzPyk6XFwvXFwvLy50ZXN0KHQpfHwoaShcInByb3RvY29sLWxlc3MgdXJsICVzXCIsdCksdD1cInVuZGVmaW5lZFwiIT10eXBlb2Ygbj9uLnByb3RvY29sK1wiLy9cIit0OlwiaHR0cHM6Ly9cIit0KSxpKFwicGFyc2UgJXNcIix0KSxyPW8odCkpLHIucG9ydHx8KC9eKGh0dHB8d3MpJC8udGVzdChyLnByb3RvY29sKT9yLnBvcnQ9XCI4MFwiOi9eKGh0dHB8d3MpcyQvLnRlc3Qoci5wcm90b2NvbCkmJihyLnBvcnQ9XCI0NDNcIikpLHIucGF0aD1yLnBhdGh8fFwiL1wiO3ZhciBzPXIuaG9zdC5pbmRleE9mKFwiOlwiKSE9PS0xLGE9cz9cIltcIityLmhvc3QrXCJdXCI6ci5ob3N0O3JldHVybiByLmlkPXIucHJvdG9jb2wrXCI6Ly9cIithK1wiOlwiK3IucG9ydCxyLmhyZWY9ci5wcm90b2NvbCtcIjovL1wiK2ErKG4mJm4ucG9ydD09PXIucG9ydD9cIlwiOlwiOlwiK3IucG9ydCkscn12YXIgbz1uKDIpLGk9bigzKShcInNvY2tldC5pby1jbGllbnQ6dXJsXCIpO3QuZXhwb3J0cz1yfSkuY2FsbChlLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KCkpfSxmdW5jdGlvbih0LGUpe3ZhciBuPS9eKD86KD8hW146QF0rOlteOkBcXC9dKkApKGh0dHB8aHR0cHN8d3N8d3NzKTpcXC9cXC8pPygoPzooKFteOkBdKikoPzo6KFteOkBdKikpPyk/QCk/KCg/OlthLWYwLTldezAsNH06KXsyLDd9W2EtZjAtOV17MCw0fXxbXjpcXC8/I10qKSg/OjooXFxkKikpPykoKChcXC8oPzpbXj8jXSg/IVtePyNcXC9dKlxcLltePyNcXC8uXSsoPzpbPyNdfCQpKSkqXFwvPyk/KFtePyNcXC9dKikpKD86XFw/KFteI10qKSk/KD86IyguKikpPykvLHI9W1wic291cmNlXCIsXCJwcm90b2NvbFwiLFwiYXV0aG9yaXR5XCIsXCJ1c2VySW5mb1wiLFwidXNlclwiLFwicGFzc3dvcmRcIixcImhvc3RcIixcInBvcnRcIixcInJlbGF0aXZlXCIsXCJwYXRoXCIsXCJkaXJlY3RvcnlcIixcImZpbGVcIixcInF1ZXJ5XCIsXCJhbmNob3JcIl07dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3ZhciBlPXQsbz10LmluZGV4T2YoXCJbXCIpLGk9dC5pbmRleE9mKFwiXVwiKTtvIT0tMSYmaSE9LTEmJih0PXQuc3Vic3RyaW5nKDAsbykrdC5zdWJzdHJpbmcobyxpKS5yZXBsYWNlKC86L2csXCI7XCIpK3Quc3Vic3RyaW5nKGksdC5sZW5ndGgpKTtmb3IodmFyIHM9bi5leGVjKHR8fFwiXCIpLGE9e30sYz0xNDtjLS07KWFbcltjXV09c1tjXXx8XCJcIjtyZXR1cm4gbyE9LTEmJmkhPS0xJiYoYS5zb3VyY2U9ZSxhLmhvc3Q9YS5ob3N0LnN1YnN0cmluZygxLGEuaG9zdC5sZW5ndGgtMSkucmVwbGFjZSgvOy9nLFwiOlwiKSxhLmF1dGhvcml0eT1hLmF1dGhvcml0eS5yZXBsYWNlKFwiW1wiLFwiXCIpLnJlcGxhY2UoXCJdXCIsXCJcIikucmVwbGFjZSgvOy9nLFwiOlwiKSxhLmlwdjZ1cmk9ITApLGF9fSxmdW5jdGlvbih0LGUsbil7KGZ1bmN0aW9uKHIpe2Z1bmN0aW9uIG8oKXtyZXR1cm4hKFwidW5kZWZpbmVkXCI9PXR5cGVvZiB3aW5kb3d8fCF3aW5kb3cucHJvY2Vzc3x8XCJyZW5kZXJlclwiIT09d2luZG93LnByb2Nlc3MudHlwZSl8fChcInVuZGVmaW5lZFwiIT10eXBlb2YgZG9jdW1lbnQmJmRvY3VtZW50LmRvY3VtZW50RWxlbWVudCYmZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlJiZkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUuV2Via2l0QXBwZWFyYW5jZXx8XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdyYmd2luZG93LmNvbnNvbGUmJih3aW5kb3cuY29uc29sZS5maXJlYnVnfHx3aW5kb3cuY29uc29sZS5leGNlcHRpb24mJndpbmRvdy5jb25zb2xlLnRhYmxlKXx8XCJ1bmRlZmluZWRcIiE9dHlwZW9mIG5hdmlnYXRvciYmbmF2aWdhdG9yLnVzZXJBZ2VudCYmbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLm1hdGNoKC9maXJlZm94XFwvKFxcZCspLykmJnBhcnNlSW50KFJlZ0V4cC4kMSwxMCk+PTMxfHxcInVuZGVmaW5lZFwiIT10eXBlb2YgbmF2aWdhdG9yJiZuYXZpZ2F0b3IudXNlckFnZW50JiZuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkubWF0Y2goL2FwcGxld2Via2l0XFwvKFxcZCspLykpfWZ1bmN0aW9uIGkodCl7dmFyIG49dGhpcy51c2VDb2xvcnM7aWYodFswXT0obj9cIiVjXCI6XCJcIikrdGhpcy5uYW1lc3BhY2UrKG4/XCIgJWNcIjpcIiBcIikrdFswXSsobj9cIiVjIFwiOlwiIFwiKStcIitcIitlLmh1bWFuaXplKHRoaXMuZGlmZiksbil7dmFyIHI9XCJjb2xvcjogXCIrdGhpcy5jb2xvcjt0LnNwbGljZSgxLDAscixcImNvbG9yOiBpbmhlcml0XCIpO3ZhciBvPTAsaT0wO3RbMF0ucmVwbGFjZSgvJVthLXpBLVolXS9nLGZ1bmN0aW9uKHQpe1wiJSVcIiE9PXQmJihvKyssXCIlY1wiPT09dCYmKGk9bykpfSksdC5zcGxpY2UoaSwwLHIpfX1mdW5jdGlvbiBzKCl7cmV0dXJuXCJvYmplY3RcIj09dHlwZW9mIGNvbnNvbGUmJmNvbnNvbGUubG9nJiZGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHkuY2FsbChjb25zb2xlLmxvZyxjb25zb2xlLGFyZ3VtZW50cyl9ZnVuY3Rpb24gYSh0KXt0cnl7bnVsbD09dD9lLnN0b3JhZ2UucmVtb3ZlSXRlbShcImRlYnVnXCIpOmUuc3RvcmFnZS5kZWJ1Zz10fWNhdGNoKG4pe319ZnVuY3Rpb24gYygpe3ZhciB0O3RyeXt0PWUuc3RvcmFnZS5kZWJ1Z31jYXRjaChuKXt9cmV0dXJuIXQmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiByJiZcImVudlwiaW4gciYmKHQ9ci5lbnYuREVCVUcpLHR9ZnVuY3Rpb24gcCgpe3RyeXtyZXR1cm4gd2luZG93LmxvY2FsU3RvcmFnZX1jYXRjaCh0KXt9fWU9dC5leHBvcnRzPW4oNSksZS5sb2c9cyxlLmZvcm1hdEFyZ3M9aSxlLnNhdmU9YSxlLmxvYWQ9YyxlLnVzZUNvbG9ycz1vLGUuc3RvcmFnZT1cInVuZGVmaW5lZFwiIT10eXBlb2YgY2hyb21lJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgY2hyb21lLnN0b3JhZ2U/Y2hyb21lLnN0b3JhZ2UubG9jYWw6cCgpLGUuY29sb3JzPVtcImxpZ2h0c2VhZ3JlZW5cIixcImZvcmVzdGdyZWVuXCIsXCJnb2xkZW5yb2RcIixcImRvZGdlcmJsdWVcIixcImRhcmtvcmNoaWRcIixcImNyaW1zb25cIl0sZS5mb3JtYXR0ZXJzLmo9ZnVuY3Rpb24odCl7dHJ5e3JldHVybiBKU09OLnN0cmluZ2lmeSh0KX1jYXRjaChlKXtyZXR1cm5cIltVbmV4cGVjdGVkSlNPTlBhcnNlRXJyb3JdOiBcIitlLm1lc3NhZ2V9fSxlLmVuYWJsZShjKCkpfSkuY2FsbChlLG4oNCkpfSxmdW5jdGlvbih0LGUpe2Z1bmN0aW9uIG4oKXt0aHJvdyBuZXcgRXJyb3IoXCJzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkXCIpfWZ1bmN0aW9uIHIoKXt0aHJvdyBuZXcgRXJyb3IoXCJjbGVhclRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWRcIil9ZnVuY3Rpb24gbyh0KXtpZih1PT09c2V0VGltZW91dClyZXR1cm4gc2V0VGltZW91dCh0LDApO2lmKCh1PT09bnx8IXUpJiZzZXRUaW1lb3V0KXJldHVybiB1PXNldFRpbWVvdXQsc2V0VGltZW91dCh0LDApO3RyeXtyZXR1cm4gdSh0LDApfWNhdGNoKGUpe3RyeXtyZXR1cm4gdS5jYWxsKG51bGwsdCwwKX1jYXRjaChlKXtyZXR1cm4gdS5jYWxsKHRoaXMsdCwwKX19fWZ1bmN0aW9uIGkodCl7aWYoaD09PWNsZWFyVGltZW91dClyZXR1cm4gY2xlYXJUaW1lb3V0KHQpO2lmKChoPT09cnx8IWgpJiZjbGVhclRpbWVvdXQpcmV0dXJuIGg9Y2xlYXJUaW1lb3V0LGNsZWFyVGltZW91dCh0KTt0cnl7cmV0dXJuIGgodCl9Y2F0Y2goZSl7dHJ5e3JldHVybiBoLmNhbGwobnVsbCx0KX1jYXRjaChlKXtyZXR1cm4gaC5jYWxsKHRoaXMsdCl9fX1mdW5jdGlvbiBzKCl7eSYmbCYmKHk9ITEsbC5sZW5ndGg/ZD1sLmNvbmNhdChkKTptPS0xLGQubGVuZ3RoJiZhKCkpfWZ1bmN0aW9uIGEoKXtpZigheSl7dmFyIHQ9byhzKTt5PSEwO2Zvcih2YXIgZT1kLmxlbmd0aDtlOyl7Zm9yKGw9ZCxkPVtdOysrbTxlOylsJiZsW21dLnJ1bigpO209LTEsZT1kLmxlbmd0aH1sPW51bGwseT0hMSxpKHQpfX1mdW5jdGlvbiBjKHQsZSl7dGhpcy5mdW49dCx0aGlzLmFycmF5PWV9ZnVuY3Rpb24gcCgpe312YXIgdSxoLGY9dC5leHBvcnRzPXt9OyFmdW5jdGlvbigpe3RyeXt1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHNldFRpbWVvdXQ/c2V0VGltZW91dDpufWNhdGNoKHQpe3U9bn10cnl7aD1cImZ1bmN0aW9uXCI9PXR5cGVvZiBjbGVhclRpbWVvdXQ/Y2xlYXJUaW1lb3V0OnJ9Y2F0Y2godCl7aD1yfX0oKTt2YXIgbCxkPVtdLHk9ITEsbT0tMTtmLm5leHRUaWNrPWZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoLTEpO2lmKGFyZ3VtZW50cy5sZW5ndGg+MSlmb3IodmFyIG49MTtuPGFyZ3VtZW50cy5sZW5ndGg7bisrKWVbbi0xXT1hcmd1bWVudHNbbl07ZC5wdXNoKG5ldyBjKHQsZSkpLDEhPT1kLmxlbmd0aHx8eXx8byhhKX0sYy5wcm90b3R5cGUucnVuPWZ1bmN0aW9uKCl7dGhpcy5mdW4uYXBwbHkobnVsbCx0aGlzLmFycmF5KX0sZi50aXRsZT1cImJyb3dzZXJcIixmLmJyb3dzZXI9ITAsZi5lbnY9e30sZi5hcmd2PVtdLGYudmVyc2lvbj1cIlwiLGYudmVyc2lvbnM9e30sZi5vbj1wLGYuYWRkTGlzdGVuZXI9cCxmLm9uY2U9cCxmLm9mZj1wLGYucmVtb3ZlTGlzdGVuZXI9cCxmLnJlbW92ZUFsbExpc3RlbmVycz1wLGYuZW1pdD1wLGYucHJlcGVuZExpc3RlbmVyPXAsZi5wcmVwZW5kT25jZUxpc3RlbmVyPXAsZi5saXN0ZW5lcnM9ZnVuY3Rpb24odCl7cmV0dXJuW119LGYuYmluZGluZz1mdW5jdGlvbih0KXt0aHJvdyBuZXcgRXJyb3IoXCJwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZFwiKX0sZi5jd2Q9ZnVuY3Rpb24oKXtyZXR1cm5cIi9cIn0sZi5jaGRpcj1mdW5jdGlvbih0KXt0aHJvdyBuZXcgRXJyb3IoXCJwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWRcIil9LGYudW1hc2s9ZnVuY3Rpb24oKXtyZXR1cm4gMH19LGZ1bmN0aW9uKHQsZSxuKXtmdW5jdGlvbiByKHQpe3ZhciBuLHI9MDtmb3IobiBpbiB0KXI9KHI8PDUpLXIrdC5jaGFyQ29kZUF0KG4pLHJ8PTA7cmV0dXJuIGUuY29sb3JzW01hdGguYWJzKHIpJWUuY29sb3JzLmxlbmd0aF19ZnVuY3Rpb24gbyh0KXtmdW5jdGlvbiBuKCl7aWYobi5lbmFibGVkKXt2YXIgdD1uLHI9K25ldyBEYXRlLG89ci0ocHx8cik7dC5kaWZmPW8sdC5wcmV2PXAsdC5jdXJyPXIscD1yO2Zvcih2YXIgaT1uZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCkscz0wO3M8aS5sZW5ndGg7cysrKWlbc109YXJndW1lbnRzW3NdO2lbMF09ZS5jb2VyY2UoaVswXSksXCJzdHJpbmdcIiE9dHlwZW9mIGlbMF0mJmkudW5zaGlmdChcIiVPXCIpO3ZhciBhPTA7aVswXT1pWzBdLnJlcGxhY2UoLyUoW2EtekEtWiVdKS9nLGZ1bmN0aW9uKG4scil7aWYoXCIlJVwiPT09bilyZXR1cm4gbjthKys7dmFyIG89ZS5mb3JtYXR0ZXJzW3JdO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIG8pe3ZhciBzPWlbYV07bj1vLmNhbGwodCxzKSxpLnNwbGljZShhLDEpLGEtLX1yZXR1cm4gbn0pLGUuZm9ybWF0QXJncy5jYWxsKHQsaSk7dmFyIGM9bi5sb2d8fGUubG9nfHxjb25zb2xlLmxvZy5iaW5kKGNvbnNvbGUpO2MuYXBwbHkodCxpKX19cmV0dXJuIG4ubmFtZXNwYWNlPXQsbi5lbmFibGVkPWUuZW5hYmxlZCh0KSxuLnVzZUNvbG9ycz1lLnVzZUNvbG9ycygpLG4uY29sb3I9cih0KSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBlLmluaXQmJmUuaW5pdChuKSxufWZ1bmN0aW9uIGkodCl7ZS5zYXZlKHQpLGUubmFtZXM9W10sZS5za2lwcz1bXTtmb3IodmFyIG49KFwic3RyaW5nXCI9PXR5cGVvZiB0P3Q6XCJcIikuc3BsaXQoL1tcXHMsXSsvKSxyPW4ubGVuZ3RoLG89MDtvPHI7bysrKW5bb10mJih0PW5bb10ucmVwbGFjZSgvXFwqL2csXCIuKj9cIiksXCItXCI9PT10WzBdP2Uuc2tpcHMucHVzaChuZXcgUmVnRXhwKFwiXlwiK3Quc3Vic3RyKDEpK1wiJFwiKSk6ZS5uYW1lcy5wdXNoKG5ldyBSZWdFeHAoXCJeXCIrdCtcIiRcIikpKX1mdW5jdGlvbiBzKCl7ZS5lbmFibGUoXCJcIil9ZnVuY3Rpb24gYSh0KXt2YXIgbixyO2ZvcihuPTAscj1lLnNraXBzLmxlbmd0aDtuPHI7bisrKWlmKGUuc2tpcHNbbl0udGVzdCh0KSlyZXR1cm4hMTtmb3Iobj0wLHI9ZS5uYW1lcy5sZW5ndGg7bjxyO24rKylpZihlLm5hbWVzW25dLnRlc3QodCkpcmV0dXJuITA7cmV0dXJuITF9ZnVuY3Rpb24gYyh0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIEVycm9yP3Quc3RhY2t8fHQubWVzc2FnZTp0fWU9dC5leHBvcnRzPW8uZGVidWc9b1tcImRlZmF1bHRcIl09byxlLmNvZXJjZT1jLGUuZGlzYWJsZT1zLGUuZW5hYmxlPWksZS5lbmFibGVkPWEsZS5odW1hbml6ZT1uKDYpLGUubmFtZXM9W10sZS5za2lwcz1bXSxlLmZvcm1hdHRlcnM9e307dmFyIHB9LGZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gbih0KXtpZih0PVN0cmluZyh0KSwhKHQubGVuZ3RoPjEwMCkpe3ZhciBlPS9eKCg/OlxcZCspP1xcLj9cXGQrKSAqKG1pbGxpc2Vjb25kcz98bXNlY3M/fG1zfHNlY29uZHM/fHNlY3M/fHN8bWludXRlcz98bWlucz98bXxob3Vycz98aHJzP3xofGRheXM/fGR8eWVhcnM/fHlycz98eSk/JC9pLmV4ZWModCk7aWYoZSl7dmFyIG49cGFyc2VGbG9hdChlWzFdKSxyPShlWzJdfHxcIm1zXCIpLnRvTG93ZXJDYXNlKCk7c3dpdGNoKHIpe2Nhc2VcInllYXJzXCI6Y2FzZVwieWVhclwiOmNhc2VcInlyc1wiOmNhc2VcInlyXCI6Y2FzZVwieVwiOnJldHVybiBuKnU7Y2FzZVwiZGF5c1wiOmNhc2VcImRheVwiOmNhc2VcImRcIjpyZXR1cm4gbipwO2Nhc2VcImhvdXJzXCI6Y2FzZVwiaG91clwiOmNhc2VcImhyc1wiOmNhc2VcImhyXCI6Y2FzZVwiaFwiOnJldHVybiBuKmM7Y2FzZVwibWludXRlc1wiOmNhc2VcIm1pbnV0ZVwiOmNhc2VcIm1pbnNcIjpjYXNlXCJtaW5cIjpjYXNlXCJtXCI6cmV0dXJuIG4qYTtjYXNlXCJzZWNvbmRzXCI6Y2FzZVwic2Vjb25kXCI6Y2FzZVwic2Vjc1wiOmNhc2VcInNlY1wiOmNhc2VcInNcIjpyZXR1cm4gbipzO2Nhc2VcIm1pbGxpc2Vjb25kc1wiOmNhc2VcIm1pbGxpc2Vjb25kXCI6Y2FzZVwibXNlY3NcIjpjYXNlXCJtc2VjXCI6Y2FzZVwibXNcIjpyZXR1cm4gbjtkZWZhdWx0OnJldHVybn19fX1mdW5jdGlvbiByKHQpe3JldHVybiB0Pj1wP01hdGgucm91bmQodC9wKStcImRcIjp0Pj1jP01hdGgucm91bmQodC9jKStcImhcIjp0Pj1hP01hdGgucm91bmQodC9hKStcIm1cIjp0Pj1zP01hdGgucm91bmQodC9zKStcInNcIjp0K1wibXNcIn1mdW5jdGlvbiBvKHQpe3JldHVybiBpKHQscCxcImRheVwiKXx8aSh0LGMsXCJob3VyXCIpfHxpKHQsYSxcIm1pbnV0ZVwiKXx8aSh0LHMsXCJzZWNvbmRcIil8fHQrXCIgbXNcIn1mdW5jdGlvbiBpKHQsZSxuKXtpZighKHQ8ZSkpcmV0dXJuIHQ8MS41KmU/TWF0aC5mbG9vcih0L2UpK1wiIFwiK246TWF0aC5jZWlsKHQvZSkrXCIgXCIrbitcInNcIn12YXIgcz0xZTMsYT02MCpzLGM9NjAqYSxwPTI0KmMsdT0zNjUuMjUqcDt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlKXtlPWV8fHt9O3ZhciBpPXR5cGVvZiB0O2lmKFwic3RyaW5nXCI9PT1pJiZ0Lmxlbmd0aD4wKXJldHVybiBuKHQpO2lmKFwibnVtYmVyXCI9PT1pJiZpc05hTih0KT09PSExKXJldHVybiBlW1wibG9uZ1wiXT9vKHQpOnIodCk7dGhyb3cgbmV3IEVycm9yKFwidmFsIGlzIG5vdCBhIG5vbi1lbXB0eSBzdHJpbmcgb3IgYSB2YWxpZCBudW1iZXIuIHZhbD1cIitKU09OLnN0cmluZ2lmeSh0KSl9fSxmdW5jdGlvbih0LGUsbil7ZnVuY3Rpb24gcigpe31mdW5jdGlvbiBvKHQpe3ZhciBuPVwiXCIrdC50eXBlO3JldHVybiBlLkJJTkFSWV9FVkVOVCE9PXQudHlwZSYmZS5CSU5BUllfQUNLIT09dC50eXBlfHwobis9dC5hdHRhY2htZW50cytcIi1cIiksdC5uc3AmJlwiL1wiIT09dC5uc3AmJihuKz10Lm5zcCtcIixcIiksbnVsbCE9dC5pZCYmKG4rPXQuaWQpLG51bGwhPXQuZGF0YSYmKG4rPUpTT04uc3RyaW5naWZ5KHQuZGF0YSkpLGgoXCJlbmNvZGVkICVqIGFzICVzXCIsdCxuKSxufWZ1bmN0aW9uIGkodCxlKXtmdW5jdGlvbiBuKHQpe3ZhciBuPWQuZGVjb25zdHJ1Y3RQYWNrZXQodCkscj1vKG4ucGFja2V0KSxpPW4uYnVmZmVycztpLnVuc2hpZnQociksZShpKX1kLnJlbW92ZUJsb2JzKHQsbil9ZnVuY3Rpb24gcygpe3RoaXMucmVjb25zdHJ1Y3Rvcj1udWxsfWZ1bmN0aW9uIGEodCl7dmFyIG49MCxyPXt0eXBlOk51bWJlcih0LmNoYXJBdCgwKSl9O2lmKG51bGw9PWUudHlwZXNbci50eXBlXSlyZXR1cm4gdSgpO2lmKGUuQklOQVJZX0VWRU5UPT09ci50eXBlfHxlLkJJTkFSWV9BQ0s9PT1yLnR5cGUpe2Zvcih2YXIgbz1cIlwiO1wiLVwiIT09dC5jaGFyQXQoKytuKSYmKG8rPXQuY2hhckF0KG4pLG4hPXQubGVuZ3RoKTspO2lmKG8hPU51bWJlcihvKXx8XCItXCIhPT10LmNoYXJBdChuKSl0aHJvdyBuZXcgRXJyb3IoXCJJbGxlZ2FsIGF0dGFjaG1lbnRzXCIpO3IuYXR0YWNobWVudHM9TnVtYmVyKG8pfWlmKFwiL1wiPT09dC5jaGFyQXQobisxKSlmb3Ioci5uc3A9XCJcIjsrK247KXt2YXIgaT10LmNoYXJBdChuKTtpZihcIixcIj09PWkpYnJlYWs7aWYoci5uc3ArPWksbj09PXQubGVuZ3RoKWJyZWFrfWVsc2Ugci5uc3A9XCIvXCI7dmFyIHM9dC5jaGFyQXQobisxKTtpZihcIlwiIT09cyYmTnVtYmVyKHMpPT1zKXtmb3Ioci5pZD1cIlwiOysrbjspe3ZhciBpPXQuY2hhckF0KG4pO2lmKG51bGw9PWl8fE51bWJlcihpKSE9aSl7LS1uO2JyZWFrfWlmKHIuaWQrPXQuY2hhckF0KG4pLG49PT10Lmxlbmd0aClicmVha31yLmlkPU51bWJlcihyLmlkKX1yZXR1cm4gdC5jaGFyQXQoKytuKSYmKHI9YyhyLHQuc3Vic3RyKG4pKSksaChcImRlY29kZWQgJXMgYXMgJWpcIix0LHIpLHJ9ZnVuY3Rpb24gYyh0LGUpe3RyeXt0LmRhdGE9SlNPTi5wYXJzZShlKX1jYXRjaChuKXtyZXR1cm4gdSgpfXJldHVybiB0fWZ1bmN0aW9uIHAodCl7dGhpcy5yZWNvblBhY2s9dCx0aGlzLmJ1ZmZlcnM9W119ZnVuY3Rpb24gdSgpe3JldHVybnt0eXBlOmUuRVJST1IsZGF0YTpcInBhcnNlciBlcnJvclwifX12YXIgaD1uKDMpKFwic29ja2V0LmlvLXBhcnNlclwiKSxmPW4oOCksbD1uKDkpLGQ9bigxMSkseT1uKDEyKTtlLnByb3RvY29sPTQsZS50eXBlcz1bXCJDT05ORUNUXCIsXCJESVNDT05ORUNUXCIsXCJFVkVOVFwiLFwiQUNLXCIsXCJFUlJPUlwiLFwiQklOQVJZX0VWRU5UXCIsXCJCSU5BUllfQUNLXCJdLGUuQ09OTkVDVD0wLGUuRElTQ09OTkVDVD0xLGUuRVZFTlQ9MixlLkFDSz0zLGUuRVJST1I9NCxlLkJJTkFSWV9FVkVOVD01LGUuQklOQVJZX0FDSz02LGUuRW5jb2Rlcj1yLGUuRGVjb2Rlcj1zLHIucHJvdG90eXBlLmVuY29kZT1mdW5jdGlvbih0LG4pe2lmKHQudHlwZSE9PWUuRVZFTlQmJnQudHlwZSE9PWUuQUNLfHwhbCh0LmRhdGEpfHwodC50eXBlPXQudHlwZT09PWUuRVZFTlQ/ZS5CSU5BUllfRVZFTlQ6ZS5CSU5BUllfQUNLKSxoKFwiZW5jb2RpbmcgcGFja2V0ICVqXCIsdCksZS5CSU5BUllfRVZFTlQ9PT10LnR5cGV8fGUuQklOQVJZX0FDSz09PXQudHlwZSlpKHQsbik7ZWxzZXt2YXIgcj1vKHQpO24oW3JdKX19LGYocy5wcm90b3R5cGUpLHMucHJvdG90eXBlLmFkZD1mdW5jdGlvbih0KXt2YXIgbjtpZihcInN0cmluZ1wiPT10eXBlb2YgdCluPWEodCksZS5CSU5BUllfRVZFTlQ9PT1uLnR5cGV8fGUuQklOQVJZX0FDSz09PW4udHlwZT8odGhpcy5yZWNvbnN0cnVjdG9yPW5ldyBwKG4pLDA9PT10aGlzLnJlY29uc3RydWN0b3IucmVjb25QYWNrLmF0dGFjaG1lbnRzJiZ0aGlzLmVtaXQoXCJkZWNvZGVkXCIsbikpOnRoaXMuZW1pdChcImRlY29kZWRcIixuKTtlbHNle2lmKCF5KHQpJiYhdC5iYXNlNjQpdGhyb3cgbmV3IEVycm9yKFwiVW5rbm93biB0eXBlOiBcIit0KTtpZighdGhpcy5yZWNvbnN0cnVjdG9yKXRocm93IG5ldyBFcnJvcihcImdvdCBiaW5hcnkgZGF0YSB3aGVuIG5vdCByZWNvbnN0cnVjdGluZyBhIHBhY2tldFwiKTtuPXRoaXMucmVjb25zdHJ1Y3Rvci50YWtlQmluYXJ5RGF0YSh0KSxuJiYodGhpcy5yZWNvbnN0cnVjdG9yPW51bGwsdGhpcy5lbWl0KFwiZGVjb2RlZFwiLG4pKX19LHMucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt0aGlzLnJlY29uc3RydWN0b3ImJnRoaXMucmVjb25zdHJ1Y3Rvci5maW5pc2hlZFJlY29uc3RydWN0aW9uKCl9LHAucHJvdG90eXBlLnRha2VCaW5hcnlEYXRhPWZ1bmN0aW9uKHQpe2lmKHRoaXMuYnVmZmVycy5wdXNoKHQpLHRoaXMuYnVmZmVycy5sZW5ndGg9PT10aGlzLnJlY29uUGFjay5hdHRhY2htZW50cyl7dmFyIGU9ZC5yZWNvbnN0cnVjdFBhY2tldCh0aGlzLnJlY29uUGFjayx0aGlzLmJ1ZmZlcnMpO3JldHVybiB0aGlzLmZpbmlzaGVkUmVjb25zdHJ1Y3Rpb24oKSxlfXJldHVybiBudWxsfSxwLnByb3RvdHlwZS5maW5pc2hlZFJlY29uc3RydWN0aW9uPWZ1bmN0aW9uKCl7dGhpcy5yZWNvblBhY2s9bnVsbCx0aGlzLmJ1ZmZlcnM9W119fSxmdW5jdGlvbih0LGUsbil7ZnVuY3Rpb24gcih0KXtpZih0KXJldHVybiBvKHQpfWZ1bmN0aW9uIG8odCl7Zm9yKHZhciBlIGluIHIucHJvdG90eXBlKXRbZV09ci5wcm90b3R5cGVbZV07cmV0dXJuIHR9dC5leHBvcnRzPXIsci5wcm90b3R5cGUub249ci5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLl9jYWxsYmFja3M9dGhpcy5fY2FsbGJhY2tzfHx7fSwodGhpcy5fY2FsbGJhY2tzW1wiJFwiK3RdPXRoaXMuX2NhbGxiYWNrc1tcIiRcIit0XXx8W10pLnB1c2goZSksdGhpc30sci5wcm90b3R5cGUub25jZT1mdW5jdGlvbih0LGUpe2Z1bmN0aW9uIG4oKXt0aGlzLm9mZih0LG4pLGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfXJldHVybiBuLmZuPWUsdGhpcy5vbih0LG4pLHRoaXN9LHIucHJvdG90eXBlLm9mZj1yLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lcj1yLnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnM9ci5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbih0LGUpe2lmKHRoaXMuX2NhbGxiYWNrcz10aGlzLl9jYWxsYmFja3N8fHt9LDA9PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHRoaXMuX2NhbGxiYWNrcz17fSx0aGlzO3ZhciBuPXRoaXMuX2NhbGxiYWNrc1tcIiRcIit0XTtpZighbilyZXR1cm4gdGhpcztpZigxPT1hcmd1bWVudHMubGVuZ3RoKXJldHVybiBkZWxldGUgdGhpcy5fY2FsbGJhY2tzW1wiJFwiK3RdLHRoaXM7Zm9yKHZhciByLG89MDtvPG4ubGVuZ3RoO28rKylpZihyPW5bb10scj09PWV8fHIuZm49PT1lKXtuLnNwbGljZShvLDEpO2JyZWFrfXJldHVybiB0aGlzfSxyLnByb3RvdHlwZS5lbWl0PWZ1bmN0aW9uKHQpe3RoaXMuX2NhbGxiYWNrcz10aGlzLl9jYWxsYmFja3N8fHt9O3ZhciBlPVtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpLG49dGhpcy5fY2FsbGJhY2tzW1wiJFwiK3RdO2lmKG4pe249bi5zbGljZSgwKTtmb3IodmFyIHI9MCxvPW4ubGVuZ3RoO3I8bzsrK3IpbltyXS5hcHBseSh0aGlzLGUpfXJldHVybiB0aGlzfSxyLnByb3RvdHlwZS5saXN0ZW5lcnM9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2NhbGxiYWNrcz10aGlzLl9jYWxsYmFja3N8fHt9LHRoaXMuX2NhbGxiYWNrc1tcIiRcIit0XXx8W119LHIucHJvdG90eXBlLmhhc0xpc3RlbmVycz1mdW5jdGlvbih0KXtyZXR1cm4hIXRoaXMubGlzdGVuZXJzKHQpLmxlbmd0aH19LGZ1bmN0aW9uKHQsZSxuKXsoZnVuY3Rpb24oZSl7ZnVuY3Rpb24gcih0KXtpZighdHx8XCJvYmplY3RcIiE9dHlwZW9mIHQpcmV0dXJuITE7aWYobyh0KSl7Zm9yKHZhciBuPTAsaT10Lmxlbmd0aDtuPGk7bisrKWlmKHIodFtuXSkpcmV0dXJuITA7cmV0dXJuITF9aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgZS5CdWZmZXImJmUuQnVmZmVyLmlzQnVmZmVyJiZlLkJ1ZmZlci5pc0J1ZmZlcih0KXx8XCJmdW5jdGlvblwiPT10eXBlb2YgZS5BcnJheUJ1ZmZlciYmdCBpbnN0YW5jZW9mIEFycmF5QnVmZmVyfHxzJiZ0IGluc3RhbmNlb2YgQmxvYnx8YSYmdCBpbnN0YW5jZW9mIEZpbGUpcmV0dXJuITA7aWYodC50b0pTT04mJlwiZnVuY3Rpb25cIj09dHlwZW9mIHQudG9KU09OJiYxPT09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gcih0LnRvSlNPTigpLCEwKTtmb3IodmFyIGMgaW4gdClpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxjKSYmcih0W2NdKSlyZXR1cm4hMDtyZXR1cm4hMX12YXIgbz1uKDEwKSxpPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcscz1cImZ1bmN0aW9uXCI9PXR5cGVvZiBlLkJsb2J8fFwiW29iamVjdCBCbG9iQ29uc3RydWN0b3JdXCI9PT1pLmNhbGwoZS5CbG9iKSxhPVwiZnVuY3Rpb25cIj09dHlwZW9mIGUuRmlsZXx8XCJbb2JqZWN0IEZpbGVDb25zdHJ1Y3Rvcl1cIj09PWkuY2FsbChlLkZpbGUpO3QuZXhwb3J0cz1yfSkuY2FsbChlLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KCkpfSxmdW5jdGlvbih0LGUpe3ZhciBuPXt9LnRvU3RyaW5nO3QuZXhwb3J0cz1BcnJheS5pc0FycmF5fHxmdW5jdGlvbih0KXtyZXR1cm5cIltvYmplY3QgQXJyYXldXCI9PW4uY2FsbCh0KX19LGZ1bmN0aW9uKHQsZSxuKXsoZnVuY3Rpb24odCl7ZnVuY3Rpb24gcih0LGUpe2lmKCF0KXJldHVybiB0O2lmKHModCkpe3ZhciBuPXtfcGxhY2Vob2xkZXI6ITAsbnVtOmUubGVuZ3RofTtyZXR1cm4gZS5wdXNoKHQpLG59aWYoaSh0KSl7Zm9yKHZhciBvPW5ldyBBcnJheSh0Lmxlbmd0aCksYT0wO2E8dC5sZW5ndGg7YSsrKW9bYV09cih0W2FdLGUpO3JldHVybiBvfWlmKFwib2JqZWN0XCI9PXR5cGVvZiB0JiYhKHQgaW5zdGFuY2VvZiBEYXRlKSl7dmFyIG89e307Zm9yKHZhciBjIGluIHQpb1tjXT1yKHRbY10sZSk7cmV0dXJuIG99cmV0dXJuIHR9ZnVuY3Rpb24gbyh0LGUpe2lmKCF0KXJldHVybiB0O2lmKHQmJnQuX3BsYWNlaG9sZGVyKXJldHVybiBlW3QubnVtXTtpZihpKHQpKWZvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKXRbbl09byh0W25dLGUpO2Vsc2UgaWYoXCJvYmplY3RcIj09dHlwZW9mIHQpZm9yKHZhciByIGluIHQpdFtyXT1vKHRbcl0sZSk7cmV0dXJuIHR9dmFyIGk9bigxMCkscz1uKDEyKSxhPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcsYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiB0LkJsb2J8fFwiW29iamVjdCBCbG9iQ29uc3RydWN0b3JdXCI9PT1hLmNhbGwodC5CbG9iKSxwPVwiZnVuY3Rpb25cIj09dHlwZW9mIHQuRmlsZXx8XCJbb2JqZWN0IEZpbGVDb25zdHJ1Y3Rvcl1cIj09PWEuY2FsbCh0LkZpbGUpO2UuZGVjb25zdHJ1Y3RQYWNrZXQ9ZnVuY3Rpb24odCl7dmFyIGU9W10sbj10LmRhdGEsbz10O3JldHVybiBvLmRhdGE9cihuLGUpLG8uYXR0YWNobWVudHM9ZS5sZW5ndGgse3BhY2tldDpvLGJ1ZmZlcnM6ZX19LGUucmVjb25zdHJ1Y3RQYWNrZXQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5kYXRhPW8odC5kYXRhLGUpLHQuYXR0YWNobWVudHM9dm9pZCAwLHR9LGUucmVtb3ZlQmxvYnM9ZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBuKHQsYSx1KXtpZighdClyZXR1cm4gdDtpZihjJiZ0IGluc3RhbmNlb2YgQmxvYnx8cCYmdCBpbnN0YW5jZW9mIEZpbGUpe3IrKzt2YXIgaD1uZXcgRmlsZVJlYWRlcjtoLm9ubG9hZD1mdW5jdGlvbigpe3U/dVthXT10aGlzLnJlc3VsdDpvPXRoaXMucmVzdWx0LC0tcnx8ZShvKX0saC5yZWFkQXNBcnJheUJ1ZmZlcih0KX1lbHNlIGlmKGkodCkpZm9yKHZhciBmPTA7Zjx0Lmxlbmd0aDtmKyspbih0W2ZdLGYsdCk7ZWxzZSBpZihcIm9iamVjdFwiPT10eXBlb2YgdCYmIXModCkpZm9yKHZhciBsIGluIHQpbih0W2xdLGwsdCl9dmFyIHI9MCxvPXQ7bihvKSxyfHxlKG8pfX0pLmNhbGwoZSxmdW5jdGlvbigpe3JldHVybiB0aGlzfSgpKX0sZnVuY3Rpb24odCxlKXsoZnVuY3Rpb24oZSl7ZnVuY3Rpb24gbih0KXtyZXR1cm4gZS5CdWZmZXImJmUuQnVmZmVyLmlzQnVmZmVyKHQpfHxlLkFycmF5QnVmZmVyJiZ0IGluc3RhbmNlb2YgQXJyYXlCdWZmZXJ9dC5leHBvcnRzPW59KS5jYWxsKGUsZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30oKSl9LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiByKHQsZSl7aWYoISh0aGlzIGluc3RhbmNlb2YgcikpcmV0dXJuIG5ldyByKHQsZSk7dCYmXCJvYmplY3RcIj09PShcInVuZGVmaW5lZFwiPT10eXBlb2YgdD9cInVuZGVmaW5lZFwiOm8odCkpJiYoZT10LHQ9dm9pZCAwKSxlPWV8fHt9LGUucGF0aD1lLnBhdGh8fFwiL3NvY2tldC5pb1wiLHRoaXMubnNwcz17fSx0aGlzLnN1YnM9W10sdGhpcy5vcHRzPWUsdGhpcy5yZWNvbm5lY3Rpb24oZS5yZWNvbm5lY3Rpb24hPT0hMSksdGhpcy5yZWNvbm5lY3Rpb25BdHRlbXB0cyhlLnJlY29ubmVjdGlvbkF0dGVtcHRzfHwxLzApLHRoaXMucmVjb25uZWN0aW9uRGVsYXkoZS5yZWNvbm5lY3Rpb25EZWxheXx8MWUzKSx0aGlzLnJlY29ubmVjdGlvbkRlbGF5TWF4KGUucmVjb25uZWN0aW9uRGVsYXlNYXh8fDVlMyksdGhpcy5yYW5kb21pemF0aW9uRmFjdG9yKGUucmFuZG9taXphdGlvbkZhY3Rvcnx8LjUpLHRoaXMuYmFja29mZj1uZXcgbCh7bWluOnRoaXMucmVjb25uZWN0aW9uRGVsYXkoKSxtYXg6dGhpcy5yZWNvbm5lY3Rpb25EZWxheU1heCgpLGppdHRlcjp0aGlzLnJhbmRvbWl6YXRpb25GYWN0b3IoKX0pLHRoaXMudGltZW91dChudWxsPT1lLnRpbWVvdXQ/MmU0OmUudGltZW91dCksdGhpcy5yZWFkeVN0YXRlPVwiY2xvc2VkXCIsdGhpcy51cmk9dCx0aGlzLmNvbm5lY3Rpbmc9W10sdGhpcy5sYXN0UGluZz1udWxsLHRoaXMuZW5jb2Rpbmc9ITEsdGhpcy5wYWNrZXRCdWZmZXI9W107dmFyIG49ZS5wYXJzZXJ8fGM7dGhpcy5lbmNvZGVyPW5ldyBuLkVuY29kZXIsdGhpcy5kZWNvZGVyPW5ldyBuLkRlY29kZXIsdGhpcy5hdXRvQ29ubmVjdD1lLmF1dG9Db25uZWN0IT09ITEsdGhpcy5hdXRvQ29ubmVjdCYmdGhpcy5vcGVuKCl9dmFyIG89XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZcInN5bWJvbFwiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uKHQpe3JldHVybiB0eXBlb2YgdH06ZnVuY3Rpb24odCl7cmV0dXJuIHQmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmdC5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmdCE9PVN5bWJvbC5wcm90b3R5cGU/XCJzeW1ib2xcIjp0eXBlb2YgdH0saT1uKDE0KSxzPW4oMzcpLGE9big4KSxjPW4oNykscD1uKDM5KSx1PW4oNDApLGg9bigzKShcInNvY2tldC5pby1jbGllbnQ6bWFuYWdlclwiKSxmPW4oMzYpLGw9big0MSksZD1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O3QuZXhwb3J0cz1yLHIucHJvdG90eXBlLmVtaXRBbGw9ZnVuY3Rpb24oKXt0aGlzLmVtaXQuYXBwbHkodGhpcyxhcmd1bWVudHMpO2Zvcih2YXIgdCBpbiB0aGlzLm5zcHMpZC5jYWxsKHRoaXMubnNwcyx0KSYmdGhpcy5uc3BzW3RdLmVtaXQuYXBwbHkodGhpcy5uc3BzW3RdLGFyZ3VtZW50cyl9LHIucHJvdG90eXBlLnVwZGF0ZVNvY2tldElkcz1mdW5jdGlvbigpe2Zvcih2YXIgdCBpbiB0aGlzLm5zcHMpZC5jYWxsKHRoaXMubnNwcyx0KSYmKHRoaXMubnNwc1t0XS5pZD10aGlzLmdlbmVyYXRlSWQodCkpfSxyLnByb3RvdHlwZS5nZW5lcmF0ZUlkPWZ1bmN0aW9uKHQpe3JldHVybihcIi9cIj09PXQ/XCJcIjp0K1wiI1wiKSt0aGlzLmVuZ2luZS5pZH0sYShyLnByb3RvdHlwZSksci5wcm90b3R5cGUucmVjb25uZWN0aW9uPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyh0aGlzLl9yZWNvbm5lY3Rpb249ISF0LHRoaXMpOnRoaXMuX3JlY29ubmVjdGlvbn0sci5wcm90b3R5cGUucmVjb25uZWN0aW9uQXR0ZW1wdHM9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KHRoaXMuX3JlY29ubmVjdGlvbkF0dGVtcHRzPXQsdGhpcyk6dGhpcy5fcmVjb25uZWN0aW9uQXR0ZW1wdHN9LHIucHJvdG90eXBlLnJlY29ubmVjdGlvbkRlbGF5PWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyh0aGlzLl9yZWNvbm5lY3Rpb25EZWxheT10LHRoaXMuYmFja29mZiYmdGhpcy5iYWNrb2ZmLnNldE1pbih0KSx0aGlzKTp0aGlzLl9yZWNvbm5lY3Rpb25EZWxheX0sci5wcm90b3R5cGUucmFuZG9taXphdGlvbkZhY3Rvcj1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8odGhpcy5fcmFuZG9taXphdGlvbkZhY3Rvcj10LHRoaXMuYmFja29mZiYmdGhpcy5iYWNrb2ZmLnNldEppdHRlcih0KSx0aGlzKTp0aGlzLl9yYW5kb21pemF0aW9uRmFjdG9yfSxyLnByb3RvdHlwZS5yZWNvbm5lY3Rpb25EZWxheU1heD1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8odGhpcy5fcmVjb25uZWN0aW9uRGVsYXlNYXg9dCx0aGlzLmJhY2tvZmYmJnRoaXMuYmFja29mZi5zZXRNYXgodCksdGhpcyk6dGhpcy5fcmVjb25uZWN0aW9uRGVsYXlNYXh9LHIucHJvdG90eXBlLnRpbWVvdXQ9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KHRoaXMuX3RpbWVvdXQ9dCx0aGlzKTp0aGlzLl90aW1lb3V0fSxyLnByb3RvdHlwZS5tYXliZVJlY29ubmVjdE9uT3Blbj1mdW5jdGlvbigpeyF0aGlzLnJlY29ubmVjdGluZyYmdGhpcy5fcmVjb25uZWN0aW9uJiYwPT09dGhpcy5iYWNrb2ZmLmF0dGVtcHRzJiZ0aGlzLnJlY29ubmVjdCgpfSxyLnByb3RvdHlwZS5vcGVuPXIucHJvdG90eXBlLmNvbm5lY3Q9ZnVuY3Rpb24odCxlKXtpZihoKFwicmVhZHlTdGF0ZSAlc1wiLHRoaXMucmVhZHlTdGF0ZSksfnRoaXMucmVhZHlTdGF0ZS5pbmRleE9mKFwib3BlblwiKSlyZXR1cm4gdGhpcztoKFwib3BlbmluZyAlc1wiLHRoaXMudXJpKSx0aGlzLmVuZ2luZT1pKHRoaXMudXJpLHRoaXMub3B0cyk7dmFyIG49dGhpcy5lbmdpbmUscj10aGlzO3RoaXMucmVhZHlTdGF0ZT1cIm9wZW5pbmdcIix0aGlzLnNraXBSZWNvbm5lY3Q9ITE7dmFyIG89cChuLFwib3BlblwiLGZ1bmN0aW9uKCl7ci5vbm9wZW4oKSx0JiZ0KCl9KSxzPXAobixcImVycm9yXCIsZnVuY3Rpb24oZSl7aWYoaChcImNvbm5lY3RfZXJyb3JcIiksci5jbGVhbnVwKCksci5yZWFkeVN0YXRlPVwiY2xvc2VkXCIsci5lbWl0QWxsKFwiY29ubmVjdF9lcnJvclwiLGUpLHQpe3ZhciBuPW5ldyBFcnJvcihcIkNvbm5lY3Rpb24gZXJyb3JcIik7bi5kYXRhPWUsdChuKX1lbHNlIHIubWF5YmVSZWNvbm5lY3RPbk9wZW4oKX0pO2lmKCExIT09dGhpcy5fdGltZW91dCl7dmFyIGE9dGhpcy5fdGltZW91dDtoKFwiY29ubmVjdCBhdHRlbXB0IHdpbGwgdGltZW91dCBhZnRlciAlZFwiLGEpO3ZhciBjPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtoKFwiY29ubmVjdCBhdHRlbXB0IHRpbWVkIG91dCBhZnRlciAlZFwiLGEpLG8uZGVzdHJveSgpLG4uY2xvc2UoKSxuLmVtaXQoXCJlcnJvclwiLFwidGltZW91dFwiKSxyLmVtaXRBbGwoXCJjb25uZWN0X3RpbWVvdXRcIixhKX0sYSk7dGhpcy5zdWJzLnB1c2goe2Rlc3Ryb3k6ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQoYyl9fSl9cmV0dXJuIHRoaXMuc3Vicy5wdXNoKG8pLHRoaXMuc3Vicy5wdXNoKHMpLHRoaXN9LHIucHJvdG90eXBlLm9ub3Blbj1mdW5jdGlvbigpe2goXCJvcGVuXCIpLHRoaXMuY2xlYW51cCgpLHRoaXMucmVhZHlTdGF0ZT1cIm9wZW5cIix0aGlzLmVtaXQoXCJvcGVuXCIpO3ZhciB0PXRoaXMuZW5naW5lO3RoaXMuc3Vicy5wdXNoKHAodCxcImRhdGFcIix1KHRoaXMsXCJvbmRhdGFcIikpKSx0aGlzLnN1YnMucHVzaChwKHQsXCJwaW5nXCIsdSh0aGlzLFwib25waW5nXCIpKSksdGhpcy5zdWJzLnB1c2gocCh0LFwicG9uZ1wiLHUodGhpcyxcIm9ucG9uZ1wiKSkpLHRoaXMuc3Vicy5wdXNoKHAodCxcImVycm9yXCIsdSh0aGlzLFwib25lcnJvclwiKSkpLHRoaXMuc3Vicy5wdXNoKHAodCxcImNsb3NlXCIsdSh0aGlzLFwib25jbG9zZVwiKSkpLHRoaXMuc3Vicy5wdXNoKHAodGhpcy5kZWNvZGVyLFwiZGVjb2RlZFwiLHUodGhpcyxcIm9uZGVjb2RlZFwiKSkpfSxyLnByb3RvdHlwZS5vbnBpbmc9ZnVuY3Rpb24oKXt0aGlzLmxhc3RQaW5nPW5ldyBEYXRlLHRoaXMuZW1pdEFsbChcInBpbmdcIil9LHIucHJvdG90eXBlLm9ucG9uZz1mdW5jdGlvbigpe3RoaXMuZW1pdEFsbChcInBvbmdcIixuZXcgRGF0ZS10aGlzLmxhc3RQaW5nKX0sci5wcm90b3R5cGUub25kYXRhPWZ1bmN0aW9uKHQpe3RoaXMuZGVjb2Rlci5hZGQodCl9LHIucHJvdG90eXBlLm9uZGVjb2RlZD1mdW5jdGlvbih0KXt0aGlzLmVtaXQoXCJwYWNrZXRcIix0KX0sci5wcm90b3R5cGUub25lcnJvcj1mdW5jdGlvbih0KXtoKFwiZXJyb3JcIix0KSx0aGlzLmVtaXRBbGwoXCJlcnJvclwiLHQpfSxyLnByb3RvdHlwZS5zb2NrZXQ9ZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBuKCl7fmYoby5jb25uZWN0aW5nLHIpfHxvLmNvbm5lY3RpbmcucHVzaChyKX12YXIgcj10aGlzLm5zcHNbdF07aWYoIXIpe3I9bmV3IHModGhpcyx0LGUpLHRoaXMubnNwc1t0XT1yO3ZhciBvPXRoaXM7ci5vbihcImNvbm5lY3RpbmdcIixuKSxyLm9uKFwiY29ubmVjdFwiLGZ1bmN0aW9uKCl7ci5pZD1vLmdlbmVyYXRlSWQodCl9KSx0aGlzLmF1dG9Db25uZWN0JiZuKCl9cmV0dXJuIHJ9LHIucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24odCl7dmFyIGU9Zih0aGlzLmNvbm5lY3RpbmcsdCk7fmUmJnRoaXMuY29ubmVjdGluZy5zcGxpY2UoZSwxKSx0aGlzLmNvbm5lY3RpbmcubGVuZ3RofHx0aGlzLmNsb3NlKCl9LHIucHJvdG90eXBlLnBhY2tldD1mdW5jdGlvbih0KXtoKFwid3JpdGluZyBwYWNrZXQgJWpcIix0KTt2YXIgZT10aGlzO3QucXVlcnkmJjA9PT10LnR5cGUmJih0Lm5zcCs9XCI/XCIrdC5xdWVyeSksZS5lbmNvZGluZz9lLnBhY2tldEJ1ZmZlci5wdXNoKHQpOihlLmVuY29kaW5nPSEwLHRoaXMuZW5jb2Rlci5lbmNvZGUodCxmdW5jdGlvbihuKXtmb3IodmFyIHI9MDtyPG4ubGVuZ3RoO3IrKyllLmVuZ2luZS53cml0ZShuW3JdLHQub3B0aW9ucyk7ZS5lbmNvZGluZz0hMSxlLnByb2Nlc3NQYWNrZXRRdWV1ZSgpfSkpfSxyLnByb3RvdHlwZS5wcm9jZXNzUGFja2V0UXVldWU9ZnVuY3Rpb24oKXtpZih0aGlzLnBhY2tldEJ1ZmZlci5sZW5ndGg+MCYmIXRoaXMuZW5jb2Rpbmcpe3ZhciB0PXRoaXMucGFja2V0QnVmZmVyLnNoaWZ0KCk7dGhpcy5wYWNrZXQodCl9fSxyLnByb3RvdHlwZS5jbGVhbnVwPWZ1bmN0aW9uKCl7aChcImNsZWFudXBcIik7Zm9yKHZhciB0PXRoaXMuc3Vicy5sZW5ndGgsZT0wO2U8dDtlKyspe3ZhciBuPXRoaXMuc3Vicy5zaGlmdCgpO24uZGVzdHJveSgpfXRoaXMucGFja2V0QnVmZmVyPVtdLHRoaXMuZW5jb2Rpbmc9ITEsdGhpcy5sYXN0UGluZz1udWxsLHRoaXMuZGVjb2Rlci5kZXN0cm95KCl9LHIucHJvdG90eXBlLmNsb3NlPXIucHJvdG90eXBlLmRpc2Nvbm5lY3Q9ZnVuY3Rpb24oKXtoKFwiZGlzY29ubmVjdFwiKSx0aGlzLnNraXBSZWNvbm5lY3Q9ITAsdGhpcy5yZWNvbm5lY3Rpbmc9ITEsXCJvcGVuaW5nXCI9PT10aGlzLnJlYWR5U3RhdGUmJnRoaXMuY2xlYW51cCgpLHRoaXMuYmFja29mZi5yZXNldCgpLHRoaXMucmVhZHlTdGF0ZT1cImNsb3NlZFwiLHRoaXMuZW5naW5lJiZ0aGlzLmVuZ2luZS5jbG9zZSgpfSxyLnByb3RvdHlwZS5vbmNsb3NlPWZ1bmN0aW9uKHQpe2goXCJvbmNsb3NlXCIpLHRoaXMuY2xlYW51cCgpLHRoaXMuYmFja29mZi5yZXNldCgpLHRoaXMucmVhZHlTdGF0ZT1cImNsb3NlZFwiLHRoaXMuZW1pdChcImNsb3NlXCIsdCksdGhpcy5fcmVjb25uZWN0aW9uJiYhdGhpcy5za2lwUmVjb25uZWN0JiZ0aGlzLnJlY29ubmVjdCgpfSxyLnByb3RvdHlwZS5yZWNvbm5lY3Q9ZnVuY3Rpb24oKXtpZih0aGlzLnJlY29ubmVjdGluZ3x8dGhpcy5za2lwUmVjb25uZWN0KXJldHVybiB0aGlzO3ZhciB0PXRoaXM7aWYodGhpcy5iYWNrb2ZmLmF0dGVtcHRzPj10aGlzLl9yZWNvbm5lY3Rpb25BdHRlbXB0cyloKFwicmVjb25uZWN0IGZhaWxlZFwiKSx0aGlzLmJhY2tvZmYucmVzZXQoKSx0aGlzLmVtaXRBbGwoXCJyZWNvbm5lY3RfZmFpbGVkXCIpLHRoaXMucmVjb25uZWN0aW5nPSExO2Vsc2V7dmFyIGU9dGhpcy5iYWNrb2ZmLmR1cmF0aW9uKCk7aChcIndpbGwgd2FpdCAlZG1zIGJlZm9yZSByZWNvbm5lY3QgYXR0ZW1wdFwiLGUpLHRoaXMucmVjb25uZWN0aW5nPSEwO3ZhciBuPXNldFRpbWVvdXQoZnVuY3Rpb24oKXt0LnNraXBSZWNvbm5lY3R8fChoKFwiYXR0ZW1wdGluZyByZWNvbm5lY3RcIiksdC5lbWl0QWxsKFwicmVjb25uZWN0X2F0dGVtcHRcIix0LmJhY2tvZmYuYXR0ZW1wdHMpLHQuZW1pdEFsbChcInJlY29ubmVjdGluZ1wiLHQuYmFja29mZi5hdHRlbXB0cyksdC5za2lwUmVjb25uZWN0fHx0Lm9wZW4oZnVuY3Rpb24oZSl7ZT8oaChcInJlY29ubmVjdCBhdHRlbXB0IGVycm9yXCIpLHQucmVjb25uZWN0aW5nPSExLHQucmVjb25uZWN0KCksdC5lbWl0QWxsKFwicmVjb25uZWN0X2Vycm9yXCIsZS5kYXRhKSk6KGgoXCJyZWNvbm5lY3Qgc3VjY2Vzc1wiKSx0Lm9ucmVjb25uZWN0KCkpfSkpfSxlKTt0aGlzLnN1YnMucHVzaCh7ZGVzdHJveTpmdW5jdGlvbigpe2NsZWFyVGltZW91dChuKX19KX19LHIucHJvdG90eXBlLm9ucmVjb25uZWN0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5iYWNrb2ZmLmF0dGVtcHRzO3RoaXMucmVjb25uZWN0aW5nPSExLHRoaXMuYmFja29mZi5yZXNldCgpLHRoaXMudXBkYXRlU29ja2V0SWRzKCksdGhpcy5lbWl0QWxsKFwicmVjb25uZWN0XCIsdCl9fSxmdW5jdGlvbih0LGUsbil7dC5leHBvcnRzPW4oMTUpLHQuZXhwb3J0cy5wYXJzZXI9bigyMil9LGZ1bmN0aW9uKHQsZSxuKXsoZnVuY3Rpb24oZSl7ZnVuY3Rpb24gcih0LG4pe2lmKCEodGhpcyBpbnN0YW5jZW9mIHIpKXJldHVybiBuZXcgcih0LG4pO249bnx8e30sdCYmXCJvYmplY3RcIj09dHlwZW9mIHQmJihuPXQsdD1udWxsKSx0Pyh0PXUodCksbi5ob3N0bmFtZT10Lmhvc3Qsbi5zZWN1cmU9XCJodHRwc1wiPT09dC5wcm90b2NvbHx8XCJ3c3NcIj09PXQucHJvdG9jb2wsbi5wb3J0PXQucG9ydCx0LnF1ZXJ5JiYobi5xdWVyeT10LnF1ZXJ5KSk6bi5ob3N0JiYobi5ob3N0bmFtZT11KG4uaG9zdCkuaG9zdCksdGhpcy5zZWN1cmU9bnVsbCE9bi5zZWN1cmU/bi5zZWN1cmU6ZS5sb2NhdGlvbiYmXCJodHRwczpcIj09PWxvY2F0aW9uLnByb3RvY29sLG4uaG9zdG5hbWUmJiFuLnBvcnQmJihuLnBvcnQ9dGhpcy5zZWN1cmU/XCI0NDNcIjpcIjgwXCIpLHRoaXMuYWdlbnQ9bi5hZ2VudHx8ITEsdGhpcy5ob3N0bmFtZT1uLmhvc3RuYW1lfHwoZS5sb2NhdGlvbj9sb2NhdGlvbi5ob3N0bmFtZTpcImxvY2FsaG9zdFwiKSx0aGlzLnBvcnQ9bi5wb3J0fHwoZS5sb2NhdGlvbiYmbG9jYXRpb24ucG9ydD9sb2NhdGlvbi5wb3J0OnRoaXMuc2VjdXJlPzQ0Mzo4MCksdGhpcy5xdWVyeT1uLnF1ZXJ5fHx7fSxcInN0cmluZ1wiPT10eXBlb2YgdGhpcy5xdWVyeSYmKHRoaXMucXVlcnk9aC5kZWNvZGUodGhpcy5xdWVyeSkpLHRoaXMudXBncmFkZT0hMSE9PW4udXBncmFkZSx0aGlzLnBhdGg9KG4ucGF0aHx8XCIvZW5naW5lLmlvXCIpLnJlcGxhY2UoL1xcLyQvLFwiXCIpK1wiL1wiLHRoaXMuZm9yY2VKU09OUD0hIW4uZm9yY2VKU09OUCx0aGlzLmpzb25wPSExIT09bi5qc29ucCx0aGlzLmZvcmNlQmFzZTY0PSEhbi5mb3JjZUJhc2U2NCx0aGlzLmVuYWJsZXNYRFI9ISFuLmVuYWJsZXNYRFIsdGhpcy50aW1lc3RhbXBQYXJhbT1uLnRpbWVzdGFtcFBhcmFtfHxcInRcIix0aGlzLnRpbWVzdGFtcFJlcXVlc3RzPW4udGltZXN0YW1wUmVxdWVzdHMsdGhpcy50cmFuc3BvcnRzPW4udHJhbnNwb3J0c3x8W1wicG9sbGluZ1wiLFwid2Vic29ja2V0XCJdLHRoaXMudHJhbnNwb3J0T3B0aW9ucz1uLnRyYW5zcG9ydE9wdGlvbnN8fHt9LHRoaXMucmVhZHlTdGF0ZT1cIlwiLHRoaXMud3JpdGVCdWZmZXI9W10sdGhpcy5wcmV2QnVmZmVyTGVuPTAsdGhpcy5wb2xpY3lQb3J0PW4ucG9saWN5UG9ydHx8ODQzLHRoaXMucmVtZW1iZXJVcGdyYWRlPW4ucmVtZW1iZXJVcGdyYWRlfHwhMSx0aGlzLmJpbmFyeVR5cGU9bnVsbCx0aGlzLm9ubHlCaW5hcnlVcGdyYWRlcz1uLm9ubHlCaW5hcnlVcGdyYWRlcyx0aGlzLnBlck1lc3NhZ2VEZWZsYXRlPSExIT09bi5wZXJNZXNzYWdlRGVmbGF0ZSYmKG4ucGVyTWVzc2FnZURlZmxhdGV8fHt9KSwhMD09PXRoaXMucGVyTWVzc2FnZURlZmxhdGUmJih0aGlzLnBlck1lc3NhZ2VEZWZsYXRlPXt9KSx0aGlzLnBlck1lc3NhZ2VEZWZsYXRlJiZudWxsPT10aGlzLnBlck1lc3NhZ2VEZWZsYXRlLnRocmVzaG9sZCYmKHRoaXMucGVyTWVzc2FnZURlZmxhdGUudGhyZXNob2xkPTEwMjQpLHRoaXMucGZ4PW4ucGZ4fHxudWxsLHRoaXMua2V5PW4ua2V5fHxudWxsLHRoaXMucGFzc3BocmFzZT1uLnBhc3NwaHJhc2V8fG51bGwsdGhpcy5jZXJ0PW4uY2VydHx8bnVsbCx0aGlzLmNhPW4uY2F8fG51bGwsdGhpcy5jaXBoZXJzPW4uY2lwaGVyc3x8bnVsbCx0aGlzLnJlamVjdFVuYXV0aG9yaXplZD12b2lkIDA9PT1uLnJlamVjdFVuYXV0aG9yaXplZHx8bi5yZWplY3RVbmF1dGhvcml6ZWQsdGhpcy5mb3JjZU5vZGU9ISFuLmZvcmNlTm9kZTt2YXIgbz1cIm9iamVjdFwiPT10eXBlb2YgZSYmZTtvLmdsb2JhbD09PW8mJihuLmV4dHJhSGVhZGVycyYmT2JqZWN0LmtleXMobi5leHRyYUhlYWRlcnMpLmxlbmd0aD4wJiYodGhpcy5leHRyYUhlYWRlcnM9bi5leHRyYUhlYWRlcnMpLG4ubG9jYWxBZGRyZXNzJiYodGhpcy5sb2NhbEFkZHJlc3M9bi5sb2NhbEFkZHJlc3MpKSx0aGlzLmlkPW51bGwsdGhpcy51cGdyYWRlcz1udWxsLHRoaXMucGluZ0ludGVydmFsPW51bGwsdGhpcy5waW5nVGltZW91dD1udWxsLHRoaXMucGluZ0ludGVydmFsVGltZXI9bnVsbCx0aGlzLnBpbmdUaW1lb3V0VGltZXI9bnVsbCx0aGlzLm9wZW4oKX1mdW5jdGlvbiBvKHQpe3ZhciBlPXt9O2Zvcih2YXIgbiBpbiB0KXQuaGFzT3duUHJvcGVydHkobikmJihlW25dPXRbbl0pO3JldHVybiBlfXZhciBpPW4oMTYpLHM9big4KSxhPW4oMykoXCJlbmdpbmUuaW8tY2xpZW50OnNvY2tldFwiKSxjPW4oMzYpLHA9bigyMiksdT1uKDIpLGg9bigzMCk7dC5leHBvcnRzPXIsci5wcmlvcldlYnNvY2tldFN1Y2Nlc3M9ITEscyhyLnByb3RvdHlwZSksci5wcm90b2NvbD1wLnByb3RvY29sLHIuU29ja2V0PXIsci5UcmFuc3BvcnQ9bigyMSksci50cmFuc3BvcnRzPW4oMTYpLHIucGFyc2VyPW4oMjIpLHIucHJvdG90eXBlLmNyZWF0ZVRyYW5zcG9ydD1mdW5jdGlvbih0KXthKCdjcmVhdGluZyB0cmFuc3BvcnQgXCIlc1wiJyx0KTt2YXIgZT1vKHRoaXMucXVlcnkpO2UuRUlPPXAucHJvdG9jb2wsZS50cmFuc3BvcnQ9dDt2YXIgbj10aGlzLnRyYW5zcG9ydE9wdGlvbnNbdF18fHt9O3RoaXMuaWQmJihlLnNpZD10aGlzLmlkKTt2YXIgcj1uZXcgaVt0XSh7cXVlcnk6ZSxzb2NrZXQ6dGhpcyxhZ2VudDpuLmFnZW50fHx0aGlzLmFnZW50LGhvc3RuYW1lOm4uaG9zdG5hbWV8fHRoaXMuaG9zdG5hbWUscG9ydDpuLnBvcnR8fHRoaXMucG9ydCxzZWN1cmU6bi5zZWN1cmV8fHRoaXMuc2VjdXJlLHBhdGg6bi5wYXRofHx0aGlzLnBhdGgsZm9yY2VKU09OUDpuLmZvcmNlSlNPTlB8fHRoaXMuZm9yY2VKU09OUCxqc29ucDpuLmpzb25wfHx0aGlzLmpzb25wLGZvcmNlQmFzZTY0Om4uZm9yY2VCYXNlNjR8fHRoaXMuZm9yY2VCYXNlNjQsZW5hYmxlc1hEUjpuLmVuYWJsZXNYRFJ8fHRoaXMuZW5hYmxlc1hEUix0aW1lc3RhbXBSZXF1ZXN0czpuLnRpbWVzdGFtcFJlcXVlc3RzfHx0aGlzLnRpbWVzdGFtcFJlcXVlc3RzLHRpbWVzdGFtcFBhcmFtOm4udGltZXN0YW1wUGFyYW18fHRoaXMudGltZXN0YW1wUGFyYW0scG9saWN5UG9ydDpuLnBvbGljeVBvcnR8fHRoaXMucG9saWN5UG9ydCxwZng6bi5wZnh8fHRoaXMucGZ4LGtleTpuLmtleXx8dGhpcy5rZXkscGFzc3BocmFzZTpuLnBhc3NwaHJhc2V8fHRoaXMucGFzc3BocmFzZSxjZXJ0Om4uY2VydHx8dGhpcy5jZXJ0LGNhOm4uY2F8fHRoaXMuY2EsY2lwaGVyczpuLmNpcGhlcnN8fHRoaXMuY2lwaGVycyxyZWplY3RVbmF1dGhvcml6ZWQ6bi5yZWplY3RVbmF1dGhvcml6ZWR8fHRoaXMucmVqZWN0VW5hdXRob3JpemVkLHBlck1lc3NhZ2VEZWZsYXRlOm4ucGVyTWVzc2FnZURlZmxhdGV8fHRoaXMucGVyTWVzc2FnZURlZmxhdGUsZXh0cmFIZWFkZXJzOm4uZXh0cmFIZWFkZXJzfHx0aGlzLmV4dHJhSGVhZGVycyxmb3JjZU5vZGU6bi5mb3JjZU5vZGV8fHRoaXMuZm9yY2VOb2RlLGxvY2FsQWRkcmVzczpuLmxvY2FsQWRkcmVzc3x8dGhpcy5sb2NhbEFkZHJlc3MscmVxdWVzdFRpbWVvdXQ6bi5yZXF1ZXN0VGltZW91dHx8dGhpcy5yZXF1ZXN0VGltZW91dCxwcm90b2NvbHM6bi5wcm90b2NvbHN8fHZvaWQgMH0pO3JldHVybiByfSxyLnByb3RvdHlwZS5vcGVuPWZ1bmN0aW9uKCl7dmFyIHQ7aWYodGhpcy5yZW1lbWJlclVwZ3JhZGUmJnIucHJpb3JXZWJzb2NrZXRTdWNjZXNzJiZ0aGlzLnRyYW5zcG9ydHMuaW5kZXhPZihcIndlYnNvY2tldFwiKSE9PS0xKXQ9XCJ3ZWJzb2NrZXRcIjtlbHNle2lmKDA9PT10aGlzLnRyYW5zcG9ydHMubGVuZ3RoKXt2YXIgZT10aGlzO3JldHVybiB2b2lkIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtlLmVtaXQoXCJlcnJvclwiLFwiTm8gdHJhbnNwb3J0cyBhdmFpbGFibGVcIil9LDApfXQ9dGhpcy50cmFuc3BvcnRzWzBdfXRoaXMucmVhZHlTdGF0ZT1cIm9wZW5pbmdcIjt0cnl7dD10aGlzLmNyZWF0ZVRyYW5zcG9ydCh0KX1jYXRjaChuKXtyZXR1cm4gdGhpcy50cmFuc3BvcnRzLnNoaWZ0KCksdm9pZCB0aGlzLm9wZW4oKX10Lm9wZW4oKSx0aGlzLnNldFRyYW5zcG9ydCh0KX0sci5wcm90b3R5cGUuc2V0VHJhbnNwb3J0PWZ1bmN0aW9uKHQpe2EoXCJzZXR0aW5nIHRyYW5zcG9ydCAlc1wiLHQubmFtZSk7dmFyIGU9dGhpczt0aGlzLnRyYW5zcG9ydCYmKGEoXCJjbGVhcmluZyBleGlzdGluZyB0cmFuc3BvcnQgJXNcIix0aGlzLnRyYW5zcG9ydC5uYW1lKSx0aGlzLnRyYW5zcG9ydC5yZW1vdmVBbGxMaXN0ZW5lcnMoKSksdGhpcy50cmFuc3BvcnQ9dCx0Lm9uKFwiZHJhaW5cIixmdW5jdGlvbigpe2Uub25EcmFpbigpfSkub24oXCJwYWNrZXRcIixmdW5jdGlvbih0KXtlLm9uUGFja2V0KHQpfSkub24oXCJlcnJvclwiLGZ1bmN0aW9uKHQpe2Uub25FcnJvcih0KX0pLm9uKFwiY2xvc2VcIixmdW5jdGlvbigpe2Uub25DbG9zZShcInRyYW5zcG9ydCBjbG9zZVwiKX0pfSxyLnByb3RvdHlwZS5wcm9iZT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7aWYoZi5vbmx5QmluYXJ5VXBncmFkZXMpe3ZhciBlPSF0aGlzLnN1cHBvcnRzQmluYXJ5JiZmLnRyYW5zcG9ydC5zdXBwb3J0c0JpbmFyeTtoPWh8fGV9aHx8KGEoJ3Byb2JlIHRyYW5zcG9ydCBcIiVzXCIgb3BlbmVkJyx0KSx1LnNlbmQoW3t0eXBlOlwicGluZ1wiLGRhdGE6XCJwcm9iZVwifV0pLHUub25jZShcInBhY2tldFwiLGZ1bmN0aW9uKGUpe2lmKCFoKWlmKFwicG9uZ1wiPT09ZS50eXBlJiZcInByb2JlXCI9PT1lLmRhdGEpe2lmKGEoJ3Byb2JlIHRyYW5zcG9ydCBcIiVzXCIgcG9uZycsdCksZi51cGdyYWRpbmc9ITAsZi5lbWl0KFwidXBncmFkaW5nXCIsdSksIXUpcmV0dXJuO3IucHJpb3JXZWJzb2NrZXRTdWNjZXNzPVwid2Vic29ja2V0XCI9PT11Lm5hbWUsYSgncGF1c2luZyBjdXJyZW50IHRyYW5zcG9ydCBcIiVzXCInLGYudHJhbnNwb3J0Lm5hbWUpLGYudHJhbnNwb3J0LnBhdXNlKGZ1bmN0aW9uKCl7aHx8XCJjbG9zZWRcIiE9PWYucmVhZHlTdGF0ZSYmKGEoXCJjaGFuZ2luZyB0cmFuc3BvcnQgYW5kIHNlbmRpbmcgdXBncmFkZSBwYWNrZXRcIikscCgpLGYuc2V0VHJhbnNwb3J0KHUpLHUuc2VuZChbe3R5cGU6XCJ1cGdyYWRlXCJ9XSksZi5lbWl0KFwidXBncmFkZVwiLHUpLHU9bnVsbCxmLnVwZ3JhZGluZz0hMSxmLmZsdXNoKCkpfSl9ZWxzZXthKCdwcm9iZSB0cmFuc3BvcnQgXCIlc1wiIGZhaWxlZCcsdCk7dmFyIG49bmV3IEVycm9yKFwicHJvYmUgZXJyb3JcIik7bi50cmFuc3BvcnQ9dS5uYW1lLGYuZW1pdChcInVwZ3JhZGVFcnJvclwiLG4pfX0pKX1mdW5jdGlvbiBuKCl7aHx8KGg9ITAscCgpLHUuY2xvc2UoKSx1PW51bGwpfWZ1bmN0aW9uIG8oZSl7dmFyIHI9bmV3IEVycm9yKFwicHJvYmUgZXJyb3I6IFwiK2UpO3IudHJhbnNwb3J0PXUubmFtZSxuKCksYSgncHJvYmUgdHJhbnNwb3J0IFwiJXNcIiBmYWlsZWQgYmVjYXVzZSBvZiBlcnJvcjogJXMnLHQsZSksZi5lbWl0KFwidXBncmFkZUVycm9yXCIscil9ZnVuY3Rpb24gaSgpe28oXCJ0cmFuc3BvcnQgY2xvc2VkXCIpfWZ1bmN0aW9uIHMoKXtvKFwic29ja2V0IGNsb3NlZFwiKX1mdW5jdGlvbiBjKHQpe3UmJnQubmFtZSE9PXUubmFtZSYmKGEoJ1wiJXNcIiB3b3JrcyAtIGFib3J0aW5nIFwiJXNcIicsdC5uYW1lLHUubmFtZSksbigpKX1mdW5jdGlvbiBwKCl7dS5yZW1vdmVMaXN0ZW5lcihcIm9wZW5cIixlKSx1LnJlbW92ZUxpc3RlbmVyKFwiZXJyb3JcIixvKSx1LnJlbW92ZUxpc3RlbmVyKFwiY2xvc2VcIixpKSxmLnJlbW92ZUxpc3RlbmVyKFwiY2xvc2VcIixzKSxmLnJlbW92ZUxpc3RlbmVyKFwidXBncmFkaW5nXCIsYyl9YSgncHJvYmluZyB0cmFuc3BvcnQgXCIlc1wiJyx0KTt2YXIgdT10aGlzLmNyZWF0ZVRyYW5zcG9ydCh0LHtwcm9iZToxfSksaD0hMSxmPXRoaXM7ci5wcmlvcldlYnNvY2tldFN1Y2Nlc3M9ITEsdS5vbmNlKFwib3BlblwiLGUpLHUub25jZShcImVycm9yXCIsbyksdS5vbmNlKFwiY2xvc2VcIixpKSx0aGlzLm9uY2UoXCJjbG9zZVwiLHMpLHRoaXMub25jZShcInVwZ3JhZGluZ1wiLGMpLHUub3BlbigpfSxyLnByb3RvdHlwZS5vbk9wZW49ZnVuY3Rpb24oKXtpZihhKFwic29ja2V0IG9wZW5cIiksdGhpcy5yZWFkeVN0YXRlPVwib3BlblwiLHIucHJpb3JXZWJzb2NrZXRTdWNjZXNzPVwid2Vic29ja2V0XCI9PT10aGlzLnRyYW5zcG9ydC5uYW1lLHRoaXMuZW1pdChcIm9wZW5cIiksdGhpcy5mbHVzaCgpLFwib3BlblwiPT09dGhpcy5yZWFkeVN0YXRlJiZ0aGlzLnVwZ3JhZGUmJnRoaXMudHJhbnNwb3J0LnBhdXNlKXthKFwic3RhcnRpbmcgdXBncmFkZSBwcm9iZXNcIik7Zm9yKHZhciB0PTAsZT10aGlzLnVwZ3JhZGVzLmxlbmd0aDt0PGU7dCsrKXRoaXMucHJvYmUodGhpcy51cGdyYWRlc1t0XSl9fSxyLnByb3RvdHlwZS5vblBhY2tldD1mdW5jdGlvbih0KXtpZihcIm9wZW5pbmdcIj09PXRoaXMucmVhZHlTdGF0ZXx8XCJvcGVuXCI9PT10aGlzLnJlYWR5U3RhdGV8fFwiY2xvc2luZ1wiPT09dGhpcy5yZWFkeVN0YXRlKXN3aXRjaChhKCdzb2NrZXQgcmVjZWl2ZTogdHlwZSBcIiVzXCIsIGRhdGEgXCIlc1wiJyx0LnR5cGUsdC5kYXRhKSx0aGlzLmVtaXQoXCJwYWNrZXRcIix0KSx0aGlzLmVtaXQoXCJoZWFydGJlYXRcIiksdC50eXBlKXtjYXNlXCJvcGVuXCI6dGhpcy5vbkhhbmRzaGFrZShKU09OLnBhcnNlKHQuZGF0YSkpO2JyZWFrO2Nhc2VcInBvbmdcIjp0aGlzLnNldFBpbmcoKSx0aGlzLmVtaXQoXCJwb25nXCIpO2JyZWFrO2Nhc2VcImVycm9yXCI6dmFyIGU9bmV3IEVycm9yKFwic2VydmVyIGVycm9yXCIpO2UuY29kZT10LmRhdGEsdGhpcy5vbkVycm9yKGUpO2JyZWFrO2Nhc2VcIm1lc3NhZ2VcIjp0aGlzLmVtaXQoXCJkYXRhXCIsdC5kYXRhKSx0aGlzLmVtaXQoXCJtZXNzYWdlXCIsdC5kYXRhKX1lbHNlIGEoJ3BhY2tldCByZWNlaXZlZCB3aXRoIHNvY2tldCByZWFkeVN0YXRlIFwiJXNcIicsdGhpcy5yZWFkeVN0YXRlKX0sci5wcm90b3R5cGUub25IYW5kc2hha2U9ZnVuY3Rpb24odCl7dGhpcy5lbWl0KFwiaGFuZHNoYWtlXCIsdCksdGhpcy5pZD10LnNpZCx0aGlzLnRyYW5zcG9ydC5xdWVyeS5zaWQ9dC5zaWQsdGhpcy51cGdyYWRlcz10aGlzLmZpbHRlclVwZ3JhZGVzKHQudXBncmFkZXMpLHRoaXMucGluZ0ludGVydmFsPXQucGluZ0ludGVydmFsLHRoaXMucGluZ1RpbWVvdXQ9dC5waW5nVGltZW91dCx0aGlzLm9uT3BlbigpLFwiY2xvc2VkXCIhPT10aGlzLnJlYWR5U3RhdGUmJih0aGlzLnNldFBpbmcoKSx0aGlzLnJlbW92ZUxpc3RlbmVyKFwiaGVhcnRiZWF0XCIsdGhpcy5vbkhlYXJ0YmVhdCksdGhpcy5vbihcImhlYXJ0YmVhdFwiLHRoaXMub25IZWFydGJlYXQpKX0sci5wcm90b3R5cGUub25IZWFydGJlYXQ9ZnVuY3Rpb24odCl7Y2xlYXJUaW1lb3V0KHRoaXMucGluZ1RpbWVvdXRUaW1lcik7dmFyIGU9dGhpcztlLnBpbmdUaW1lb3V0VGltZXI9c2V0VGltZW91dChmdW5jdGlvbigpe1wiY2xvc2VkXCIhPT1lLnJlYWR5U3RhdGUmJmUub25DbG9zZShcInBpbmcgdGltZW91dFwiKX0sdHx8ZS5waW5nSW50ZXJ2YWwrZS5waW5nVGltZW91dCl9LHIucHJvdG90eXBlLnNldFBpbmc9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO2NsZWFyVGltZW91dCh0LnBpbmdJbnRlcnZhbFRpbWVyKSx0LnBpbmdJbnRlcnZhbFRpbWVyPXNldFRpbWVvdXQoZnVuY3Rpb24oKXthKFwid3JpdGluZyBwaW5nIHBhY2tldCAtIGV4cGVjdGluZyBwb25nIHdpdGhpbiAlc21zXCIsdC5waW5nVGltZW91dCksdC5waW5nKCksdC5vbkhlYXJ0YmVhdCh0LnBpbmdUaW1lb3V0KX0sdC5waW5nSW50ZXJ2YWwpfSxyLnByb3RvdHlwZS5waW5nPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLnNlbmRQYWNrZXQoXCJwaW5nXCIsZnVuY3Rpb24oKXt0LmVtaXQoXCJwaW5nXCIpfSl9LHIucHJvdG90eXBlLm9uRHJhaW49ZnVuY3Rpb24oKXt0aGlzLndyaXRlQnVmZmVyLnNwbGljZSgwLHRoaXMucHJldkJ1ZmZlckxlbiksdGhpcy5wcmV2QnVmZmVyTGVuPTAsMD09PXRoaXMud3JpdGVCdWZmZXIubGVuZ3RoP3RoaXMuZW1pdChcImRyYWluXCIpOnRoaXMuZmx1c2goKX0sci5wcm90b3R5cGUuZmx1c2g9ZnVuY3Rpb24oKXtcImNsb3NlZFwiIT09dGhpcy5yZWFkeVN0YXRlJiZ0aGlzLnRyYW5zcG9ydC53cml0YWJsZSYmIXRoaXMudXBncmFkaW5nJiZ0aGlzLndyaXRlQnVmZmVyLmxlbmd0aCYmKGEoXCJmbHVzaGluZyAlZCBwYWNrZXRzIGluIHNvY2tldFwiLHRoaXMud3JpdGVCdWZmZXIubGVuZ3RoKSx0aGlzLnRyYW5zcG9ydC5zZW5kKHRoaXMud3JpdGVCdWZmZXIpLHRoaXMucHJldkJ1ZmZlckxlbj10aGlzLndyaXRlQnVmZmVyLmxlbmd0aCx0aGlzLmVtaXQoXCJmbHVzaFwiKSl9LHIucHJvdG90eXBlLndyaXRlPXIucHJvdG90eXBlLnNlbmQ9ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0aGlzLnNlbmRQYWNrZXQoXCJtZXNzYWdlXCIsdCxlLG4pLHRoaXN9LHIucHJvdG90eXBlLnNlbmRQYWNrZXQ9ZnVuY3Rpb24odCxlLG4scil7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgZSYmKHI9ZSxlPXZvaWQgMCksXCJmdW5jdGlvblwiPT10eXBlb2YgbiYmKHI9bixuPW51bGwpLFwiY2xvc2luZ1wiIT09dGhpcy5yZWFkeVN0YXRlJiZcImNsb3NlZFwiIT09dGhpcy5yZWFkeVN0YXRlKXtuPW58fHt9LG4uY29tcHJlc3M9ITEhPT1uLmNvbXByZXNzO3ZhciBvPXt0eXBlOnQsZGF0YTplLG9wdGlvbnM6bn07dGhpcy5lbWl0KFwicGFja2V0Q3JlYXRlXCIsbyksdGhpcy53cml0ZUJ1ZmZlci5wdXNoKG8pLHImJnRoaXMub25jZShcImZsdXNoXCIsciksdGhpcy5mbHVzaCgpfX0sci5wcm90b3R5cGUuY2xvc2U9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7ci5vbkNsb3NlKFwiZm9yY2VkIGNsb3NlXCIpLGEoXCJzb2NrZXQgY2xvc2luZyAtIHRlbGxpbmcgdHJhbnNwb3J0IHRvIGNsb3NlXCIpLHIudHJhbnNwb3J0LmNsb3NlKCl9ZnVuY3Rpb24gZSgpe3IucmVtb3ZlTGlzdGVuZXIoXCJ1cGdyYWRlXCIsZSksci5yZW1vdmVMaXN0ZW5lcihcInVwZ3JhZGVFcnJvclwiLGUpLHQoKX1mdW5jdGlvbiBuKCl7ci5vbmNlKFwidXBncmFkZVwiLGUpLHIub25jZShcInVwZ3JhZGVFcnJvclwiLGUpfWlmKFwib3BlbmluZ1wiPT09dGhpcy5yZWFkeVN0YXRlfHxcIm9wZW5cIj09PXRoaXMucmVhZHlTdGF0ZSl7dGhpcy5yZWFkeVN0YXRlPVwiY2xvc2luZ1wiO3ZhciByPXRoaXM7dGhpcy53cml0ZUJ1ZmZlci5sZW5ndGg/dGhpcy5vbmNlKFwiZHJhaW5cIixmdW5jdGlvbigpe3RoaXMudXBncmFkaW5nP24oKTp0KCl9KTp0aGlzLnVwZ3JhZGluZz9uKCk6dCgpfXJldHVybiB0aGlzfSxyLnByb3RvdHlwZS5vbkVycm9yPWZ1bmN0aW9uKHQpe2EoXCJzb2NrZXQgZXJyb3IgJWpcIix0KSxyLnByaW9yV2Vic29ja2V0U3VjY2Vzcz0hMSx0aGlzLmVtaXQoXCJlcnJvclwiLHQpLHRoaXMub25DbG9zZShcInRyYW5zcG9ydCBlcnJvclwiLHQpfSxyLnByb3RvdHlwZS5vbkNsb3NlPWZ1bmN0aW9uKHQsZSl7aWYoXCJvcGVuaW5nXCI9PT10aGlzLnJlYWR5U3RhdGV8fFwib3BlblwiPT09dGhpcy5yZWFkeVN0YXRlfHxcImNsb3NpbmdcIj09PXRoaXMucmVhZHlTdGF0ZSl7YSgnc29ja2V0IGNsb3NlIHdpdGggcmVhc29uOiBcIiVzXCInLHQpO3ZhciBuPXRoaXM7Y2xlYXJUaW1lb3V0KHRoaXMucGluZ0ludGVydmFsVGltZXIpLGNsZWFyVGltZW91dCh0aGlzLnBpbmdUaW1lb3V0VGltZXIpLHRoaXMudHJhbnNwb3J0LnJlbW92ZUFsbExpc3RlbmVycyhcImNsb3NlXCIpLHRoaXMudHJhbnNwb3J0LmNsb3NlKCksdGhpcy50cmFuc3BvcnQucmVtb3ZlQWxsTGlzdGVuZXJzKCksdGhpcy5yZWFkeVN0YXRlPVwiY2xvc2VkXCIsdGhpcy5pZD1udWxsLHRoaXMuZW1pdChcImNsb3NlXCIsdCxlKSxuLndyaXRlQnVmZmVyPVtdLG4ucHJldkJ1ZmZlckxlbj0wfX0sci5wcm90b3R5cGUuZmlsdGVyVXBncmFkZXM9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPVtdLG49MCxyPXQubGVuZ3RoO248cjtuKyspfmModGhpcy50cmFuc3BvcnRzLHRbbl0pJiZlLnB1c2godFtuXSk7cmV0dXJuIGV9fSkuY2FsbChlLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KCkpfSxmdW5jdGlvbih0LGUsbil7KGZ1bmN0aW9uKHQpe2Z1bmN0aW9uIHIoZSl7dmFyIG4scj0hMSxhPSExLGM9ITEhPT1lLmpzb25wO2lmKHQubG9jYXRpb24pe3ZhciBwPVwiaHR0cHM6XCI9PT1sb2NhdGlvbi5wcm90b2NvbCx1PWxvY2F0aW9uLnBvcnQ7dXx8KHU9cD80NDM6ODApLHI9ZS5ob3N0bmFtZSE9PWxvY2F0aW9uLmhvc3RuYW1lfHx1IT09ZS5wb3J0LGE9ZS5zZWN1cmUhPT1wfWlmKGUueGRvbWFpbj1yLGUueHNjaGVtZT1hLG49bmV3IG8oZSksXCJvcGVuXCJpbiBuJiYhZS5mb3JjZUpTT05QKXJldHVybiBuZXcgaShlKTtpZighYyl0aHJvdyBuZXcgRXJyb3IoXCJKU09OUCBkaXNhYmxlZFwiKTtyZXR1cm4gbmV3IHMoZSl9dmFyIG89bigxNyksaT1uKDE5KSxzPW4oMzMpLGE9bigzNCk7ZS5wb2xsaW5nPXIsZS53ZWJzb2NrZXQ9YX0pLmNhbGwoZSxmdW5jdGlvbigpe3JldHVybiB0aGlzfSgpKX0sZnVuY3Rpb24odCxlLG4peyhmdW5jdGlvbihlKXt2YXIgcj1uKDE4KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7dmFyIG49dC54ZG9tYWluLG89dC54c2NoZW1lLGk9dC5lbmFibGVzWERSO3RyeXtpZihcInVuZGVmaW5lZFwiIT10eXBlb2YgWE1MSHR0cFJlcXVlc3QmJighbnx8cikpcmV0dXJuIG5ldyBYTUxIdHRwUmVxdWVzdH1jYXRjaChzKXt9dHJ5e2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBYRG9tYWluUmVxdWVzdCYmIW8mJmkpcmV0dXJuIG5ldyBYRG9tYWluUmVxdWVzdH1jYXRjaChzKXt9aWYoIW4pdHJ5e3JldHVybiBuZXcoZVtbXCJBY3RpdmVcIl0uY29uY2F0KFwiT2JqZWN0XCIpLmpvaW4oXCJYXCIpXSkoXCJNaWNyb3NvZnQuWE1MSFRUUFwiKTtcbn1jYXRjaChzKXt9fX0pLmNhbGwoZSxmdW5jdGlvbigpe3JldHVybiB0aGlzfSgpKX0sZnVuY3Rpb24odCxlKXt0cnl7dC5leHBvcnRzPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBYTUxIdHRwUmVxdWVzdCYmXCJ3aXRoQ3JlZGVudGlhbHNcImluIG5ldyBYTUxIdHRwUmVxdWVzdH1jYXRjaChuKXt0LmV4cG9ydHM9ITF9fSxmdW5jdGlvbih0LGUsbil7KGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHIoKXt9ZnVuY3Rpb24gbyh0KXtpZihjLmNhbGwodGhpcyx0KSx0aGlzLnJlcXVlc3RUaW1lb3V0PXQucmVxdWVzdFRpbWVvdXQsdGhpcy5leHRyYUhlYWRlcnM9dC5leHRyYUhlYWRlcnMsZS5sb2NhdGlvbil7dmFyIG49XCJodHRwczpcIj09PWxvY2F0aW9uLnByb3RvY29sLHI9bG9jYXRpb24ucG9ydDtyfHwocj1uPzQ0Mzo4MCksdGhpcy54ZD10Lmhvc3RuYW1lIT09ZS5sb2NhdGlvbi5ob3N0bmFtZXx8ciE9PXQucG9ydCx0aGlzLnhzPXQuc2VjdXJlIT09bn19ZnVuY3Rpb24gaSh0KXt0aGlzLm1ldGhvZD10Lm1ldGhvZHx8XCJHRVRcIix0aGlzLnVyaT10LnVyaSx0aGlzLnhkPSEhdC54ZCx0aGlzLnhzPSEhdC54cyx0aGlzLmFzeW5jPSExIT09dC5hc3luYyx0aGlzLmRhdGE9dm9pZCAwIT09dC5kYXRhP3QuZGF0YTpudWxsLHRoaXMuYWdlbnQ9dC5hZ2VudCx0aGlzLmlzQmluYXJ5PXQuaXNCaW5hcnksdGhpcy5zdXBwb3J0c0JpbmFyeT10LnN1cHBvcnRzQmluYXJ5LHRoaXMuZW5hYmxlc1hEUj10LmVuYWJsZXNYRFIsdGhpcy5yZXF1ZXN0VGltZW91dD10LnJlcXVlc3RUaW1lb3V0LHRoaXMucGZ4PXQucGZ4LHRoaXMua2V5PXQua2V5LHRoaXMucGFzc3BocmFzZT10LnBhc3NwaHJhc2UsdGhpcy5jZXJ0PXQuY2VydCx0aGlzLmNhPXQuY2EsdGhpcy5jaXBoZXJzPXQuY2lwaGVycyx0aGlzLnJlamVjdFVuYXV0aG9yaXplZD10LnJlamVjdFVuYXV0aG9yaXplZCx0aGlzLmV4dHJhSGVhZGVycz10LmV4dHJhSGVhZGVycyx0aGlzLmNyZWF0ZSgpfWZ1bmN0aW9uIHMoKXtmb3IodmFyIHQgaW4gaS5yZXF1ZXN0cylpLnJlcXVlc3RzLmhhc093blByb3BlcnR5KHQpJiZpLnJlcXVlc3RzW3RdLmFib3J0KCl9dmFyIGE9bigxNyksYz1uKDIwKSxwPW4oOCksdT1uKDMxKSxoPW4oMykoXCJlbmdpbmUuaW8tY2xpZW50OnBvbGxpbmcteGhyXCIpO3QuZXhwb3J0cz1vLHQuZXhwb3J0cy5SZXF1ZXN0PWksdShvLGMpLG8ucHJvdG90eXBlLnN1cHBvcnRzQmluYXJ5PSEwLG8ucHJvdG90eXBlLnJlcXVlc3Q9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9dHx8e30sdC51cmk9dGhpcy51cmkoKSx0LnhkPXRoaXMueGQsdC54cz10aGlzLnhzLHQuYWdlbnQ9dGhpcy5hZ2VudHx8ITEsdC5zdXBwb3J0c0JpbmFyeT10aGlzLnN1cHBvcnRzQmluYXJ5LHQuZW5hYmxlc1hEUj10aGlzLmVuYWJsZXNYRFIsdC5wZng9dGhpcy5wZngsdC5rZXk9dGhpcy5rZXksdC5wYXNzcGhyYXNlPXRoaXMucGFzc3BocmFzZSx0LmNlcnQ9dGhpcy5jZXJ0LHQuY2E9dGhpcy5jYSx0LmNpcGhlcnM9dGhpcy5jaXBoZXJzLHQucmVqZWN0VW5hdXRob3JpemVkPXRoaXMucmVqZWN0VW5hdXRob3JpemVkLHQucmVxdWVzdFRpbWVvdXQ9dGhpcy5yZXF1ZXN0VGltZW91dCx0LmV4dHJhSGVhZGVycz10aGlzLmV4dHJhSGVhZGVycyxuZXcgaSh0KX0sby5wcm90b3R5cGUuZG9Xcml0ZT1mdW5jdGlvbih0LGUpe3ZhciBuPVwic3RyaW5nXCIhPXR5cGVvZiB0JiZ2b2lkIDAhPT10LHI9dGhpcy5yZXF1ZXN0KHttZXRob2Q6XCJQT1NUXCIsZGF0YTp0LGlzQmluYXJ5Om59KSxvPXRoaXM7ci5vbihcInN1Y2Nlc3NcIixlKSxyLm9uKFwiZXJyb3JcIixmdW5jdGlvbih0KXtvLm9uRXJyb3IoXCJ4aHIgcG9zdCBlcnJvclwiLHQpfSksdGhpcy5zZW5kWGhyPXJ9LG8ucHJvdG90eXBlLmRvUG9sbD1mdW5jdGlvbigpe2goXCJ4aHIgcG9sbFwiKTt2YXIgdD10aGlzLnJlcXVlc3QoKSxlPXRoaXM7dC5vbihcImRhdGFcIixmdW5jdGlvbih0KXtlLm9uRGF0YSh0KX0pLHQub24oXCJlcnJvclwiLGZ1bmN0aW9uKHQpe2Uub25FcnJvcihcInhociBwb2xsIGVycm9yXCIsdCl9KSx0aGlzLnBvbGxYaHI9dH0scChpLnByb3RvdHlwZSksaS5wcm90b3R5cGUuY3JlYXRlPWZ1bmN0aW9uKCl7dmFyIHQ9e2FnZW50OnRoaXMuYWdlbnQseGRvbWFpbjp0aGlzLnhkLHhzY2hlbWU6dGhpcy54cyxlbmFibGVzWERSOnRoaXMuZW5hYmxlc1hEUn07dC5wZng9dGhpcy5wZngsdC5rZXk9dGhpcy5rZXksdC5wYXNzcGhyYXNlPXRoaXMucGFzc3BocmFzZSx0LmNlcnQ9dGhpcy5jZXJ0LHQuY2E9dGhpcy5jYSx0LmNpcGhlcnM9dGhpcy5jaXBoZXJzLHQucmVqZWN0VW5hdXRob3JpemVkPXRoaXMucmVqZWN0VW5hdXRob3JpemVkO3ZhciBuPXRoaXMueGhyPW5ldyBhKHQpLHI9dGhpczt0cnl7aChcInhociBvcGVuICVzOiAlc1wiLHRoaXMubWV0aG9kLHRoaXMudXJpKSxuLm9wZW4odGhpcy5tZXRob2QsdGhpcy51cmksdGhpcy5hc3luYyk7dHJ5e2lmKHRoaXMuZXh0cmFIZWFkZXJzKXtuLnNldERpc2FibGVIZWFkZXJDaGVjayYmbi5zZXREaXNhYmxlSGVhZGVyQ2hlY2soITApO2Zvcih2YXIgbyBpbiB0aGlzLmV4dHJhSGVhZGVycyl0aGlzLmV4dHJhSGVhZGVycy5oYXNPd25Qcm9wZXJ0eShvKSYmbi5zZXRSZXF1ZXN0SGVhZGVyKG8sdGhpcy5leHRyYUhlYWRlcnNbb10pfX1jYXRjaChzKXt9aWYoXCJQT1NUXCI9PT10aGlzLm1ldGhvZCl0cnl7dGhpcy5pc0JpbmFyeT9uLnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LXR5cGVcIixcImFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbVwiKTpuLnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LXR5cGVcIixcInRleHQvcGxhaW47Y2hhcnNldD1VVEYtOFwiKX1jYXRjaChzKXt9dHJ5e24uc2V0UmVxdWVzdEhlYWRlcihcIkFjY2VwdFwiLFwiKi8qXCIpfWNhdGNoKHMpe31cIndpdGhDcmVkZW50aWFsc1wiaW4gbiYmKG4ud2l0aENyZWRlbnRpYWxzPSEwKSx0aGlzLnJlcXVlc3RUaW1lb3V0JiYobi50aW1lb3V0PXRoaXMucmVxdWVzdFRpbWVvdXQpLHRoaXMuaGFzWERSKCk/KG4ub25sb2FkPWZ1bmN0aW9uKCl7ci5vbkxvYWQoKX0sbi5vbmVycm9yPWZ1bmN0aW9uKCl7ci5vbkVycm9yKG4ucmVzcG9uc2VUZXh0KX0pOm4ub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7aWYoMj09PW4ucmVhZHlTdGF0ZSl7dmFyIHQ7dHJ5e3Q9bi5nZXRSZXNwb25zZUhlYWRlcihcIkNvbnRlbnQtVHlwZVwiKX1jYXRjaChlKXt9XCJhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW1cIj09PXQmJihuLnJlc3BvbnNlVHlwZT1cImFycmF5YnVmZmVyXCIpfTQ9PT1uLnJlYWR5U3RhdGUmJigyMDA9PT1uLnN0YXR1c3x8MTIyMz09PW4uc3RhdHVzP3Iub25Mb2FkKCk6c2V0VGltZW91dChmdW5jdGlvbigpe3Iub25FcnJvcihuLnN0YXR1cyl9LDApKX0saChcInhociBkYXRhICVzXCIsdGhpcy5kYXRhKSxuLnNlbmQodGhpcy5kYXRhKX1jYXRjaChzKXtyZXR1cm4gdm9pZCBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ci5vbkVycm9yKHMpfSwwKX1lLmRvY3VtZW50JiYodGhpcy5pbmRleD1pLnJlcXVlc3RzQ291bnQrKyxpLnJlcXVlc3RzW3RoaXMuaW5kZXhdPXRoaXMpfSxpLnByb3RvdHlwZS5vblN1Y2Nlc3M9ZnVuY3Rpb24oKXt0aGlzLmVtaXQoXCJzdWNjZXNzXCIpLHRoaXMuY2xlYW51cCgpfSxpLnByb3RvdHlwZS5vbkRhdGE9ZnVuY3Rpb24odCl7dGhpcy5lbWl0KFwiZGF0YVwiLHQpLHRoaXMub25TdWNjZXNzKCl9LGkucHJvdG90eXBlLm9uRXJyb3I9ZnVuY3Rpb24odCl7dGhpcy5lbWl0KFwiZXJyb3JcIix0KSx0aGlzLmNsZWFudXAoITApfSxpLnByb3RvdHlwZS5jbGVhbnVwPWZ1bmN0aW9uKHQpe2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiB0aGlzLnhociYmbnVsbCE9PXRoaXMueGhyKXtpZih0aGlzLmhhc1hEUigpP3RoaXMueGhyLm9ubG9hZD10aGlzLnhoci5vbmVycm9yPXI6dGhpcy54aHIub25yZWFkeXN0YXRlY2hhbmdlPXIsdCl0cnl7dGhpcy54aHIuYWJvcnQoKX1jYXRjaChuKXt9ZS5kb2N1bWVudCYmZGVsZXRlIGkucmVxdWVzdHNbdGhpcy5pbmRleF0sdGhpcy54aHI9bnVsbH19LGkucHJvdG90eXBlLm9uTG9hZD1mdW5jdGlvbigpe3ZhciB0O3RyeXt2YXIgZTt0cnl7ZT10aGlzLnhoci5nZXRSZXNwb25zZUhlYWRlcihcIkNvbnRlbnQtVHlwZVwiKX1jYXRjaChuKXt9dD1cImFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbVwiPT09ZT90aGlzLnhoci5yZXNwb25zZXx8dGhpcy54aHIucmVzcG9uc2VUZXh0OnRoaXMueGhyLnJlc3BvbnNlVGV4dH1jYXRjaChuKXt0aGlzLm9uRXJyb3Iobil9bnVsbCE9dCYmdGhpcy5vbkRhdGEodCl9LGkucHJvdG90eXBlLmhhc1hEUj1mdW5jdGlvbigpe3JldHVyblwidW5kZWZpbmVkXCIhPXR5cGVvZiBlLlhEb21haW5SZXF1ZXN0JiYhdGhpcy54cyYmdGhpcy5lbmFibGVzWERSfSxpLnByb3RvdHlwZS5hYm9ydD1mdW5jdGlvbigpe3RoaXMuY2xlYW51cCgpfSxpLnJlcXVlc3RzQ291bnQ9MCxpLnJlcXVlc3RzPXt9LGUuZG9jdW1lbnQmJihlLmF0dGFjaEV2ZW50P2UuYXR0YWNoRXZlbnQoXCJvbnVubG9hZFwiLHMpOmUuYWRkRXZlbnRMaXN0ZW5lciYmZS5hZGRFdmVudExpc3RlbmVyKFwiYmVmb3JldW5sb2FkXCIscywhMSkpfSkuY2FsbChlLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KCkpfSxmdW5jdGlvbih0LGUsbil7ZnVuY3Rpb24gcih0KXt2YXIgZT10JiZ0LmZvcmNlQmFzZTY0O3UmJiFlfHwodGhpcy5zdXBwb3J0c0JpbmFyeT0hMSksby5jYWxsKHRoaXMsdCl9dmFyIG89bigyMSksaT1uKDMwKSxzPW4oMjIpLGE9bigzMSksYz1uKDMyKSxwPW4oMykoXCJlbmdpbmUuaW8tY2xpZW50OnBvbGxpbmdcIik7dC5leHBvcnRzPXI7dmFyIHU9ZnVuY3Rpb24oKXt2YXIgdD1uKDE3KSxlPW5ldyB0KHt4ZG9tYWluOiExfSk7cmV0dXJuIG51bGwhPWUucmVzcG9uc2VUeXBlfSgpO2EocixvKSxyLnByb3RvdHlwZS5uYW1lPVwicG9sbGluZ1wiLHIucHJvdG90eXBlLmRvT3Blbj1mdW5jdGlvbigpe3RoaXMucG9sbCgpfSxyLnByb3RvdHlwZS5wYXVzZT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cChcInBhdXNlZFwiKSxuLnJlYWR5U3RhdGU9XCJwYXVzZWRcIix0KCl9dmFyIG49dGhpcztpZih0aGlzLnJlYWR5U3RhdGU9XCJwYXVzaW5nXCIsdGhpcy5wb2xsaW5nfHwhdGhpcy53cml0YWJsZSl7dmFyIHI9MDt0aGlzLnBvbGxpbmcmJihwKFwid2UgYXJlIGN1cnJlbnRseSBwb2xsaW5nIC0gd2FpdGluZyB0byBwYXVzZVwiKSxyKyssdGhpcy5vbmNlKFwicG9sbENvbXBsZXRlXCIsZnVuY3Rpb24oKXtwKFwicHJlLXBhdXNlIHBvbGxpbmcgY29tcGxldGVcIiksLS1yfHxlKCl9KSksdGhpcy53cml0YWJsZXx8KHAoXCJ3ZSBhcmUgY3VycmVudGx5IHdyaXRpbmcgLSB3YWl0aW5nIHRvIHBhdXNlXCIpLHIrKyx0aGlzLm9uY2UoXCJkcmFpblwiLGZ1bmN0aW9uKCl7cChcInByZS1wYXVzZSB3cml0aW5nIGNvbXBsZXRlXCIpLC0tcnx8ZSgpfSkpfWVsc2UgZSgpfSxyLnByb3RvdHlwZS5wb2xsPWZ1bmN0aW9uKCl7cChcInBvbGxpbmdcIiksdGhpcy5wb2xsaW5nPSEwLHRoaXMuZG9Qb2xsKCksdGhpcy5lbWl0KFwicG9sbFwiKX0sci5wcm90b3R5cGUub25EYXRhPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7cChcInBvbGxpbmcgZ290IGRhdGEgJXNcIix0KTt2YXIgbj1mdW5jdGlvbih0LG4scil7cmV0dXJuXCJvcGVuaW5nXCI9PT1lLnJlYWR5U3RhdGUmJmUub25PcGVuKCksXCJjbG9zZVwiPT09dC50eXBlPyhlLm9uQ2xvc2UoKSwhMSk6dm9pZCBlLm9uUGFja2V0KHQpfTtzLmRlY29kZVBheWxvYWQodCx0aGlzLnNvY2tldC5iaW5hcnlUeXBlLG4pLFwiY2xvc2VkXCIhPT10aGlzLnJlYWR5U3RhdGUmJih0aGlzLnBvbGxpbmc9ITEsdGhpcy5lbWl0KFwicG9sbENvbXBsZXRlXCIpLFwib3BlblwiPT09dGhpcy5yZWFkeVN0YXRlP3RoaXMucG9sbCgpOnAoJ2lnbm9yaW5nIHBvbGwgLSB0cmFuc3BvcnQgc3RhdGUgXCIlc1wiJyx0aGlzLnJlYWR5U3RhdGUpKX0sci5wcm90b3R5cGUuZG9DbG9zZT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXtwKFwid3JpdGluZyBjbG9zZSBwYWNrZXRcIiksZS53cml0ZShbe3R5cGU6XCJjbG9zZVwifV0pfXZhciBlPXRoaXM7XCJvcGVuXCI9PT10aGlzLnJlYWR5U3RhdGU/KHAoXCJ0cmFuc3BvcnQgb3BlbiAtIGNsb3NpbmdcIiksdCgpKToocChcInRyYW5zcG9ydCBub3Qgb3BlbiAtIGRlZmVycmluZyBjbG9zZVwiKSx0aGlzLm9uY2UoXCJvcGVuXCIsdCkpfSxyLnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzO3RoaXMud3JpdGFibGU9ITE7dmFyIG49ZnVuY3Rpb24oKXtlLndyaXRhYmxlPSEwLGUuZW1pdChcImRyYWluXCIpfTtzLmVuY29kZVBheWxvYWQodCx0aGlzLnN1cHBvcnRzQmluYXJ5LGZ1bmN0aW9uKHQpe2UuZG9Xcml0ZSh0LG4pfSl9LHIucHJvdG90eXBlLnVyaT1mdW5jdGlvbigpe3ZhciB0PXRoaXMucXVlcnl8fHt9LGU9dGhpcy5zZWN1cmU/XCJodHRwc1wiOlwiaHR0cFwiLG49XCJcIjshMSE9PXRoaXMudGltZXN0YW1wUmVxdWVzdHMmJih0W3RoaXMudGltZXN0YW1wUGFyYW1dPWMoKSksdGhpcy5zdXBwb3J0c0JpbmFyeXx8dC5zaWR8fCh0LmI2ND0xKSx0PWkuZW5jb2RlKHQpLHRoaXMucG9ydCYmKFwiaHR0cHNcIj09PWUmJjQ0MyE9PU51bWJlcih0aGlzLnBvcnQpfHxcImh0dHBcIj09PWUmJjgwIT09TnVtYmVyKHRoaXMucG9ydCkpJiYobj1cIjpcIit0aGlzLnBvcnQpLHQubGVuZ3RoJiYodD1cIj9cIit0KTt2YXIgcj10aGlzLmhvc3RuYW1lLmluZGV4T2YoXCI6XCIpIT09LTE7cmV0dXJuIGUrXCI6Ly9cIisocj9cIltcIit0aGlzLmhvc3RuYW1lK1wiXVwiOnRoaXMuaG9zdG5hbWUpK24rdGhpcy5wYXRoK3R9fSxmdW5jdGlvbih0LGUsbil7ZnVuY3Rpb24gcih0KXt0aGlzLnBhdGg9dC5wYXRoLHRoaXMuaG9zdG5hbWU9dC5ob3N0bmFtZSx0aGlzLnBvcnQ9dC5wb3J0LHRoaXMuc2VjdXJlPXQuc2VjdXJlLHRoaXMucXVlcnk9dC5xdWVyeSx0aGlzLnRpbWVzdGFtcFBhcmFtPXQudGltZXN0YW1wUGFyYW0sdGhpcy50aW1lc3RhbXBSZXF1ZXN0cz10LnRpbWVzdGFtcFJlcXVlc3RzLHRoaXMucmVhZHlTdGF0ZT1cIlwiLHRoaXMuYWdlbnQ9dC5hZ2VudHx8ITEsdGhpcy5zb2NrZXQ9dC5zb2NrZXQsdGhpcy5lbmFibGVzWERSPXQuZW5hYmxlc1hEUix0aGlzLnBmeD10LnBmeCx0aGlzLmtleT10LmtleSx0aGlzLnBhc3NwaHJhc2U9dC5wYXNzcGhyYXNlLHRoaXMuY2VydD10LmNlcnQsdGhpcy5jYT10LmNhLHRoaXMuY2lwaGVycz10LmNpcGhlcnMsdGhpcy5yZWplY3RVbmF1dGhvcml6ZWQ9dC5yZWplY3RVbmF1dGhvcml6ZWQsdGhpcy5mb3JjZU5vZGU9dC5mb3JjZU5vZGUsdGhpcy5leHRyYUhlYWRlcnM9dC5leHRyYUhlYWRlcnMsdGhpcy5sb2NhbEFkZHJlc3M9dC5sb2NhbEFkZHJlc3N9dmFyIG89bigyMiksaT1uKDgpO3QuZXhwb3J0cz1yLGkoci5wcm90b3R5cGUpLHIucHJvdG90eXBlLm9uRXJyb3I9ZnVuY3Rpb24odCxlKXt2YXIgbj1uZXcgRXJyb3IodCk7cmV0dXJuIG4udHlwZT1cIlRyYW5zcG9ydEVycm9yXCIsbi5kZXNjcmlwdGlvbj1lLHRoaXMuZW1pdChcImVycm9yXCIsbiksdGhpc30sci5wcm90b3R5cGUub3Blbj1mdW5jdGlvbigpe3JldHVyblwiY2xvc2VkXCIhPT10aGlzLnJlYWR5U3RhdGUmJlwiXCIhPT10aGlzLnJlYWR5U3RhdGV8fCh0aGlzLnJlYWR5U3RhdGU9XCJvcGVuaW5nXCIsdGhpcy5kb09wZW4oKSksdGhpc30sci5wcm90b3R5cGUuY2xvc2U9ZnVuY3Rpb24oKXtyZXR1cm5cIm9wZW5pbmdcIiE9PXRoaXMucmVhZHlTdGF0ZSYmXCJvcGVuXCIhPT10aGlzLnJlYWR5U3RhdGV8fCh0aGlzLmRvQ2xvc2UoKSx0aGlzLm9uQ2xvc2UoKSksdGhpc30sci5wcm90b3R5cGUuc2VuZD1mdW5jdGlvbih0KXtpZihcIm9wZW5cIiE9PXRoaXMucmVhZHlTdGF0ZSl0aHJvdyBuZXcgRXJyb3IoXCJUcmFuc3BvcnQgbm90IG9wZW5cIik7dGhpcy53cml0ZSh0KX0sci5wcm90b3R5cGUub25PcGVuPWZ1bmN0aW9uKCl7dGhpcy5yZWFkeVN0YXRlPVwib3BlblwiLHRoaXMud3JpdGFibGU9ITAsdGhpcy5lbWl0KFwib3BlblwiKX0sci5wcm90b3R5cGUub25EYXRhPWZ1bmN0aW9uKHQpe3ZhciBlPW8uZGVjb2RlUGFja2V0KHQsdGhpcy5zb2NrZXQuYmluYXJ5VHlwZSk7dGhpcy5vblBhY2tldChlKX0sci5wcm90b3R5cGUub25QYWNrZXQ9ZnVuY3Rpb24odCl7dGhpcy5lbWl0KFwicGFja2V0XCIsdCl9LHIucHJvdG90eXBlLm9uQ2xvc2U9ZnVuY3Rpb24oKXt0aGlzLnJlYWR5U3RhdGU9XCJjbG9zZWRcIix0aGlzLmVtaXQoXCJjbG9zZVwiKX19LGZ1bmN0aW9uKHQsZSxuKXsoZnVuY3Rpb24odCl7ZnVuY3Rpb24gcih0LG4pe3ZhciByPVwiYlwiK2UucGFja2V0c1t0LnR5cGVdK3QuZGF0YS5kYXRhO3JldHVybiBuKHIpfWZ1bmN0aW9uIG8odCxuLHIpe2lmKCFuKXJldHVybiBlLmVuY29kZUJhc2U2NFBhY2tldCh0LHIpO3ZhciBvPXQuZGF0YSxpPW5ldyBVaW50OEFycmF5KG8pLHM9bmV3IFVpbnQ4QXJyYXkoMStvLmJ5dGVMZW5ndGgpO3NbMF09dlt0LnR5cGVdO2Zvcih2YXIgYT0wO2E8aS5sZW5ndGg7YSsrKXNbYSsxXT1pW2FdO3JldHVybiByKHMuYnVmZmVyKX1mdW5jdGlvbiBpKHQsbixyKXtpZighbilyZXR1cm4gZS5lbmNvZGVCYXNlNjRQYWNrZXQodCxyKTt2YXIgbz1uZXcgRmlsZVJlYWRlcjtyZXR1cm4gby5vbmxvYWQ9ZnVuY3Rpb24oKXt0LmRhdGE9by5yZXN1bHQsZS5lbmNvZGVQYWNrZXQodCxuLCEwLHIpfSxvLnJlYWRBc0FycmF5QnVmZmVyKHQuZGF0YSl9ZnVuY3Rpb24gcyh0LG4scil7aWYoIW4pcmV0dXJuIGUuZW5jb2RlQmFzZTY0UGFja2V0KHQscik7aWYoZylyZXR1cm4gaSh0LG4scik7dmFyIG89bmV3IFVpbnQ4QXJyYXkoMSk7b1swXT12W3QudHlwZV07dmFyIHM9bmV3IGsoW28uYnVmZmVyLHQuZGF0YV0pO3JldHVybiByKHMpfWZ1bmN0aW9uIGEodCl7dHJ5e3Q9ZC5kZWNvZGUodCx7c3RyaWN0OiExfSl9Y2F0Y2goZSl7cmV0dXJuITF9cmV0dXJuIHR9ZnVuY3Rpb24gYyh0LGUsbil7Zm9yKHZhciByPW5ldyBBcnJheSh0Lmxlbmd0aCksbz1sKHQubGVuZ3RoLG4pLGk9ZnVuY3Rpb24odCxuLG8pe2UobixmdW5jdGlvbihlLG4pe3JbdF09bixvKGUscil9KX0scz0wO3M8dC5sZW5ndGg7cysrKWkocyx0W3NdLG8pfXZhciBwLHU9bigyMyksaD1uKDkpLGY9bigyNCksbD1uKDI1KSxkPW4oMjYpO3QmJnQuQXJyYXlCdWZmZXImJihwPW4oMjgpKTt2YXIgeT1cInVuZGVmaW5lZFwiIT10eXBlb2YgbmF2aWdhdG9yJiYvQW5kcm9pZC9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksbT1cInVuZGVmaW5lZFwiIT10eXBlb2YgbmF2aWdhdG9yJiYvUGhhbnRvbUpTL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxnPXl8fG07ZS5wcm90b2NvbD0zO3ZhciB2PWUucGFja2V0cz17b3BlbjowLGNsb3NlOjEscGluZzoyLHBvbmc6MyxtZXNzYWdlOjQsdXBncmFkZTo1LG5vb3A6Nn0sYj11KHYpLHc9e3R5cGU6XCJlcnJvclwiLGRhdGE6XCJwYXJzZXIgZXJyb3JcIn0saz1uKDI5KTtlLmVuY29kZVBhY2tldD1mdW5jdGlvbihlLG4saSxhKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBuJiYoYT1uLG49ITEpLFwiZnVuY3Rpb25cIj09dHlwZW9mIGkmJihhPWksaT1udWxsKTt2YXIgYz12b2lkIDA9PT1lLmRhdGE/dm9pZCAwOmUuZGF0YS5idWZmZXJ8fGUuZGF0YTtpZih0LkFycmF5QnVmZmVyJiZjIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpcmV0dXJuIG8oZSxuLGEpO2lmKGsmJmMgaW5zdGFuY2VvZiB0LkJsb2IpcmV0dXJuIHMoZSxuLGEpO2lmKGMmJmMuYmFzZTY0KXJldHVybiByKGUsYSk7dmFyIHA9dltlLnR5cGVdO3JldHVybiB2b2lkIDAhPT1lLmRhdGEmJihwKz1pP2QuZW5jb2RlKFN0cmluZyhlLmRhdGEpLHtzdHJpY3Q6ITF9KTpTdHJpbmcoZS5kYXRhKSksYShcIlwiK3ApfSxlLmVuY29kZUJhc2U2NFBhY2tldD1mdW5jdGlvbihuLHIpe3ZhciBvPVwiYlwiK2UucGFja2V0c1tuLnR5cGVdO2lmKGsmJm4uZGF0YSBpbnN0YW5jZW9mIHQuQmxvYil7dmFyIGk9bmV3IEZpbGVSZWFkZXI7cmV0dXJuIGkub25sb2FkPWZ1bmN0aW9uKCl7dmFyIHQ9aS5yZXN1bHQuc3BsaXQoXCIsXCIpWzFdO3Iobyt0KX0saS5yZWFkQXNEYXRhVVJMKG4uZGF0YSl9dmFyIHM7dHJ5e3M9U3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLG5ldyBVaW50OEFycmF5KG4uZGF0YSkpfWNhdGNoKGEpe2Zvcih2YXIgYz1uZXcgVWludDhBcnJheShuLmRhdGEpLHA9bmV3IEFycmF5KGMubGVuZ3RoKSx1PTA7dTxjLmxlbmd0aDt1KyspcFt1XT1jW3VdO3M9U3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLHApfXJldHVybiBvKz10LmJ0b2EocykscihvKX0sZS5kZWNvZGVQYWNrZXQ9ZnVuY3Rpb24odCxuLHIpe2lmKHZvaWQgMD09PXQpcmV0dXJuIHc7aWYoXCJzdHJpbmdcIj09dHlwZW9mIHQpe2lmKFwiYlwiPT09dC5jaGFyQXQoMCkpcmV0dXJuIGUuZGVjb2RlQmFzZTY0UGFja2V0KHQuc3Vic3RyKDEpLG4pO2lmKHImJih0PWEodCksdD09PSExKSlyZXR1cm4gdzt2YXIgbz10LmNoYXJBdCgwKTtyZXR1cm4gTnVtYmVyKG8pPT1vJiZiW29dP3QubGVuZ3RoPjE/e3R5cGU6YltvXSxkYXRhOnQuc3Vic3RyaW5nKDEpfTp7dHlwZTpiW29dfTp3fXZhciBpPW5ldyBVaW50OEFycmF5KHQpLG89aVswXSxzPWYodCwxKTtyZXR1cm4gayYmXCJibG9iXCI9PT1uJiYocz1uZXcgayhbc10pKSx7dHlwZTpiW29dLGRhdGE6c319LGUuZGVjb2RlQmFzZTY0UGFja2V0PWZ1bmN0aW9uKHQsZSl7dmFyIG49Ylt0LmNoYXJBdCgwKV07aWYoIXApcmV0dXJue3R5cGU6bixkYXRhOntiYXNlNjQ6ITAsZGF0YTp0LnN1YnN0cigxKX19O3ZhciByPXAuZGVjb2RlKHQuc3Vic3RyKDEpKTtyZXR1cm5cImJsb2JcIj09PWUmJmsmJihyPW5ldyBrKFtyXSkpLHt0eXBlOm4sZGF0YTpyfX0sZS5lbmNvZGVQYXlsb2FkPWZ1bmN0aW9uKHQsbixyKXtmdW5jdGlvbiBvKHQpe3JldHVybiB0Lmxlbmd0aCtcIjpcIit0fWZ1bmN0aW9uIGkodCxyKXtlLmVuY29kZVBhY2tldCh0LCEhcyYmbiwhMSxmdW5jdGlvbih0KXtyKG51bGwsbyh0KSl9KX1cImZ1bmN0aW9uXCI9PXR5cGVvZiBuJiYocj1uLG49bnVsbCk7dmFyIHM9aCh0KTtyZXR1cm4gbiYmcz9rJiYhZz9lLmVuY29kZVBheWxvYWRBc0Jsb2IodCxyKTplLmVuY29kZVBheWxvYWRBc0FycmF5QnVmZmVyKHQscik6dC5sZW5ndGg/dm9pZCBjKHQsaSxmdW5jdGlvbih0LGUpe3JldHVybiByKGUuam9pbihcIlwiKSl9KTpyKFwiMDpcIil9LGUuZGVjb2RlUGF5bG9hZD1mdW5jdGlvbih0LG4scil7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIHQpcmV0dXJuIGUuZGVjb2RlUGF5bG9hZEFzQmluYXJ5KHQsbixyKTtcImZ1bmN0aW9uXCI9PXR5cGVvZiBuJiYocj1uLG49bnVsbCk7dmFyIG87aWYoXCJcIj09PXQpcmV0dXJuIHIodywwLDEpO2Zvcih2YXIgaSxzLGE9XCJcIixjPTAscD10Lmxlbmd0aDtjPHA7YysrKXt2YXIgdT10LmNoYXJBdChjKTtpZihcIjpcIj09PXUpe2lmKFwiXCI9PT1hfHxhIT0oaT1OdW1iZXIoYSkpKXJldHVybiByKHcsMCwxKTtpZihzPXQuc3Vic3RyKGMrMSxpKSxhIT1zLmxlbmd0aClyZXR1cm4gcih3LDAsMSk7aWYocy5sZW5ndGgpe2lmKG89ZS5kZWNvZGVQYWNrZXQocyxuLCExKSx3LnR5cGU9PT1vLnR5cGUmJncuZGF0YT09PW8uZGF0YSlyZXR1cm4gcih3LDAsMSk7dmFyIGg9cihvLGMraSxwKTtpZighMT09PWgpcmV0dXJufWMrPWksYT1cIlwifWVsc2UgYSs9dX1yZXR1cm5cIlwiIT09YT9yKHcsMCwxKTp2b2lkIDB9LGUuZW5jb2RlUGF5bG9hZEFzQXJyYXlCdWZmZXI9ZnVuY3Rpb24odCxuKXtmdW5jdGlvbiByKHQsbil7ZS5lbmNvZGVQYWNrZXQodCwhMCwhMCxmdW5jdGlvbih0KXtyZXR1cm4gbihudWxsLHQpfSl9cmV0dXJuIHQubGVuZ3RoP3ZvaWQgYyh0LHIsZnVuY3Rpb24odCxlKXt2YXIgcj1lLnJlZHVjZShmdW5jdGlvbih0LGUpe3ZhciBuO3JldHVybiBuPVwic3RyaW5nXCI9PXR5cGVvZiBlP2UubGVuZ3RoOmUuYnl0ZUxlbmd0aCx0K24udG9TdHJpbmcoKS5sZW5ndGgrbisyfSwwKSxvPW5ldyBVaW50OEFycmF5KHIpLGk9MDtyZXR1cm4gZS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3ZhciBlPVwic3RyaW5nXCI9PXR5cGVvZiB0LG49dDtpZihlKXtmb3IodmFyIHI9bmV3IFVpbnQ4QXJyYXkodC5sZW5ndGgpLHM9MDtzPHQubGVuZ3RoO3MrKylyW3NdPXQuY2hhckNvZGVBdChzKTtuPXIuYnVmZmVyfWU/b1tpKytdPTA6b1tpKytdPTE7Zm9yKHZhciBhPW4uYnl0ZUxlbmd0aC50b1N0cmluZygpLHM9MDtzPGEubGVuZ3RoO3MrKylvW2krK109cGFyc2VJbnQoYVtzXSk7b1tpKytdPTI1NTtmb3IodmFyIHI9bmV3IFVpbnQ4QXJyYXkobikscz0wO3M8ci5sZW5ndGg7cysrKW9baSsrXT1yW3NdfSksbihvLmJ1ZmZlcil9KTpuKG5ldyBBcnJheUJ1ZmZlcigwKSl9LGUuZW5jb2RlUGF5bG9hZEFzQmxvYj1mdW5jdGlvbih0LG4pe2Z1bmN0aW9uIHIodCxuKXtlLmVuY29kZVBhY2tldCh0LCEwLCEwLGZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBVaW50OEFycmF5KDEpO2lmKGVbMF09MSxcInN0cmluZ1wiPT10eXBlb2YgdCl7Zm9yKHZhciByPW5ldyBVaW50OEFycmF5KHQubGVuZ3RoKSxvPTA7bzx0Lmxlbmd0aDtvKyspcltvXT10LmNoYXJDb2RlQXQobyk7dD1yLmJ1ZmZlcixlWzBdPTB9Zm9yKHZhciBpPXQgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcj90LmJ5dGVMZW5ndGg6dC5zaXplLHM9aS50b1N0cmluZygpLGE9bmV3IFVpbnQ4QXJyYXkocy5sZW5ndGgrMSksbz0wO288cy5sZW5ndGg7bysrKWFbb109cGFyc2VJbnQoc1tvXSk7aWYoYVtzLmxlbmd0aF09MjU1LGspe3ZhciBjPW5ldyBrKFtlLmJ1ZmZlcixhLmJ1ZmZlcix0XSk7bihudWxsLGMpfX0pfWModCxyLGZ1bmN0aW9uKHQsZSl7cmV0dXJuIG4obmV3IGsoZSkpfSl9LGUuZGVjb2RlUGF5bG9hZEFzQmluYXJ5PWZ1bmN0aW9uKHQsbixyKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBuJiYocj1uLG49bnVsbCk7Zm9yKHZhciBvPXQsaT1bXTtvLmJ5dGVMZW5ndGg+MDspe2Zvcih2YXIgcz1uZXcgVWludDhBcnJheShvKSxhPTA9PT1zWzBdLGM9XCJcIixwPTE7MjU1IT09c1twXTtwKyspe2lmKGMubGVuZ3RoPjMxMClyZXR1cm4gcih3LDAsMSk7Yys9c1twXX1vPWYobywyK2MubGVuZ3RoKSxjPXBhcnNlSW50KGMpO3ZhciB1PWYobywwLGMpO2lmKGEpdHJ5e3U9U3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLG5ldyBVaW50OEFycmF5KHUpKX1jYXRjaChoKXt2YXIgbD1uZXcgVWludDhBcnJheSh1KTt1PVwiXCI7Zm9yKHZhciBwPTA7cDxsLmxlbmd0aDtwKyspdSs9U3RyaW5nLmZyb21DaGFyQ29kZShsW3BdKX1pLnB1c2godSksbz1mKG8sYyl9dmFyIGQ9aS5sZW5ndGg7aS5mb3JFYWNoKGZ1bmN0aW9uKHQsbyl7cihlLmRlY29kZVBhY2tldCh0LG4sITApLG8sZCl9KX19KS5jYWxsKGUsZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30oKSl9LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPU9iamVjdC5rZXlzfHxmdW5jdGlvbih0KXt2YXIgZT1bXSxuPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7Zm9yKHZhciByIGluIHQpbi5jYWxsKHQscikmJmUucHVzaChyKTtyZXR1cm4gZX19LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj10LmJ5dGVMZW5ndGg7aWYoZT1lfHwwLG49bnx8cix0LnNsaWNlKXJldHVybiB0LnNsaWNlKGUsbik7aWYoZTwwJiYoZSs9ciksbjwwJiYobis9ciksbj5yJiYobj1yKSxlPj1yfHxlPj1ufHwwPT09cilyZXR1cm4gbmV3IEFycmF5QnVmZmVyKDApO2Zvcih2YXIgbz1uZXcgVWludDhBcnJheSh0KSxpPW5ldyBVaW50OEFycmF5KG4tZSkscz1lLGE9MDtzPG47cysrLGErKylpW2FdPW9bc107cmV0dXJuIGkuYnVmZmVyfX0sZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBuKHQsZSxuKXtmdW5jdGlvbiBvKHQscil7aWYoby5jb3VudDw9MCl0aHJvdyBuZXcgRXJyb3IoXCJhZnRlciBjYWxsZWQgdG9vIG1hbnkgdGltZXNcIik7LS1vLmNvdW50LHQ/KGk9ITAsZSh0KSxlPW4pOjAhPT1vLmNvdW50fHxpfHxlKG51bGwscil9dmFyIGk9ITE7cmV0dXJuIG49bnx8cixvLmNvdW50PXQsMD09PXQ/ZSgpOm99ZnVuY3Rpb24gcigpe310LmV4cG9ydHM9bn0sZnVuY3Rpb24odCxlLG4pe3ZhciByOyhmdW5jdGlvbih0LG8peyFmdW5jdGlvbihpKXtmdW5jdGlvbiBzKHQpe2Zvcih2YXIgZSxuLHI9W10sbz0wLGk9dC5sZW5ndGg7bzxpOyllPXQuY2hhckNvZGVBdChvKyspLGU+PTU1Mjk2JiZlPD01NjMxOSYmbzxpPyhuPXQuY2hhckNvZGVBdChvKyspLDU2MzIwPT0oNjQ1MTImbik/ci5wdXNoKCgoMTAyMyZlKTw8MTApKygxMDIzJm4pKzY1NTM2KTooci5wdXNoKGUpLG8tLSkpOnIucHVzaChlKTtyZXR1cm4gcn1mdW5jdGlvbiBhKHQpe2Zvcih2YXIgZSxuPXQubGVuZ3RoLHI9LTEsbz1cIlwiOysrcjxuOyllPXRbcl0sZT42NTUzNSYmKGUtPTY1NTM2LG8rPXcoZT4+PjEwJjEwMjN8NTUyOTYpLGU9NTYzMjB8MTAyMyZlKSxvKz13KGUpO3JldHVybiBvfWZ1bmN0aW9uIGModCxlKXtpZih0Pj01NTI5NiYmdDw9NTczNDMpe2lmKGUpdGhyb3cgRXJyb3IoXCJMb25lIHN1cnJvZ2F0ZSBVK1wiK3QudG9TdHJpbmcoMTYpLnRvVXBwZXJDYXNlKCkrXCIgaXMgbm90IGEgc2NhbGFyIHZhbHVlXCIpO3JldHVybiExfXJldHVybiEwfWZ1bmN0aW9uIHAodCxlKXtyZXR1cm4gdyh0Pj5lJjYzfDEyOCl9ZnVuY3Rpb24gdSh0LGUpe2lmKDA9PSg0Mjk0OTY3MTY4JnQpKXJldHVybiB3KHQpO3ZhciBuPVwiXCI7cmV0dXJuIDA9PSg0Mjk0OTY1MjQ4JnQpP249dyh0Pj42JjMxfDE5Mik6MD09KDQyOTQ5MDE3NjAmdCk/KGModCxlKXx8KHQ9NjU1MzMpLG49dyh0Pj4xMiYxNXwyMjQpLG4rPXAodCw2KSk6MD09KDQyOTI4NzAxNDQmdCkmJihuPXcodD4+MTgmN3wyNDApLG4rPXAodCwxMiksbis9cCh0LDYpKSxuKz13KDYzJnR8MTI4KX1mdW5jdGlvbiBoKHQsZSl7ZT1lfHx7fTtmb3IodmFyIG4scj0hMSE9PWUuc3RyaWN0LG89cyh0KSxpPW8ubGVuZ3RoLGE9LTEsYz1cIlwiOysrYTxpOyluPW9bYV0sYys9dShuLHIpO3JldHVybiBjfWZ1bmN0aW9uIGYoKXtpZihiPj12KXRocm93IEVycm9yKFwiSW52YWxpZCBieXRlIGluZGV4XCIpO3ZhciB0PTI1NSZnW2JdO2lmKGIrKywxMjg9PSgxOTImdCkpcmV0dXJuIDYzJnQ7dGhyb3cgRXJyb3IoXCJJbnZhbGlkIGNvbnRpbnVhdGlvbiBieXRlXCIpfWZ1bmN0aW9uIGwodCl7dmFyIGUsbixyLG8saTtpZihiPnYpdGhyb3cgRXJyb3IoXCJJbnZhbGlkIGJ5dGUgaW5kZXhcIik7aWYoYj09dilyZXR1cm4hMTtpZihlPTI1NSZnW2JdLGIrKywwPT0oMTI4JmUpKXJldHVybiBlO2lmKDE5Mj09KDIyNCZlKSl7aWYobj1mKCksaT0oMzEmZSk8PDZ8bixpPj0xMjgpcmV0dXJuIGk7dGhyb3cgRXJyb3IoXCJJbnZhbGlkIGNvbnRpbnVhdGlvbiBieXRlXCIpfWlmKDIyND09KDI0MCZlKSl7aWYobj1mKCkscj1mKCksaT0oMTUmZSk8PDEyfG48PDZ8cixpPj0yMDQ4KXJldHVybiBjKGksdCk/aTo2NTUzMzt0aHJvdyBFcnJvcihcIkludmFsaWQgY29udGludWF0aW9uIGJ5dGVcIil9aWYoMjQwPT0oMjQ4JmUpJiYobj1mKCkscj1mKCksbz1mKCksaT0oNyZlKTw8MTh8bjw8MTJ8cjw8NnxvLGk+PTY1NTM2JiZpPD0xMTE0MTExKSlyZXR1cm4gaTt0aHJvdyBFcnJvcihcIkludmFsaWQgVVRGLTggZGV0ZWN0ZWRcIil9ZnVuY3Rpb24gZCh0LGUpe2U9ZXx8e307dmFyIG49ITEhPT1lLnN0cmljdDtnPXModCksdj1nLmxlbmd0aCxiPTA7Zm9yKHZhciByLG89W107KHI9bChuKSkhPT0hMTspby5wdXNoKHIpO3JldHVybiBhKG8pfXZhciB5PVwib2JqZWN0XCI9PXR5cGVvZiBlJiZlLG09KFwib2JqZWN0XCI9PXR5cGVvZiB0JiZ0JiZ0LmV4cG9ydHM9PXkmJnQsXCJvYmplY3RcIj09dHlwZW9mIG8mJm8pO20uZ2xvYmFsIT09bSYmbS53aW5kb3chPT1tfHwoaT1tKTt2YXIgZyx2LGIsdz1TdHJpbmcuZnJvbUNoYXJDb2RlLGs9e3ZlcnNpb246XCIyLjEuMlwiLGVuY29kZTpoLGRlY29kZTpkfTtyPWZ1bmN0aW9uKCl7cmV0dXJuIGt9LmNhbGwoZSxuLGUsdCksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0odGhpcyl9KS5jYWxsKGUsbigyNykodCksZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30oKSl9LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiB0LndlYnBhY2tQb2x5ZmlsbHx8KHQuZGVwcmVjYXRlPWZ1bmN0aW9uKCl7fSx0LnBhdGhzPVtdLHQuY2hpbGRyZW49W10sdC53ZWJwYWNrUG9seWZpbGw9MSksdH19LGZ1bmN0aW9uKHQsZSl7IWZ1bmN0aW9uKCl7XCJ1c2Ugc3RyaWN0XCI7Zm9yKHZhciB0PVwiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrL1wiLG49bmV3IFVpbnQ4QXJyYXkoMjU2KSxyPTA7cjx0Lmxlbmd0aDtyKyspblt0LmNoYXJDb2RlQXQocildPXI7ZS5lbmNvZGU9ZnVuY3Rpb24oZSl7dmFyIG4scj1uZXcgVWludDhBcnJheShlKSxvPXIubGVuZ3RoLGk9XCJcIjtmb3Iobj0wO248bztuKz0zKWkrPXRbcltuXT4+Ml0saSs9dFsoMyZyW25dKTw8NHxyW24rMV0+PjRdLGkrPXRbKDE1JnJbbisxXSk8PDJ8cltuKzJdPj42XSxpKz10WzYzJnJbbisyXV07cmV0dXJuIG8lMz09PTI/aT1pLnN1YnN0cmluZygwLGkubGVuZ3RoLTEpK1wiPVwiOm8lMz09PTEmJihpPWkuc3Vic3RyaW5nKDAsaS5sZW5ndGgtMikrXCI9PVwiKSxpfSxlLmRlY29kZT1mdW5jdGlvbih0KXt2YXIgZSxyLG8saSxzLGE9Ljc1KnQubGVuZ3RoLGM9dC5sZW5ndGgscD0wO1wiPVwiPT09dFt0Lmxlbmd0aC0xXSYmKGEtLSxcIj1cIj09PXRbdC5sZW5ndGgtMl0mJmEtLSk7dmFyIHU9bmV3IEFycmF5QnVmZmVyKGEpLGg9bmV3IFVpbnQ4QXJyYXkodSk7Zm9yKGU9MDtlPGM7ZSs9NClyPW5bdC5jaGFyQ29kZUF0KGUpXSxvPW5bdC5jaGFyQ29kZUF0KGUrMSldLGk9blt0LmNoYXJDb2RlQXQoZSsyKV0scz1uW3QuY2hhckNvZGVBdChlKzMpXSxoW3ArK109cjw8MnxvPj40LGhbcCsrXT0oMTUmbyk8PDR8aT4+MixoW3ArK109KDMmaSk8PDZ8NjMmcztyZXR1cm4gdX19KCl9LGZ1bmN0aW9uKHQsZSl7KGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIG4odCl7Zm9yKHZhciBlPTA7ZTx0Lmxlbmd0aDtlKyspe3ZhciBuPXRbZV07aWYobi5idWZmZXIgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcil7dmFyIHI9bi5idWZmZXI7aWYobi5ieXRlTGVuZ3RoIT09ci5ieXRlTGVuZ3RoKXt2YXIgbz1uZXcgVWludDhBcnJheShuLmJ5dGVMZW5ndGgpO28uc2V0KG5ldyBVaW50OEFycmF5KHIsbi5ieXRlT2Zmc2V0LG4uYnl0ZUxlbmd0aCkpLHI9by5idWZmZXJ9dFtlXT1yfX19ZnVuY3Rpb24gcih0LGUpe2U9ZXx8e307dmFyIHI9bmV3IGk7bih0KTtmb3IodmFyIG89MDtvPHQubGVuZ3RoO28rKylyLmFwcGVuZCh0W29dKTtyZXR1cm4gZS50eXBlP3IuZ2V0QmxvYihlLnR5cGUpOnIuZ2V0QmxvYigpfWZ1bmN0aW9uIG8odCxlKXtyZXR1cm4gbih0KSxuZXcgQmxvYih0LGV8fHt9KX12YXIgaT1lLkJsb2JCdWlsZGVyfHxlLldlYktpdEJsb2JCdWlsZGVyfHxlLk1TQmxvYkJ1aWxkZXJ8fGUuTW96QmxvYkJ1aWxkZXIscz1mdW5jdGlvbigpe3RyeXt2YXIgdD1uZXcgQmxvYihbXCJoaVwiXSk7cmV0dXJuIDI9PT10LnNpemV9Y2F0Y2goZSl7cmV0dXJuITF9fSgpLGE9cyYmZnVuY3Rpb24oKXt0cnl7dmFyIHQ9bmV3IEJsb2IoW25ldyBVaW50OEFycmF5KFsxLDJdKV0pO3JldHVybiAyPT09dC5zaXplfWNhdGNoKGUpe3JldHVybiExfX0oKSxjPWkmJmkucHJvdG90eXBlLmFwcGVuZCYmaS5wcm90b3R5cGUuZ2V0QmxvYjt0LmV4cG9ydHM9ZnVuY3Rpb24oKXtyZXR1cm4gcz9hP2UuQmxvYjpvOmM/cjp2b2lkIDB9KCl9KS5jYWxsKGUsZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30oKSl9LGZ1bmN0aW9uKHQsZSl7ZS5lbmNvZGU9ZnVuY3Rpb24odCl7dmFyIGU9XCJcIjtmb3IodmFyIG4gaW4gdCl0Lmhhc093blByb3BlcnR5KG4pJiYoZS5sZW5ndGgmJihlKz1cIiZcIiksZSs9ZW5jb2RlVVJJQ29tcG9uZW50KG4pK1wiPVwiK2VuY29kZVVSSUNvbXBvbmVudCh0W25dKSk7cmV0dXJuIGV9LGUuZGVjb2RlPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT17fSxuPXQuc3BsaXQoXCImXCIpLHI9MCxvPW4ubGVuZ3RoO3I8bztyKyspe3ZhciBpPW5bcl0uc3BsaXQoXCI9XCIpO2VbZGVjb2RlVVJJQ29tcG9uZW50KGlbMF0pXT1kZWNvZGVVUklDb21wb25lbnQoaVsxXSl9cmV0dXJuIGV9fSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1mdW5jdGlvbih0LGUpe3ZhciBuPWZ1bmN0aW9uKCl7fTtuLnByb3RvdHlwZT1lLnByb3RvdHlwZSx0LnByb3RvdHlwZT1uZXcgbix0LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj10fX0sZnVuY3Rpb24odCxlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKHQpe3ZhciBlPVwiXCI7ZG8gZT1zW3QlYV0rZSx0PU1hdGguZmxvb3IodC9hKTt3aGlsZSh0PjApO3JldHVybiBlfWZ1bmN0aW9uIHIodCl7dmFyIGU9MDtmb3IodT0wO3U8dC5sZW5ndGg7dSsrKWU9ZSphK2NbdC5jaGFyQXQodSldO3JldHVybiBlfWZ1bmN0aW9uIG8oKXt2YXIgdD1uKCtuZXcgRGF0ZSk7cmV0dXJuIHQhPT1pPyhwPTAsaT10KTp0K1wiLlwiK24ocCsrKX1mb3IodmFyIGkscz1cIjAxMjM0NTY3ODlBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6LV9cIi5zcGxpdChcIlwiKSxhPTY0LGM9e30scD0wLHU9MDt1PGE7dSsrKWNbc1t1XV09dTtvLmVuY29kZT1uLG8uZGVjb2RlPXIsdC5leHBvcnRzPW99LGZ1bmN0aW9uKHQsZSxuKXsoZnVuY3Rpb24oZSl7ZnVuY3Rpb24gcigpe31mdW5jdGlvbiBvKHQpe2kuY2FsbCh0aGlzLHQpLHRoaXMucXVlcnk9dGhpcy5xdWVyeXx8e30sYXx8KGUuX19fZWlvfHwoZS5fX19laW89W10pLGE9ZS5fX19laW8pLHRoaXMuaW5kZXg9YS5sZW5ndGg7dmFyIG49dGhpczthLnB1c2goZnVuY3Rpb24odCl7bi5vbkRhdGEodCl9KSx0aGlzLnF1ZXJ5Lmo9dGhpcy5pbmRleCxlLmRvY3VtZW50JiZlLmFkZEV2ZW50TGlzdGVuZXImJmUuYWRkRXZlbnRMaXN0ZW5lcihcImJlZm9yZXVubG9hZFwiLGZ1bmN0aW9uKCl7bi5zY3JpcHQmJihuLnNjcmlwdC5vbmVycm9yPXIpfSwhMSl9dmFyIGk9bigyMCkscz1uKDMxKTt0LmV4cG9ydHM9bzt2YXIgYSxjPS9cXG4vZyxwPS9cXFxcbi9nO3MobyxpKSxvLnByb3RvdHlwZS5zdXBwb3J0c0JpbmFyeT0hMSxvLnByb3RvdHlwZS5kb0Nsb3NlPWZ1bmN0aW9uKCl7dGhpcy5zY3JpcHQmJih0aGlzLnNjcmlwdC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuc2NyaXB0KSx0aGlzLnNjcmlwdD1udWxsKSx0aGlzLmZvcm0mJih0aGlzLmZvcm0ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLmZvcm0pLHRoaXMuZm9ybT1udWxsLHRoaXMuaWZyYW1lPW51bGwpLGkucHJvdG90eXBlLmRvQ2xvc2UuY2FsbCh0aGlzKX0sby5wcm90b3R5cGUuZG9Qb2xsPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7dGhpcy5zY3JpcHQmJih0aGlzLnNjcmlwdC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuc2NyaXB0KSx0aGlzLnNjcmlwdD1udWxsKSxlLmFzeW5jPSEwLGUuc3JjPXRoaXMudXJpKCksZS5vbmVycm9yPWZ1bmN0aW9uKGUpe3Qub25FcnJvcihcImpzb25wIHBvbGwgZXJyb3JcIixlKX07dmFyIG49ZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzY3JpcHRcIilbMF07bj9uLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGUsbik6KGRvY3VtZW50LmhlYWR8fGRvY3VtZW50LmJvZHkpLmFwcGVuZENoaWxkKGUpLHRoaXMuc2NyaXB0PWU7dmFyIHI9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIG5hdmlnYXRvciYmL2dlY2tvL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtyJiZzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dmFyIHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlmcmFtZVwiKTtkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHQpLGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQodCl9LDEwMCl9LG8ucHJvdG90eXBlLmRvV3JpdGU9ZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBuKCl7cigpLGUoKX1mdW5jdGlvbiByKCl7aWYoby5pZnJhbWUpdHJ5e28uZm9ybS5yZW1vdmVDaGlsZChvLmlmcmFtZSl9Y2F0Y2godCl7by5vbkVycm9yKFwianNvbnAgcG9sbGluZyBpZnJhbWUgcmVtb3ZhbCBlcnJvclwiLHQpfXRyeXt2YXIgZT0nPGlmcmFtZSBzcmM9XCJqYXZhc2NyaXB0OjBcIiBuYW1lPVwiJytvLmlmcmFtZUlkKydcIj4nO2k9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChlKX1jYXRjaCh0KXtpPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpZnJhbWVcIiksaS5uYW1lPW8uaWZyYW1lSWQsaS5zcmM9XCJqYXZhc2NyaXB0OjBcIn1pLmlkPW8uaWZyYW1lSWQsby5mb3JtLmFwcGVuZENoaWxkKGkpLG8uaWZyYW1lPWl9dmFyIG89dGhpcztpZighdGhpcy5mb3JtKXt2YXIgaSxzPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJmb3JtXCIpLGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRleHRhcmVhXCIpLHU9dGhpcy5pZnJhbWVJZD1cImVpb19pZnJhbWVfXCIrdGhpcy5pbmRleDtzLmNsYXNzTmFtZT1cInNvY2tldGlvXCIscy5zdHlsZS5wb3NpdGlvbj1cImFic29sdXRlXCIscy5zdHlsZS50b3A9XCItMTAwMHB4XCIscy5zdHlsZS5sZWZ0PVwiLTEwMDBweFwiLHMudGFyZ2V0PXUscy5tZXRob2Q9XCJQT1NUXCIscy5zZXRBdHRyaWJ1dGUoXCJhY2NlcHQtY2hhcnNldFwiLFwidXRmLThcIiksYS5uYW1lPVwiZFwiLHMuYXBwZW5kQ2hpbGQoYSksZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzKSx0aGlzLmZvcm09cyx0aGlzLmFyZWE9YX10aGlzLmZvcm0uYWN0aW9uPXRoaXMudXJpKCkscigpLHQ9dC5yZXBsYWNlKHAsXCJcXFxcXFxuXCIpLHRoaXMuYXJlYS52YWx1ZT10LnJlcGxhY2UoYyxcIlxcXFxuXCIpO3RyeXt0aGlzLmZvcm0uc3VibWl0KCl9Y2F0Y2goaCl7fXRoaXMuaWZyYW1lLmF0dGFjaEV2ZW50P3RoaXMuaWZyYW1lLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpe1wiY29tcGxldGVcIj09PW8uaWZyYW1lLnJlYWR5U3RhdGUmJm4oKX06dGhpcy5pZnJhbWUub25sb2FkPW59fSkuY2FsbChlLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KCkpfSxmdW5jdGlvbih0LGUsbil7KGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHIodCl7dmFyIGU9dCYmdC5mb3JjZUJhc2U2NDtlJiYodGhpcy5zdXBwb3J0c0JpbmFyeT0hMSksdGhpcy5wZXJNZXNzYWdlRGVmbGF0ZT10LnBlck1lc3NhZ2VEZWZsYXRlLHRoaXMudXNpbmdCcm93c2VyV2ViU29ja2V0PWgmJiF0LmZvcmNlTm9kZSx0aGlzLnByb3RvY29scz10LnByb3RvY29scyx0aGlzLnVzaW5nQnJvd3NlcldlYlNvY2tldHx8KGw9byksaS5jYWxsKHRoaXMsdCl9dmFyIG8saT1uKDIxKSxzPW4oMjIpLGE9bigzMCksYz1uKDMxKSxwPW4oMzIpLHU9bigzKShcImVuZ2luZS5pby1jbGllbnQ6d2Vic29ja2V0XCIpLGg9ZS5XZWJTb2NrZXR8fGUuTW96V2ViU29ja2V0O2lmKFwidW5kZWZpbmVkXCI9PXR5cGVvZiB3aW5kb3cpdHJ5e289bigzNSl9Y2F0Y2goZil7fXZhciBsPWg7bHx8XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvd3x8KGw9byksdC5leHBvcnRzPXIsYyhyLGkpLHIucHJvdG90eXBlLm5hbWU9XCJ3ZWJzb2NrZXRcIixyLnByb3RvdHlwZS5zdXBwb3J0c0JpbmFyeT0hMCxyLnByb3RvdHlwZS5kb09wZW49ZnVuY3Rpb24oKXtpZih0aGlzLmNoZWNrKCkpe3ZhciB0PXRoaXMudXJpKCksZT10aGlzLnByb3RvY29scyxuPXthZ2VudDp0aGlzLmFnZW50LHBlck1lc3NhZ2VEZWZsYXRlOnRoaXMucGVyTWVzc2FnZURlZmxhdGV9O24ucGZ4PXRoaXMucGZ4LG4ua2V5PXRoaXMua2V5LG4ucGFzc3BocmFzZT10aGlzLnBhc3NwaHJhc2Usbi5jZXJ0PXRoaXMuY2VydCxuLmNhPXRoaXMuY2Esbi5jaXBoZXJzPXRoaXMuY2lwaGVycyxuLnJlamVjdFVuYXV0aG9yaXplZD10aGlzLnJlamVjdFVuYXV0aG9yaXplZCx0aGlzLmV4dHJhSGVhZGVycyYmKG4uaGVhZGVycz10aGlzLmV4dHJhSGVhZGVycyksdGhpcy5sb2NhbEFkZHJlc3MmJihuLmxvY2FsQWRkcmVzcz10aGlzLmxvY2FsQWRkcmVzcyk7dHJ5e3RoaXMud3M9dGhpcy51c2luZ0Jyb3dzZXJXZWJTb2NrZXQ/ZT9uZXcgbCh0LGUpOm5ldyBsKHQpOm5ldyBsKHQsZSxuKX1jYXRjaChyKXtyZXR1cm4gdGhpcy5lbWl0KFwiZXJyb3JcIixyKX12b2lkIDA9PT10aGlzLndzLmJpbmFyeVR5cGUmJih0aGlzLnN1cHBvcnRzQmluYXJ5PSExKSx0aGlzLndzLnN1cHBvcnRzJiZ0aGlzLndzLnN1cHBvcnRzLmJpbmFyeT8odGhpcy5zdXBwb3J0c0JpbmFyeT0hMCx0aGlzLndzLmJpbmFyeVR5cGU9XCJub2RlYnVmZmVyXCIpOnRoaXMud3MuYmluYXJ5VHlwZT1cImFycmF5YnVmZmVyXCIsdGhpcy5hZGRFdmVudExpc3RlbmVycygpfX0sci5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lcnM9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMud3Mub25vcGVuPWZ1bmN0aW9uKCl7dC5vbk9wZW4oKX0sdGhpcy53cy5vbmNsb3NlPWZ1bmN0aW9uKCl7dC5vbkNsb3NlKCl9LHRoaXMud3Mub25tZXNzYWdlPWZ1bmN0aW9uKGUpe3Qub25EYXRhKGUuZGF0YSl9LHRoaXMud3Mub25lcnJvcj1mdW5jdGlvbihlKXt0Lm9uRXJyb3IoXCJ3ZWJzb2NrZXQgZXJyb3JcIixlKX19LHIucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIG4oKXtyLmVtaXQoXCJmbHVzaFwiKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ci53cml0YWJsZT0hMCxyLmVtaXQoXCJkcmFpblwiKX0sMCl9dmFyIHI9dGhpczt0aGlzLndyaXRhYmxlPSExO2Zvcih2YXIgbz10Lmxlbmd0aCxpPTAsYT1vO2k8YTtpKyspIWZ1bmN0aW9uKHQpe3MuZW5jb2RlUGFja2V0KHQsci5zdXBwb3J0c0JpbmFyeSxmdW5jdGlvbihpKXtpZighci51c2luZ0Jyb3dzZXJXZWJTb2NrZXQpe3ZhciBzPXt9O2lmKHQub3B0aW9ucyYmKHMuY29tcHJlc3M9dC5vcHRpb25zLmNvbXByZXNzKSxyLnBlck1lc3NhZ2VEZWZsYXRlKXt2YXIgYT1cInN0cmluZ1wiPT10eXBlb2YgaT9lLkJ1ZmZlci5ieXRlTGVuZ3RoKGkpOmkubGVuZ3RoO2E8ci5wZXJNZXNzYWdlRGVmbGF0ZS50aHJlc2hvbGQmJihzLmNvbXByZXNzPSExKX19dHJ5e3IudXNpbmdCcm93c2VyV2ViU29ja2V0P3Iud3Muc2VuZChpKTpyLndzLnNlbmQoaSxzKX1jYXRjaChjKXt1KFwid2Vic29ja2V0IGNsb3NlZCBiZWZvcmUgb25jbG9zZSBldmVudFwiKX0tLW98fG4oKX0pfSh0W2ldKX0sci5wcm90b3R5cGUub25DbG9zZT1mdW5jdGlvbigpe2kucHJvdG90eXBlLm9uQ2xvc2UuY2FsbCh0aGlzKX0sci5wcm90b3R5cGUuZG9DbG9zZT1mdW5jdGlvbigpe1widW5kZWZpbmVkXCIhPXR5cGVvZiB0aGlzLndzJiZ0aGlzLndzLmNsb3NlKCl9LHIucHJvdG90eXBlLnVyaT1mdW5jdGlvbigpe3ZhciB0PXRoaXMucXVlcnl8fHt9LGU9dGhpcy5zZWN1cmU/XCJ3c3NcIjpcIndzXCIsbj1cIlwiO3RoaXMucG9ydCYmKFwid3NzXCI9PT1lJiY0NDMhPT1OdW1iZXIodGhpcy5wb3J0KXx8XCJ3c1wiPT09ZSYmODAhPT1OdW1iZXIodGhpcy5wb3J0KSkmJihuPVwiOlwiK3RoaXMucG9ydCksdGhpcy50aW1lc3RhbXBSZXF1ZXN0cyYmKHRbdGhpcy50aW1lc3RhbXBQYXJhbV09cCgpKSx0aGlzLnN1cHBvcnRzQmluYXJ5fHwodC5iNjQ9MSksdD1hLmVuY29kZSh0KSx0Lmxlbmd0aCYmKHQ9XCI/XCIrdCk7dmFyIHI9dGhpcy5ob3N0bmFtZS5pbmRleE9mKFwiOlwiKSE9PS0xO3JldHVybiBlK1wiOi8vXCIrKHI/XCJbXCIrdGhpcy5ob3N0bmFtZStcIl1cIjp0aGlzLmhvc3RuYW1lKStuK3RoaXMucGF0aCt0fSxyLnByb3RvdHlwZS5jaGVjaz1mdW5jdGlvbigpe3JldHVybiEoIWx8fFwiX19pbml0aWFsaXplXCJpbiBsJiZ0aGlzLm5hbWU9PT1yLnByb3RvdHlwZS5uYW1lKX19KS5jYWxsKGUsZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30oKSl9LGZ1bmN0aW9uKHQsZSl7fSxmdW5jdGlvbih0LGUpe3ZhciBuPVtdLmluZGV4T2Y7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSl7aWYobilyZXR1cm4gdC5pbmRleE9mKGUpO2Zvcih2YXIgcj0wO3I8dC5sZW5ndGg7KytyKWlmKHRbcl09PT1lKXJldHVybiByO3JldHVybi0xfX0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHIodCxlLG4pe3RoaXMuaW89dCx0aGlzLm5zcD1lLHRoaXMuanNvbj10aGlzLHRoaXMuaWRzPTAsdGhpcy5hY2tzPXt9LHRoaXMucmVjZWl2ZUJ1ZmZlcj1bXSx0aGlzLnNlbmRCdWZmZXI9W10sdGhpcy5jb25uZWN0ZWQ9ITEsdGhpcy5kaXNjb25uZWN0ZWQ9ITAsbiYmbi5xdWVyeSYmKHRoaXMucXVlcnk9bi5xdWVyeSksdGhpcy5pby5hdXRvQ29ubmVjdCYmdGhpcy5vcGVuKCl9dmFyIG89XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZcInN5bWJvbFwiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uKHQpe3JldHVybiB0eXBlb2YgdH06ZnVuY3Rpb24odCl7cmV0dXJuIHQmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmdC5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmdCE9PVN5bWJvbC5wcm90b3R5cGU/XCJzeW1ib2xcIjp0eXBlb2YgdH0saT1uKDcpLHM9big4KSxhPW4oMzgpLGM9bigzOSkscD1uKDQwKSx1PW4oMykoXCJzb2NrZXQuaW8tY2xpZW50OnNvY2tldFwiKSxoPW4oMzApO3QuZXhwb3J0cz1lPXI7dmFyIGY9e2Nvbm5lY3Q6MSxjb25uZWN0X2Vycm9yOjEsY29ubmVjdF90aW1lb3V0OjEsY29ubmVjdGluZzoxLGRpc2Nvbm5lY3Q6MSxlcnJvcjoxLHJlY29ubmVjdDoxLHJlY29ubmVjdF9hdHRlbXB0OjEscmVjb25uZWN0X2ZhaWxlZDoxLHJlY29ubmVjdF9lcnJvcjoxLHJlY29ubmVjdGluZzoxLHBpbmc6MSxwb25nOjF9LGw9cy5wcm90b3R5cGUuZW1pdDtzKHIucHJvdG90eXBlKSxyLnByb3RvdHlwZS5zdWJFdmVudHM9ZnVuY3Rpb24oKXtpZighdGhpcy5zdWJzKXt2YXIgdD10aGlzLmlvO3RoaXMuc3Vicz1bYyh0LFwib3BlblwiLHAodGhpcyxcIm9ub3BlblwiKSksYyh0LFwicGFja2V0XCIscCh0aGlzLFwib25wYWNrZXRcIikpLGModCxcImNsb3NlXCIscCh0aGlzLFwib25jbG9zZVwiKSldfX0sci5wcm90b3R5cGUub3Blbj1yLnByb3RvdHlwZS5jb25uZWN0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29ubmVjdGVkP3RoaXM6KHRoaXMuc3ViRXZlbnRzKCksdGhpcy5pby5vcGVuKCksXCJvcGVuXCI9PT10aGlzLmlvLnJlYWR5U3RhdGUmJnRoaXMub25vcGVuKCksdGhpcy5lbWl0KFwiY29ubmVjdGluZ1wiKSx0aGlzKX0sci5wcm90b3R5cGUuc2VuZD1mdW5jdGlvbigpe3ZhciB0PWEoYXJndW1lbnRzKTtyZXR1cm4gdC51bnNoaWZ0KFwibWVzc2FnZVwiKSx0aGlzLmVtaXQuYXBwbHkodGhpcyx0KSx0aGlzfSxyLnByb3RvdHlwZS5lbWl0PWZ1bmN0aW9uKHQpe2lmKGYuaGFzT3duUHJvcGVydHkodCkpcmV0dXJuIGwuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXM7dmFyIGU9YShhcmd1bWVudHMpLG49e3R5cGU6aS5FVkVOVCxkYXRhOmV9O3JldHVybiBuLm9wdGlvbnM9e30sbi5vcHRpb25zLmNvbXByZXNzPSF0aGlzLmZsYWdzfHwhMSE9PXRoaXMuZmxhZ3MuY29tcHJlc3MsXCJmdW5jdGlvblwiPT10eXBlb2YgZVtlLmxlbmd0aC0xXSYmKHUoXCJlbWl0dGluZyBwYWNrZXQgd2l0aCBhY2sgaWQgJWRcIix0aGlzLmlkcyksdGhpcy5hY2tzW3RoaXMuaWRzXT1lLnBvcCgpLG4uaWQ9dGhpcy5pZHMrKyksdGhpcy5jb25uZWN0ZWQ/dGhpcy5wYWNrZXQobik6dGhpcy5zZW5kQnVmZmVyLnB1c2gobiksZGVsZXRlIHRoaXMuZmxhZ3MsdGhpc30sci5wcm90b3R5cGUucGFja2V0PWZ1bmN0aW9uKHQpe3QubnNwPXRoaXMubnNwLHRoaXMuaW8ucGFja2V0KHQpfSxyLnByb3RvdHlwZS5vbm9wZW49ZnVuY3Rpb24oKXtpZih1KFwidHJhbnNwb3J0IGlzIG9wZW4gLSBjb25uZWN0aW5nXCIpLFwiL1wiIT09dGhpcy5uc3ApaWYodGhpcy5xdWVyeSl7dmFyIHQ9XCJvYmplY3RcIj09PW8odGhpcy5xdWVyeSk/aC5lbmNvZGUodGhpcy5xdWVyeSk6dGhpcy5xdWVyeTt1KFwic2VuZGluZyBjb25uZWN0IHBhY2tldCB3aXRoIHF1ZXJ5ICVzXCIsdCksdGhpcy5wYWNrZXQoe3R5cGU6aS5DT05ORUNULHF1ZXJ5OnR9KX1lbHNlIHRoaXMucGFja2V0KHt0eXBlOmkuQ09OTkVDVH0pfSxyLnByb3RvdHlwZS5vbmNsb3NlPWZ1bmN0aW9uKHQpe3UoXCJjbG9zZSAoJXMpXCIsdCksdGhpcy5jb25uZWN0ZWQ9ITEsdGhpcy5kaXNjb25uZWN0ZWQ9ITAsZGVsZXRlIHRoaXMuaWQsdGhpcy5lbWl0KFwiZGlzY29ubmVjdFwiLHQpfSxyLnByb3RvdHlwZS5vbnBhY2tldD1mdW5jdGlvbih0KXtpZih0Lm5zcD09PXRoaXMubnNwKXN3aXRjaCh0LnR5cGUpe2Nhc2UgaS5DT05ORUNUOnRoaXMub25jb25uZWN0KCk7YnJlYWs7Y2FzZSBpLkVWRU5UOnRoaXMub25ldmVudCh0KTticmVhaztjYXNlIGkuQklOQVJZX0VWRU5UOnRoaXMub25ldmVudCh0KTticmVhaztjYXNlIGkuQUNLOnRoaXMub25hY2sodCk7YnJlYWs7Y2FzZSBpLkJJTkFSWV9BQ0s6dGhpcy5vbmFjayh0KTticmVhaztjYXNlIGkuRElTQ09OTkVDVDp0aGlzLm9uZGlzY29ubmVjdCgpO2JyZWFrO2Nhc2UgaS5FUlJPUjp0aGlzLmVtaXQoXCJlcnJvclwiLHQuZGF0YSl9fSxyLnByb3RvdHlwZS5vbmV2ZW50PWZ1bmN0aW9uKHQpe3ZhciBlPXQuZGF0YXx8W107dShcImVtaXR0aW5nIGV2ZW50ICVqXCIsZSksbnVsbCE9dC5pZCYmKHUoXCJhdHRhY2hpbmcgYWNrIGNhbGxiYWNrIHRvIGV2ZW50XCIpLGUucHVzaCh0aGlzLmFjayh0LmlkKSkpLHRoaXMuY29ubmVjdGVkP2wuYXBwbHkodGhpcyxlKTp0aGlzLnJlY2VpdmVCdWZmZXIucHVzaChlKX0sci5wcm90b3R5cGUuYWNrPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsbj0hMTtyZXR1cm4gZnVuY3Rpb24oKXtpZighbil7bj0hMDt2YXIgcj1hKGFyZ3VtZW50cyk7dShcInNlbmRpbmcgYWNrICVqXCIsciksZS5wYWNrZXQoe3R5cGU6aS5BQ0ssaWQ6dCxkYXRhOnJ9KX19fSxyLnByb3RvdHlwZS5vbmFjaz1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmFja3NbdC5pZF07XCJmdW5jdGlvblwiPT10eXBlb2YgZT8odShcImNhbGxpbmcgYWNrICVzIHdpdGggJWpcIix0LmlkLHQuZGF0YSksZS5hcHBseSh0aGlzLHQuZGF0YSksZGVsZXRlIHRoaXMuYWNrc1t0LmlkXSk6dShcImJhZCBhY2sgJXNcIix0LmlkKX0sci5wcm90b3R5cGUub25jb25uZWN0PWZ1bmN0aW9uKCl7dGhpcy5jb25uZWN0ZWQ9ITAsdGhpcy5kaXNjb25uZWN0ZWQ9ITEsdGhpcy5lbWl0KFwiY29ubmVjdFwiKSx0aGlzLmVtaXRCdWZmZXJlZCgpfSxyLnByb3RvdHlwZS5lbWl0QnVmZmVyZWQ9ZnVuY3Rpb24oKXt2YXIgdDtmb3IodD0wO3Q8dGhpcy5yZWNlaXZlQnVmZmVyLmxlbmd0aDt0KyspbC5hcHBseSh0aGlzLHRoaXMucmVjZWl2ZUJ1ZmZlclt0XSk7Zm9yKHRoaXMucmVjZWl2ZUJ1ZmZlcj1bXSx0PTA7dDx0aGlzLnNlbmRCdWZmZXIubGVuZ3RoO3QrKyl0aGlzLnBhY2tldCh0aGlzLnNlbmRCdWZmZXJbdF0pO3RoaXMuc2VuZEJ1ZmZlcj1bXX0sci5wcm90b3R5cGUub25kaXNjb25uZWN0PWZ1bmN0aW9uKCl7dShcInNlcnZlciBkaXNjb25uZWN0ICglcylcIix0aGlzLm5zcCksdGhpcy5kZXN0cm95KCksdGhpcy5vbmNsb3NlKFwiaW8gc2VydmVyIGRpc2Nvbm5lY3RcIil9LHIucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXtpZih0aGlzLnN1YnMpe2Zvcih2YXIgdD0wO3Q8dGhpcy5zdWJzLmxlbmd0aDt0KyspdGhpcy5zdWJzW3RdLmRlc3Ryb3koKTt0aGlzLnN1YnM9bnVsbH10aGlzLmlvLmRlc3Ryb3kodGhpcyl9LHIucHJvdG90eXBlLmNsb3NlPXIucHJvdG90eXBlLmRpc2Nvbm5lY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25uZWN0ZWQmJih1KFwicGVyZm9ybWluZyBkaXNjb25uZWN0ICglcylcIix0aGlzLm5zcCksdGhpcy5wYWNrZXQoe3R5cGU6aS5ESVNDT05ORUNUfSkpLHRoaXMuZGVzdHJveSgpLHRoaXMuY29ubmVjdGVkJiZ0aGlzLm9uY2xvc2UoXCJpbyBjbGllbnQgZGlzY29ubmVjdFwiKSx0aGlzfSxyLnByb3RvdHlwZS5jb21wcmVzcz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5mbGFncz10aGlzLmZsYWdzfHx7fSx0aGlzLmZsYWdzLmNvbXByZXNzPXQsdGhpc319LGZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gbih0LGUpe3ZhciBuPVtdO2U9ZXx8MDtmb3IodmFyIHI9ZXx8MDtyPHQubGVuZ3RoO3IrKyluW3ItZV09dFtyXTtyZXR1cm4gbn10LmV4cG9ydHM9bn0sZnVuY3Rpb24odCxlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKHQsZSxuKXtyZXR1cm4gdC5vbihlLG4pLHtkZXN0cm95OmZ1bmN0aW9uKCl7dC5yZW1vdmVMaXN0ZW5lcihlLG4pfX19dC5leHBvcnRzPW59LGZ1bmN0aW9uKHQsZSl7dmFyIG49W10uc2xpY2U7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSl7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGUmJihlPXRbZV0pLFwiZnVuY3Rpb25cIiE9dHlwZW9mIGUpdGhyb3cgbmV3IEVycm9yKFwiYmluZCgpIHJlcXVpcmVzIGEgZnVuY3Rpb25cIik7dmFyIHI9bi5jYWxsKGFyZ3VtZW50cywyKTtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZS5hcHBseSh0LHIuY29uY2F0KG4uY2FsbChhcmd1bWVudHMpKSl9fX0sZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBuKHQpe3Q9dHx8e30sdGhpcy5tcz10Lm1pbnx8MTAwLHRoaXMubWF4PXQubWF4fHwxZTQsdGhpcy5mYWN0b3I9dC5mYWN0b3J8fDIsdGhpcy5qaXR0ZXI9dC5qaXR0ZXI+MCYmdC5qaXR0ZXI8PTE/dC5qaXR0ZXI6MCx0aGlzLmF0dGVtcHRzPTB9dC5leHBvcnRzPW4sbi5wcm90b3R5cGUuZHVyYXRpb249ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm1zKk1hdGgucG93KHRoaXMuZmFjdG9yLHRoaXMuYXR0ZW1wdHMrKyk7aWYodGhpcy5qaXR0ZXIpe3ZhciBlPU1hdGgucmFuZG9tKCksbj1NYXRoLmZsb29yKGUqdGhpcy5qaXR0ZXIqdCk7dD0wPT0oMSZNYXRoLmZsb29yKDEwKmUpKT90LW46dCtufXJldHVybiAwfE1hdGgubWluKHQsdGhpcy5tYXgpfSxuLnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbigpe3RoaXMuYXR0ZW1wdHM9MH0sbi5wcm90b3R5cGUuc2V0TWluPWZ1bmN0aW9uKHQpe3RoaXMubXM9dH0sbi5wcm90b3R5cGUuc2V0TWF4PWZ1bmN0aW9uKHQpe3RoaXMubWF4PXR9LG4ucHJvdG90eXBlLnNldEppdHRlcj1mdW5jdGlvbih0KXt0aGlzLmppdHRlcj10fX1dKX0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c29ja2V0LmlvLmpzLm1hcCIsImNvbnN0IGV2ZW50cyA9IHtcbiAgTkVXX01FU1NBR0UgOiAnW2NsaWVudCBlbWl0c10gbmV3IG1lc3NhZ2UnLFxuICBTRU5EX01FU1NBR0UgOiAnW3NlcnZlciBlbWl0c10gc2VuZCBtZXNzYWdlJyxcbiAgU0VORF9VU0VSTkFNRVM6ICdbc2VydmVyIGVtaXRdIHVzZXJuYW1lcycsXG4gIE5FV19VU0VSOiAnW2NsaWVudCBlbWl0c10gbmV3IHVzZXInLFxuICBESVNDT05ORUNUIDogJ2Rpc2Nvbm5lY3QnXG59XG5cbm1vZHVsZS5leHBvcnRzID0gZXZlbnRzOyJdfQ==
